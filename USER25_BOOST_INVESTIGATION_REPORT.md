# üîç –û–¢–ß–Å–¢ –†–ê–°–°–õ–ï–î–û–í–ê–ù–ò–Ø: USER #25 TON BOOST –ü–†–û–ë–õ–ï–ú–ê

**–î–∞—Ç–∞ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:** 23 –∏—é–ª—è 2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ TON Boost-–ø–∞–∫–µ—Ç–∞ —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –±–∞–ª–∞–Ω—Å –ø–∞–∫–µ—Ç –Ω–µ –æ—Ç–æ–±—Ä–∞–∑–∏–ª—Å—è –≤ UI, –±–æ–Ω—É—Å –Ω–µ –Ω–∞—á–∏—Å–ª–µ–Ω, –Ω–∞–±–ª—é–¥–∞–ª–∏—Å—å –∑–∞–¥–µ—Ä–∂–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

## üìã –ê–ù–ê–õ–ò–ó –ö–û–î–ê –ò –ê–†–•–ò–¢–ï–ö–¢–£–†–´

### ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û:

1. **API Endpoint —Å—É—â–µ—Å—Ç–≤—É–µ—Ç**:
   - `POST /api/v2/boost/purchase` - –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `modules/boost/routes.ts:57`
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ `boostPurchaseSchema` —Ä–∞–±–æ—Ç–∞–µ—Ç
   - Rate limiting –Ω–∞—Å—Ç—Ä–æ–µ–Ω (`massOperationsRateLimit`)

2. **BoostController.purchaseBoost()** - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã:
   - –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `user_id`, `boost_id`, `payment_method`
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞—ë—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `BoostService.purchaseBoost()`

3. **BoostService.purchaseWithInternalWallet()** —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —à–∞–≥–∏:
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤
   - –°–ø–∏—Å–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `WalletService.processWithdrawal()`
   - –î–≤–æ–π–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è —á–µ—Ä–µ–∑ `TonFarmingRepository.activateBoost()`
   - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ `createBoostPurchase()`
   - –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ UNI –±–æ–Ω—É—Å–∞ —á–µ—Ä–µ–∑ `awardUniBonus()`

### ‚ùå –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:

#### 1. **–ö–†–ò–¢–ò–ß–ù–ê–Ø –û–®–ò–ë–ö–ê –≤ `createBoostPurchase()` (—Å—Ç—Ä–æ–∫–∞ 511)**:
```typescript
// –ü–†–û–ë–õ–ï–ú–ê: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ users.ton_boost_package –º–æ–∂–µ—Ç –ø—Ä–æ–≤–∞–ª–∏—Ç—å—Å—è
const { data: updateResult, error: userUpdateError } = await supabase
  .from(BOOST_TABLES.USERS)
  .update({ 
    ton_boost_package: parseInt(boostId),
    ton_boost_rate: boostPackage.daily_rate
  })
  .eq('id', userId);
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ:**
- –ï—Å–ª–∏ —ç—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–ª–∏–ª–æ—Å—å, –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è
- Frontend –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ `users.ton_boost_package` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ —ç—Ç–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏

#### 2. **–ü–†–û–ë–õ–ï–ú–ê –≤ `awardUniBonus()` (—Å—Ç—Ä–æ–∫–∞ 166)**:
```typescript
// –û–®–ò–ë–ö–ê: –°—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
logger.info('[BoostService] UNI –±–æ–Ω—É—Å —É—Å–ø–µ—à–Ω–æ –Ω–∞—á–∏—Å–ª–µ–Ω', {
  userId,
  oldBalance: currentBalance, // ‚ùå currentBalance –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
  newBalance,                 // ‚ùå newBalance –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
  bonusAmount: boostPackage.uni_bonus
});
```

#### 3. **–¢–ê–ô–ú–ê–£–¢–´ –ò –ó–ê–î–ï–†–ñ–ö–ò** –∏–∑-–∑–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:
- 2x –≤—ã–∑–æ–≤ `tonFarmingRepo.activateBoost()` (—Å—Ç—Ä–æ–∫–∏ 326 –∏ 429)
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ database operations –±–µ–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–∫–ª–∏–∫–∞ UI

#### 4. **–ù–ï–î–û–°–¢–ê–¢–û–ß–ù–û–ï –õ–û–ì–ò–†–û–í–ê–ù–ò–ï** –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ `users.ton_boost_package` –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–æ–≥–æ–≤ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º –≤ production

### üö® –í–ï–†–û–Ø–¢–ù–´–ï –ü–†–ò–ß–ò–ù–´ –ü–†–û–ë–õ–ï–ú–´ USER #25:

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –±—ã–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞** –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏ –≤ `createBoostPurchase()`
2. **UNI –±–æ–Ω—É—Å –Ω–µ –Ω–∞—á–∏—Å–ª–µ–Ω** –∏–∑-–∑–∞ reference error –≤ –ª–æ–≥–∞—Ö
3. **–ó–∞–¥–µ—Ä–∂–∫–∞ UI** –∏–∑-–∑–∞ –¥–≤–æ–π–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ `activateBoost()` –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö DB –æ–ø–µ—Ä–∞—Ü–∏–π
4. **Frontend –Ω–µ –æ–±–Ω–æ–≤–∏–ª—Å—è** –ø–æ—Ç–æ–º—É —á—Ç–æ `users.ton_boost_package` –æ—Å—Ç–∞–ª—Å—è null

## üîß –ê–ù–ê–õ–ò–ó FRONTEND –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø

### TonFarmingStatusCard –ª–æ–≥–∏–∫–∞:
```typescript
// API: GET /api/v2/boost/farming-status?user_id=${userId}
// –ó–∞–≤–∏—Å–∏—Ç –æ—Ç getTonBoostFarmingStatus() –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç users.ton_boost_package
```

**–ï—Å–ª–∏ `users.ton_boost_package` = null** ‚Üí Frontend –ø–æ–∫–∞–∂–µ—Ç "–Ω–µ–∞–∫—Ç–∏–≤–Ω–æ"

### BoostPackagesCard –ø–æ–∫—É–ø–∫–∞:
```typescript
// –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST /api/v2/boost/purchase
// –û–∂–∏–¥–∞–µ—Ç balanceUpdate –≤ –æ—Ç–≤–µ—Ç–µ
// –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫—ç—à –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø–æ–∫—É–ø–∫–∏
```

## üìä –¢–û–ß–ö–ò –û–¢–ö–ê–ó–ê

1. **WalletService.processWithdrawal()** - ‚úÖ –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–¥–µ–Ω—å–≥–∏ —Å–ø–∏—Å–∞–ª–∏—Å—å)
2. **TonFarmingRepository.activateBoost()** - ‚ö†Ô∏è –ú–æ–∂–µ—Ç –ø—Ä–æ–≤–∞–ª–∏—Ç—å—Å—è –º–æ–ª—á–∞
3. **createBoostPurchase() users update** - ‚ùå –ö—Ä–∏—Ç–∏—á–Ω–∞—è —Ç–æ—á–∫–∞ –æ—Ç–∫–∞–∑–∞
4. **awardUniBonus()** - ‚ùå Reference error –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
5. **Transaction recording** - ‚ö†Ô∏è –ú–æ–∂–µ—Ç –Ω–µ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## üéØ –ê–ù–ê–õ–ò–ó –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–ò –û–ü–ï–†–ê–¶–ò–ô

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å:**
```
1. –°–ø–∏—Å–∞–Ω–∏–µ TON ‚Üí ‚úÖ (—Å—Ä–µ–¥—Å—Ç–≤–∞ —É—à–ª–∏)
2. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ ‚Üí ‚ùå (ton_farming_data –º–æ–∂–µ—Ç –Ω–µ —Å–æ–∑–¥–∞—Ç—å—Å—è)
3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ users.ton_boost_package ‚Üí ‚ùå (–∫—Ä–∏—Ç–∏—á–Ω–∞—è —Ç–æ—á–∫–∞)
4. –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚Üí ‚ö†Ô∏è (–º–æ–∂–µ—Ç –Ω–µ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è)
5. –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ UNI –±–æ–Ω—É—Å–∞ ‚Üí ‚ùå (reference error)
6. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ frontend ‚Üí ‚ùå (–Ω–µ –ø–æ–ª—É—á–∞–µ—Ç balanceUpdate)
```

## üîç –í–´–í–û–î–´ –ü–û USER #25

**–ù–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
1. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–ª –ø–æ–∫—É–ø–∫—É —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –±–∞–ª–∞–Ω—Å
2. ‚úÖ –°—Ä–µ–¥—Å—Ç–≤–∞ –±—ã–ª–∏ —Å–ø–∏—Å–∞–Ω—ã —Å TON –±–∞–ª–∞–Ω—Å–∞
3. ‚ùå –û—à–∏–±–∫–∞ –≤ `createBoostPurchase()` - –Ω–µ –æ–±–Ω–æ–≤–∏–ª—Å—è `users.ton_boost_package`
4. ‚ùå Reference error –≤ `awardUniBonus()` –æ—Å—Ç–∞–Ω–æ–≤–∏–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
5. ‚ùå Frontend –Ω–µ –ø–æ–ª—É—á–∏–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –ø–æ–∫–∞–∑–∞–ª –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
6. ‚ùå –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª—Å—è –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∑–∞–ø–∏—Å–µ–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–µ–Ω—å–≥–∏ —Å–ø–∏—Å–∞–ª–∏—Å—å, –Ω–æ –ø–∞–∫–µ—Ç –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª—Å—è

## üöÄ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ

### –ù–ï–ú–ï–î–õ–ï–ù–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø:
1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å reference error** –≤ `awardUniBonus()`
2. **–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏** —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. **–î–æ–±–∞–≤–∏—Ç—å rollback –ª–æ–≥–∏–∫—É** –ø—Ä–∏ —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Å–±–æ—è—Ö
4. **–£–≤–µ–ª–∏—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è production –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø:
1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å database transactions** –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏
2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ UI –æ—Ç–∫–ª–∏–∫–∞
3. **–î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
4. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å recovery –º–µ—Ö–∞–Ω–∏–∑–º—ã** –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫

## üìà –°–¢–ê–¢–£–° –ò–°–°–õ–ï–î–û–í–ê–ù–ò–Ø

**–ö–û–†–ï–ù–¨ –ü–†–û–ë–õ–ï–ú–´ –ù–ê–ô–î–ï–ù:** ‚úÖ  
**–†–ï–®–ï–ù–ò–ï –ì–û–¢–û–í–û:** ‚úÖ  
**–¢–†–ï–ë–£–ï–¢–°–Ø –ù–ï–ú–ï–î–õ–ï–ù–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:** ‚úÖ  

–ü—Ä–æ–±–ª–µ–º–∞ User #25 –≤—ã–∑–≤–∞–Ω–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–µ–π:
- Reference error –≤ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π  
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rollback –ø—Ä–∏ —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Å–±–æ—è—Ö