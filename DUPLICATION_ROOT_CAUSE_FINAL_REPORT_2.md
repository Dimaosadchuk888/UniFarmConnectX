# üö® –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê –î–£–ë–õ–ò–ö–ê–¢–û–í - –û–ö–û–ù–ß–ê–¢–ï–õ–¨–ù–û –ù–ê–ô–î–ï–ù–ê!

**–î–∞—Ç–∞:** 3 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø  

## üéØ –¢–ï–û–†–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø –ù–ê 100% –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ê!

**"–î–≤–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ TX Hash –∏ BOC –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞—é—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã"** - –ê–ë–°–û–õ–Æ–¢–ù–û –í–ï–†–ù–û!

## üìä –î–û–ö–ê–ó–ê–¢–ï–õ–¨–°–¢–í–ê –ò–ó –ë–ê–ó–´ –î–ê–ù–ù–´–•

### –ù–∞–π–¥–µ–Ω–æ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤:
- **5 –≥—Ä—É–ø–ø** –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø–æ `tx_hash_unique` 
- **8 –≥—Ä—É–ø–ø** –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø–æ BOC (—Å —Å—É—Ñ—Ñ–∏–∫—Å–∞–º–∏ –∏ –±–µ–∑)
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 25** - –æ—Å–Ω–æ–≤–Ω–∞—è –∂–µ—Ä—Ç–≤–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä:
```
üö® BOC –î–£–ë–õ–ò–ö–ê–¢ #6:
   –ë–∞–∑–æ–≤—ã–π BOC: te6cckECAgEAAKoAAeGIAMtaj5JhEo...
   1. ID: 1800660 | –ë–ï–ó —Å—É—Ñ—Ñ–∏–∫—Å–∞     | 12:19:35
   2. ID: 1800633 | –° —Å—É—Ñ—Ñ–∏–∫—Å–æ–º      | 12:19:26
      –°—É—Ñ—Ñ–∏–∫—Å: _1754223557625_bppxkqf9y
```

**–†–∞–∑–Ω–∏—Ü–∞ –≤–æ –≤—Ä–µ–º–µ–Ω–∏:** 9 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏!

## üîß –ú–ï–•–ê–ù–ò–ó–ú –î–£–ë–õ–ò–†–û–í–ê–ù–ò–Ø

### –ü–∞—Ç—Ç–µ—Ä–Ω –¥—É–±–ª–∏–∫–∞—Ç–æ–≤:
1. **–ü–µ—Ä–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫:** –ü–æ–ª—É—á–∞–µ—Ç BOC —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º `_timestamp_random`
2. **–í—Ç–æ—Ä–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫:** –ü–æ–ª—É—á–∞–µ—Ç "—á–∏—Å—Ç—ã–π" BOC –±–µ–∑ —Å—É—Ñ—Ñ–∏–∫—Å–∞  
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–≤–∞ `TON_DEPOSIT` –¥–ª—è –æ–¥–Ω–æ–π –±–ª–æ–∫—á–µ–π–Ω —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:
- **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è:** 69 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏
- **–ú–∏–Ω–∏–º—É–º:** 8.6 —Å–µ–∫—É–Ω–¥  
- **–ú–∞–∫—Å–∏–º—É–º:** 551 —Å–µ–∫—É–Ω–¥

## üéØ –õ–û–ö–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–û–ë–õ–ï–ú–´

### –ì–¥–µ –∏—Å–∫–∞—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:

#### 1Ô∏è‚É£ Frontend (–≤—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å):
- **–§–∞–π–ª—ã:** `client/src` - –ø–æ–∏—Å–∫ –¥–≤—É—Ö –ø—É—Ç–µ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ BOC
- **–ü–æ–¥–æ–∑—Ä–µ–Ω–∏–µ:** –î–≤–∞ —Ä–∞–∑–Ω—ã—Ö API endpoint –∏–ª–∏ –¥–≤–æ–π–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
- **–ö–ª—é—á:** –û–¥–∏–Ω –ø—É—Ç—å –¥–æ–±–∞–≤–ª—è–µ—Ç —Å—É—Ñ—Ñ–∏–∫—Å, –¥—Ä—É–≥–æ–π –Ω–µ—Ç

#### 2Ô∏è‚É£ Backend routes:
- **–§–∞–π–ª—ã:** `modules/wallet/routes.ts`, `server/routes.ts`  
- **–ü–æ–¥–æ–∑—Ä–µ–Ω–∏–µ:** –î–≤–∞ —Ä–æ—É—Ç–∞ –¥–ª—è –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
- **–ü–∞—Ç—Ç–µ—Ä–Ω:** `/api/wallet/ton-deposit` vs `/api/v2/wallet/ton-deposit`

#### 3Ô∏è‚É£ Middleware/Controllers:
- **–§–∞–π–ª—ã:** `modules/wallet/controller.ts`
- **–ü–æ–¥–æ–∑—Ä–µ–Ω–∏–µ:** –î–≤–æ–π–Ω–æ–π –≤—ã–∑–æ–≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
- **–ú–µ—Ö–∞–Ω–∏–∑–º:** Race condition –∏–ª–∏ retry logic

## üîç –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫:
1. **Frontend:** –ù–∞–π—Ç–∏ –≤—Å–µ –º–µ—Å—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤
2. **Backend:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–æ—É—Ç—ã –Ω–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ  
3. **BOC Processing:** –ù–∞–π—Ç–∏ –≥–¥–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è/—É–¥–∞–ª—è—é—Ç—Å—è —Å—É—Ñ—Ñ–∏–∫—Å—ã
4. **API Calls:** –ù–∞–π—Ç–∏ –¥–≤–æ–π–Ω—ã–µ –≤—ã–∑–æ–≤—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã:
- –ü–æ—á–µ–º—É –æ–¥–∏–Ω BOC –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º, –∞ –¥—Ä—É–≥–æ–π –±–µ–∑?
- –ï—Å—Ç—å –ª–∏ –¥–≤–∞ API endpoint –¥–ª—è TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤?
- –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ª–∏ retry/double submission –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ?

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –í–ê–ñ–ù–û–°–¢–¨

### –ú–∞—Å—à—Ç–∞–± –ø—Ä–æ–±–ª–µ–º—ã:
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –¥–≤–æ–π–Ω—ã–µ –¥–µ–ø–æ–∑–∏—Ç—ã** –∑–∞ –æ–¥–Ω—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞—Å–æ—Ä—è–µ—Ç—Å—è** –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏  
- **–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –º–æ–¥–µ–ª—å –Ω–∞—Ä—É—à–µ–Ω–∞** (–¥–≤–æ–π–Ω—ã–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è)

### –°—Ä–æ—á–Ω–æ—Å—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- **–ö–†–ò–¢–ò–ß–ù–û:** –ù–∞–π—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–≤—É—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:** –ù–µ –∏–∑–º–µ–Ω—è—Ç—å –∫–æ–¥ –¥–æ –ø–æ–ª–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è
- **–ù–ï–û–ë–•–û–î–ò–ú–û:** –ü—Ä–æ—Å–ª–µ–¥–∏—Ç—å –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –æ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –¥–æ –±–∞–∑—ã

## ‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã–ª –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤ —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞:**
- ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –≤ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö TX Hash/BOC
- ‚úÖ –î–≤–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é  
- ‚úÖ –°–æ–∑–¥–∞—é—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ BOC
- ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –ù–ï –≤ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ

**–°—Ç–∞—Ç—É—Å:** –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê –õ–û–ö–ê–õ–ò–ó–û–í–ê–ù–ê - –æ—Å—Ç–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –ö–û–î