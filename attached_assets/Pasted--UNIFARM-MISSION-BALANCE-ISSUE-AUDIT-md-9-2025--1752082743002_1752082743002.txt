üïµÔ∏è‚Äç‚ôÇÔ∏è UNIFARM_MISSION_BALANCE_ISSUE_AUDIT.md

–î–∞—Ç–∞: 9 –∏—é–ª—è 2025–¶–µ–ª—å: –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å, –ø–æ—á–µ–º—É –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏—Å—Å–∏–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è, –Ω–æ –±–∞–ª–∞–Ω—Å UNI –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è. –ê—É–¥–∏—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞.

üéØ –°—Ü–µ–Ω–∞—Ä–∏–π –ø—Ä–æ–±–ª–µ–º—ã

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Ö–æ–¥–∏—Ç –º–∏—Å—Å–∏—é

–í —Ç–∞–±–ª–∏—Ü–µ transactions –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å —Å —Ç–∏–ø–æ–º MISSION_REWARD

–ë–∞–ª–∞–Ω—Å balance_uni –≤ —Ç–∞–±–ª–∏—Ü–µ users –æ—Å—Ç–∞—ë—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

üîç –≠—Ç–∞–ø—ã –∞–Ω–∞–ª–∏–∑–∞

1. üìÅ –ü–æ–∏—Å–∫ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–ù–∞ –æ—Å–Ω–æ–≤–µ ROADMAP.md –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã—è–≤–ª–µ–Ω—ã:

modules/missions/ ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ª–æ–≥–∏–∫—É –º–∏—Å—Å–∏–π

modules/transactions/ ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

modules/user/ –∏–ª–∏ balanceManager ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞

2. üìå –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ:

‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å–æ–∑–¥–∞—ë—Ç—Å—è

–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: –≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è createTransaction()

–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: MISSION_REWARD

–°—Ç—Ä—É–∫—Ç—É—Ä–∞:

{
  "user_id": 62,
  "type": "MISSION_REWARD",
  "amount_uni": "10",
  "created_at": "2025-07-09T10:02:00Z"
}

–í—ã–≤–æ–¥: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å–æ–∑–¥–∞—ë—Ç—Å—è —É—Å–ø–µ—à–Ω–æ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î

‚ùå –ë–∞–ª–∞–Ω—Å balance_uni –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

–ù–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ balanceManager.addBalance() –≤ –ª–æ–≥–∏–∫–µ missions

–ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ UPDATE –∑–∞–ø—Ä–æ—Å–∞ –∫ —Ç–∞–±–ª–∏—Ü–µ users

–í UI balance_uni –Ω–µ —Ä–∞—Å—Ç—ë—Ç, —Ö–æ—Ç—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—á–∏—Å–ª–µ–Ω–∞

–°—Ç–æ—Ä–æ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∏–ª–∏ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏—Å—Å–∏–∏

‚ö†Ô∏è –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (–µ—Å–ª–∏ –µ—Å—Ç—å)

–í core/scheduler/ –Ω–µ—Ç –ª–æ–≥–∏–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –±—ã –ø–æ—Å—Ç–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞ MISSION_REWARD

–°–ª–µ–¥—Å—Ç–≤–∏–µ: –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–∞–∫ –∑–∞–ø–∏—Å—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –Ω–æ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –±–∞–ª–∞–Ω—Å

üß© –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –¥–∏–∞–≥–Ω–æ–∑

–≠—Ç–∞–ø

–°–æ—Å—Ç–æ—è–Ω–∏–µ

–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

–°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

‚úÖ –ï—Å—Ç—å

createTransaction —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è balance_uni

‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

–ù–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∏ –≤—Ä—É—á–Ω—É—é, –Ω–∏ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å

UI –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

–ù–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∏—Å—Å–∏–∏

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π

‚ùå –ù–µ —É—á–∞—Å—Ç–≤—É–µ—Ç

–ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–∏—Å—Å–∏–∏ –∏–ª–∏ –∏—Ö –Ω–∞–≥—Ä–∞–¥—ã

üìå –í—ã–≤–æ–¥—ã

–ú–∏—Å—Å–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ ‚Äî —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ñ–∞–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è ‚úÖ

–ë–∞–ª–∞–Ω—Å UNI –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è ‚Äî –Ω–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –Ω–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ ‚ùå

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –ª–æ–≥–∏–∫–µ –º–æ–¥—É–ª—è missions

–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, MISSION_REWARD ‚Äî —ç—Ç–æ "–≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è" —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è, –Ω–µ –≤–ª–∏—è—é—â–∞—è –Ω–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –±–∞–ª–∞–Ω—Å, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç FARMING_REWARD

üß≠ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —ç—Ç–∞–ø–∞ (–Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–µ–π—á–∞—Å)

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –¥–æ–ª–∂–µ–Ω –ª–∏ MISSION_REWARD –º–µ–Ω—è—Ç—å balance_uni, —Å–æ–≥–ª–∞—Å–Ω–æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ

–ï—Å–ª–∏ –¥–∞ ‚Äî –≤–Ω–µ–¥—Ä–∏—Ç—å balanceManager.addBalance() –≤ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

–û–±–Ω–æ–≤–∏—Ç—å UI: —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∏—Å—Å–∏–∏

–í–æ–∑–º–æ–∂–Ω–æ ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫/–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ—Å—Ç-–Ω–∞–≥—Ä–∞–¥

–û—Ç—á—ë—Ç –∑–∞–≤–µ—Ä—à—ë–Ω. –î–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–π –ª–æ–≥–∏–∫–∏: –¥–æ–ª–∂–µ–Ω –ª–∏ –±–∞–ª–∞–Ω—Å —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å—Å—è –ø—Ä–∏ MISSION_REWARD?