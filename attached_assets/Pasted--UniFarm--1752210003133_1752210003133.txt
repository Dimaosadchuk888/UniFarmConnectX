–í–æ—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—É—é —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Å–∏—Å—Ç–µ–º—ã UniFarm –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π**:

---

## ‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ UniFarm

**–î–∞—Ç–∞:** 11 –∏—é–ª—è 2025
**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ—Å–ª–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –æ—à–∏–±–æ–∫, –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –≤ –æ—Ç—á—ë—Ç–µ –æ—Ç 11.01.2025, **–≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**, **–±–µ–∑ –±–∞–≥–æ–≤ –∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π**. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è **–±–µ–∑ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥**.

---

### üîç –û–±–ª–∞—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ç—Ä–∏ —Ñ–∞–∑—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

---

### üì¶ **–§–∞–∑–∞ 1 ‚Äî –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**

#### üîπ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞–º–∏ (`BalanceManager`)

* –í—Å–µ –º–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `BalanceManager` –≤–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö SQL
* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:

  * –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
  * –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
  * –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ race condition
  * —Ä–µ–∞–∫—Ü–∏—é WebSocket –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞

#### üîπ –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥

* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:

  * –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥ —Ç–æ–ª—å–∫–æ –æ—Ç –¥–æ—Ö–æ–¥–∞ (farming, boost income)
  * –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É –≤ –æ–±–µ–∏—Ö –≤–∞–ª—é—Ç–∞—Ö: UNI –∏ TON
  * –∑–∞–ø–∏—Å–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ referral —Ç–∞–±–ª–∏—Ü–µ
  * –Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö (TON Boost, farming)

#### üîπ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è —Ç–∏–ø–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (`TransactionType`)

* –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `type`
* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∏ –±–∞–∑—É: FARMING\_REWARD, BOOST\_PURCHASE, REFERRAL\_REWARD –∏ —Ç.–¥.

---

### üì¶ **–§–∞–∑–∞ 2 ‚Äî –í–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**

#### üîπ WebSocket real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:

  * —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
  * –ø—Ä–∏—Ö–æ–¥–∏—Ç `balance:update` –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–∞
  * heartbeat —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
  * reconnection –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–æ–∫

#### üîπ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è TON –∫–æ—à–µ–ª—å–∫–æ–≤

* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:

  * –∞–¥—Ä–µ—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑—É
  * –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫
  * duplicate-–æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
  * –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–≤—è–∑–∞–Ω–Ω—ã–π –∞–¥—Ä–µ—Å

#### üîπ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `farming_sessions`

* –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ:

  * –∫–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è farming —Å–æ–∑–¥–∞—ë—Ç —Å–µ—Å—Å–∏—é
  * —Å–µ—Å—Å–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è
  * –ª–æ–≥–∏ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç —Å–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –¥–æ—Ö–æ–¥

---

### üì¶ **–§–∞–∑–∞ 3 ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**

#### üîπ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏ (`BatchBalanceProcessor`)

* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:

  * –Ω–µ—Ç –æ—à–∏–±–æ–∫ supabase.raw
  * batch –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –ø–∞–¥–µ–Ω–∏–π
  * fallback –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è
  * –ª–æ–≥–∏ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç —É—Å–ø–µ—à–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É

#### üîπ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (DI, Repository, EventBus)

* –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ:

  * —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
  * eventBus –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ –±–∞–ª–∞–Ω—Å–∞—Ö / —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö
  * –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–Ω–µ–¥—Ä–µ–Ω—ã —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

---

### üß™ –ú–µ—Ç–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏

* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `userId: 74`)
* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ:

  * –î–µ–ø–æ–∑–∏—Ç
  * –§–∞—Ä–º–∏–Ω–≥
  * –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥
  * TON Boost
  * –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ TON –∫–æ—à–µ–ª—å–∫–∞
  * –ü–æ–ª—É—á–µ–Ω–∏–µ referral-–Ω–∞–≥—Ä–∞–¥
* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ:

  * –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–∑–∞–ø–∏—Å–∏, —Å–≤—è–∑–∏)
  * –ñ—É—Ä–Ω–∞–ª—ã –ª–æ–≥–æ–≤ (–æ—à–∏–±–∫–∏, —Ç–∞–π–º–∏–Ω–≥–∏)
  * WebSocket –∫–∞–Ω–∞–ª
  * UI (–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ)

---

### üìã –§–æ—Ä–º–∞—Ç –æ—Ç—á–µ—Ç–∞

–ü–æ –∫–∞–∂–¥–æ–π —Ñ–∞–∑–µ ‚Äî –∫—Ä–∞—Ç–∫–æ–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ:

```
üì¶ –§–∞–∑–∞ 1
‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–ª–∞–Ω—Å–æ–≤ ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ Referral –Ω–∞–≥—Ä–∞–¥—ã ‚Äî –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è
‚úÖ TransactionType ‚Äî –≤—Å–µ —Ç–∏–ø—ã —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è

üì¶ –§–∞–∑–∞ 2
‚úÖ WebSocket ‚Äî real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–¥—É—Ç
‚úÖ TON –∫–æ—à–µ–ª—å–∫–∏ ‚Äî –∞–¥—Ä–µ—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
‚úÖ Farming sessions ‚Äî —Å–æ–∑–¥–∞—é—Ç—Å—è

üì¶ –§–∞–∑–∞ 3
‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏ ‚Äî —Ä–∞–±–æ—Ç–∞—é—Ç –≤ batch
‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚Äî —Å–æ–±—ã—Ç–∏—è –∏ DI —Ä–∞–±–æ—Ç–∞—é—Ç

–û–±—â–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å: 100% / 95% / –∏ —Ç.–¥.
–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –±–∞–≥–∏: ...
–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: ...
```

---

üü¢ **–í–∞–∂–Ω–æ**:
–ü—Ä–æ–≤–µ—Ä–∫–∞ **–Ω–µ –¥–æ–ª–∂–Ω–∞ –≤–∫–ª—é—á–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞**. –¢–æ–ª—å–∫–æ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç—ã, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ª–æ–≥–∏ –∏ –±–∞–∑—É.

---

–ï—Å–ª–∏ –≥–æ—Ç–æ–≤–æ ‚Äî –º–æ–∂–µ—à—å –ø–µ—Ä–µ–¥–∞—Ç—å —ç—Ç–æ –∞–≥–µ–Ω—Ç—É –∫–∞–∫ –∑–∞–¥–∞—á—É, –∏ –æ–Ω –¥–æ–ª–∂–µ–Ω –≤—ã–¥–∞—Ç—å –æ—Ç—á–µ—Ç –ø–æ —ç—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.
–•–æ—á–µ—à—å ‚Äî —è –º–æ–≥—É —Å–æ—Å—Ç–∞–≤–∏—Ç—å –µ—â—ë –∏ —à–∞–±–ª–æ–Ω –æ—Ç–≤–µ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –æ–Ω –¥–æ–ª–∂–µ–Ω –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–∏—Ç—å.
