üéØ –ó–∞–¥–∞—á–∞ –¥–ª—è –∞–≥–µ–Ω—Ç–∞: –Ω–∞–π—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

üîç –¶–µ–ª—å:

–ù–∞–π—Ç–∏ —Ñ–∞–π–ª –∏–ª–∏ —É—á–∞—Å—Ç–æ–∫ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É ¬´–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ¬ª (–≤–Ω—É—Ç—Ä–∏ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π –≤–µ—Ä—Å–∏–∏ UniFarm), –∏ –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É, –ø–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é, –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—Ä–æ—Å API, –Ω–æ —Ç–µ—Ä—è–µ—Ç JWT —Ç–æ–∫–µ–Ω, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É:

{"success":false,"error":"Authentication required","need_jwt_token":true}


‚∏ª

üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –∞–≥–µ–Ω—Ç–∞ (Prompt):

üîß –ù–∞–π–¥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —É—á–∞—Å—Ç–æ–∫ –∫–æ–¥–∞, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ ‚Äú–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ‚Äù (refresh / reload) –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

üîç –ü—Ä–æ–≤–µ—Ä—å:
 1. –ì–¥–µ –∏–º–µ–Ω–Ω–æ –≤ –∫–æ–¥–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —ç—Ç–∞ –∫–Ω–æ–ø–∫–∞.
 2. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Å–ª–µ –µ—ë –Ω–∞–∂–∞—Ç–∏—è (window.location.reload? reset state? router.replace?).
 3. –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è (–∏–ª–∏ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è) JWT —Ç–æ–∫–µ–Ω –ø—Ä–∏ —ç—Ç–æ–º –¥–µ–π—Å—Ç–≤–∏–∏.

‚ö†Ô∏è –û—à–∏–±–∫—É, –∫–æ—Ç–æ—Ä—É—é –º—ã –ø–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è:

{"success":false,"error":"Authentication required","need_jwt_token":true}

üß™ –ü—Ä–æ–≤–µ–¥–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:
 ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å, –∫–∞–∫ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–∫–µ–Ω—ã (localStorage, sessionStorage, cookie) –∏ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ª–∏ –æ–Ω–∏ –ø—Ä–∏ reload.
 ‚Ä¢ –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏, –∏ —á—Ç–æ —Å–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º.

‚úÖ –ó–∞–¥–∞—á–∞: –ù–∞–π—Ç–∏ –∏ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å:
 ‚Ä¢ –¢–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∫–Ω–æ–ø–∫–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.
 ‚Ä¢ –ì–¥–µ –∏ –ø–æ—á–µ–º—É —Ç–µ—Ä—è–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (JWT).
 ‚Ä¢ –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç–æ–∫–µ–Ω –≤ localStorage, –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–µ—Ä–µ–¥ API-–∑–∞–ø—Ä–æ—Å–æ–º, –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å silent login –∏ —Ç.–ø.).

‚∏ª

üìå –ü–æ–¥—Å–∫–∞–∑–∫–∞ –∞–≥–µ–Ω—Ç—É (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è React/Next.js):

–ü—Ä–æ–≤–µ—Ä—å:
 ‚Ä¢ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: AppWrapper, RootLayout, Header, ReloadButton, AuthProvider, TokenManager
 ‚Ä¢ –•—Ä–∞–Ω–∏–ª–∏—â–µ: localStorage.getItem('jwt'), authContext.token, cookies['jwt']
 ‚Ä¢ –°–æ–±—ã—Ç–∏—è: window.location.reload(), router.reload(), resetApp()
 ‚Ä¢ useEffect, –∫–æ—Ç–æ—Ä—ã–π –æ—á–∏—â–∞–µ—Ç —Å—Ç–µ–π—Ç –ø—Ä–∏ –º–∞—É–Ω—Ç–µ

‚∏ª

üí° –í–∞—Ä–∏–∞–Ω—Ç –∫—Ä–∞—Ç–∫–æ–≥–æ Prompt‚Äô–∞ (–µ—Å–ª–∏ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ Dev Agent CLI):

–ù–∞–π–¥–∏ –≤ –∫–æ–¥–µ –∫–Ω–æ–ø–∫—É ‚Äú–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ‚Äù –∏ –æ–ø—Ä–µ–¥–µ–ª–∏, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –µ—ë –Ω–∞–∂–∞—Ç–∏–∏. –ó–∞—Ç–µ–º –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π, –ø–æ—á–µ–º—É –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∞ `need_jwt_token`. –ü—Ä–æ–≤–µ—Ä—å, –≥–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è JWT –∏ –ø–æ—á–µ–º—É –æ–Ω —Ç–µ—Ä—è–µ—Ç—Å—è. –í—ã–¥–∞–π —Å–ø–∏—Å–æ–∫ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏, –∏ —à–∞–≥–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é.