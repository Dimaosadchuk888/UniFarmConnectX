🔧 Что не реализовано

Сейчас у тебя есть:
 • ✅ Вывод средств (UNI / TON)
 • ✅ Баланс
 • ❌ Пополнение баланса (входящий TON через TON Connect) — отсутствует

⸻

🧩 Что нужно срочно реализовать

🎯 Цель

Добавить блок пополнения баланса через подключённый TON Wallet (Connect Wallet) по протоколу TonConnect v2.

⸻

✅ Рекомендованный план действий

1. 🔹 Куда разместить

Добавь новый блок над “Выводом средств”, рядом с балансом (UI-предложение ниже👇).

Почему так:
 • Пользователь сначала видит баланс → логично сразу видеть кнопку пополнения.
 • Уже есть Connect Wallet — мы используем его сессию.

⸻

2. 🔳 Как будет выглядеть (UI макет)

─────────────────────────────────────────────
[UNI Token: 1,009,900.12 UNI]     [Пополнить UNI]
[TON Balance: 898.11 TON]         [Пополнить TON]
─────────────────────────────────────────────

▼ Пополнение через TON Wallet
[ Введите сумму TON ]  [ Max ]
[ 🔘 Отправить ] ← на TON Smart Contract

(Ваш кошелек: EQD...ABC)


⸻

3. ⚙️ Что делает кнопка “Пополнить”
 1. Проверяет, подключён ли TON Wallet (TonConnect сессия).
 2. Вызывает функцию tonConnect.sendTransaction() на смарт-контракт для пополнения.
 3. После подтверждения — отправляет transactionHash на backend.
 4. Backend проверяет и зачисляет токены UNI в систему.

⸻

4. 💡 Бэкенд-логика

На backend ты должен добавить эндпоинт:

POST /api/v2/wallet/ton-deposit

body: {
  user_id,
  ton_tx_hash,
  amount,
  wallet_address
}

→ Этот endpoint:
 • Проверяет, что ton_tx_hash валиден (через TON API)
 • Добавляет запись в transactions (type: DEPOSIT, currency: TON)
 • Обновляет баланс в таблице balances

⸻

🧠 Что можно переиспользовать
 • UI-логику из Connect Wallet уже подключён.
 • Модуль транзакций уже есть — просто добавь DEPOSIT как тип.

⸻

📌 Вывод — чётко и по делу

Добавь блок пополнения TON баланса прямо над выводом средств. Кнопка вызывает TonConnect → отправка TON → backend получает хэш → создаёт транзакцию → обновляет баланс.

Если хочешь, я могу прямо сейчас:
 • ✅ Составить точный JSON для транзакции
 • ✅ Написать backend endpoint /ton-deposit
 • ✅ Дать готовый UI-компонент