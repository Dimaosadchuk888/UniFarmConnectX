Техническое задание: Исправить логику регистрации пользователей на основе initData (Telegram WebApp)

Цель:
Обеспечить корректную регистрацию новых пользователей Telegram Mini App в базе данных. Убедиться, что каждый пользователь, запустивший Mini App через Telegram, сохраняется в базе.

Проблема:
При запуске приложения Telegram WebApp API (`initData`) не сохранялся и не передавался на бэкенд, из-за чего пользователи не регистрировались. Это приводит к "потере" аккаунтов в базе.

Файлы для правки:
1. client/src/services/telegramService.ts — уже добавлено сохранение initData
2. server/api/me.ts (или аналогичный endpoint регистрации/получения пользователя)
3. Бэкенд-логика сохранения пользователя (по схеме Drizzle)

---

[1] Проверить, как и где вызывается API POST /api/me или GET /api/me:
- Этот запрос должен отправлять initData или telegram_user_id, чтобы бэкенд мог зарегистрировать пользователя.

[2] Убедиться, что серверная функция:
- Распаковывает и верифицирует initData,
- Извлекает user.id, username и другие данные из initDataUnsafe,
- Проверяет наличие пользователя в БД,
- Если пользователь не найден — создаёт новую запись в таблице пользователей.

[3] Проверить, не мешает ли отсутствие ref_code регистрации:
- Если параметр startParam отсутствует — это не должно блокировать регистрацию,
- Нужно разрешить регистрацию даже без ref_code.

[4] Убедиться, что в таблицу пользователей (`users`) сохраняются хотя бы:
- telegram_id (из initDataUnsafe.user.id),
- username,
- ref_code (если есть),
- created_at

---

Дополнительно:
- Добавить логгирование на этапе регистрации: Telegram ID, username, ref_code, результат.
- После внесения правок — протестировать регистрацию через Mini App: создать 1–2 новых аккаунта и проверить, что они появились в базе.

Результат:
- Каждый пользователь, открывший Mini App через Telegram, сохраняется в БД,
- initData корректно используется и верифицируется,
- ref_code сохраняется, если был передан через startParam,
- Проблема "пропадающих" аккаунтов решена.