–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ ‚Ä¢ –ö–æ–º–∞–Ω–¥–∞ /start –¥–ª—è @UniFarming_Bot

–¶–µ–ª—å: –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–æ–º–∞–Ω–¥—ã /start –≤ Telegram‚Äë–±–æ—Ç–µ UniFarm, —á—Ç–æ–±—ã –æ–Ω–∞:
1. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–ª–∞ –∫–∞–∫ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, —Ç–∞–∫ –∏ —Å deep‚Äëlink‚Äë–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º (/start ref_XXXX).
2. –§–∏–∫—Å–∏—Ä–æ–≤–∞–ª–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞ –≤ –±–∞–∑–µ —á–µ—Ä–µ–∑ API.
3. –û—Ç–ø—Ä–∞–≤–ª—è–ª–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Ä–µ—Ñ‚Äë—Å—Å—ã–ª–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
4. –î–∞–≤–∞–ª–∞ –∫–Ω–æ–ø–∫—É ¬´üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å UniFarm¬ª (–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç WebApp).
5. –†–∞–±–æ—Ç–∞–ª–∞ —á–µ—Ä–µ–∑ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Webhook /telegram/webhook.

----------------------------------------------------------------
1. –û–±–ª–∞—Å—Ç—å —Ä–∞–±–æ—Ç—ã
----------------------------------------------------------------
| –§–∞–π–ª       | –î–µ–π—Å—Ç–≤–∏–µ                                           |
|------------|----------------------------------------------------|
| bot.py     | **–¢–æ–ª—å–∫–æ –∑–¥–µ—Å—å** —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å/–¥–æ–ø–∏—Å–∞—Ç—å –ª–æ–≥–∏–∫—É /start|
| main.py –∏–ª–∏ app.py | –õ–∏—à—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å dispatcher –∏ –º–∞—Ä—à—Ä—É—Ç /telegram/webhook. –ù–∏—á–µ–≥–æ –±–æ–ª—å—à–µ –Ω–µ –º–µ–Ω—è—Ç—å.|

–°—Ç—Ä–æ–≥–æ –∑–∞–ø—Ä–µ—â–µ–Ω–æ:
‚Ä¢ –∏–∑–º–µ–Ω—è—Ç—å –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞, back‚Äë–µ–Ω–¥–∞, —Å—Ö–µ–º—ã –ë–î;
‚Ä¢ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∏–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –ª–æ–≥–∏–∫—É –≤ –Ω–æ–≤—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏;
‚Ä¢ –∫–æ–º–º–∏—Ç–∏—Ç—å —Ç–æ–∫–µ–Ω—ã/—Å–µ–∫—Ä–µ—Ç—ã –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ.

----------------------------------------------------------------
2. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ /start
----------------------------------------------------------------
1. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
   if update.message.text.startswith("/start"):
       # payload = ref_XXXX (–µ—Å–ª–∏ –µ—Å—Ç—å)

2. –§–∏–∫—Å–∞—Ü–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª–∞ (–µ—Å–ª–∏ payload –µ—Å—Ç—å):
   POST /api/referral/assign { telegramId, ref_code }

3. –ü–æ–ª—É—á–µ–Ω–∏–µ/—Å–æ–∑–¥–∞–Ω–∏–µ ref‚Äë–∫–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
   POST /api/referral/code { telegramId } ‚áí { ref_code }

4. –°–±–æ—Ä–∫–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Å—ã–ª–∫–∏:
   https://t.me/UniFarming_Bot/UniFarm?startapp=ref_<ref_code>

5. –û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:
   ‚Ä¢ –¢–µ–∫—Å—Ç–æ–≤–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ (Markdown).
   ‚Ä¢ –ï–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞.
   ‚Ä¢ Inline‚Äë–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞: InlineKeyboardButton("üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å UniFarm", url="https://t.me/UniFarming_Bot/UniFarm")

6. –õ–æ–≥–∏: –≤—ã–≤–µ—Å—Ç–∏ telegram_id, payload, my_ref_code.

----------------------------------------------------------------
3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Webhook
----------------------------------------------------------------
‚Ä¢ –ú–∞—Ä—à—Ä—É—Ç: /telegram/webhook
‚Ä¢ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: python‚Äëtelegram‚Äëbot v13
‚Ä¢ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å CommandHandler("start", start_handler) –≤ dispatcher.

----------------------------------------------------------------
4. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
----------------------------------------------------------------
BOT_TOKEN   = 7980427501:AAHdia3LusU9dk2aRvhXgmj9Ozo08nR0Gug (—Ö—Ä–∞–Ω–∏—Ç—å –≤ .env)
WEBAPP_URL  = https://t.me/UniFarming_Bot/UniFarm
API_DOMAIN  = https://uni-farm-connect-2-misterxuniverse.replit.app

----------------------------------------------------------------
5. –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω
----------------------------------------------------------------
1. –°–æ–∑–¥–∞—Ç—å/–æ—Ç–∫—Ä—ã—Ç—å bot.py.
2. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å Flask, telegram.Bot, Update, Dispatcher, InlineKeyboard...
3. bot = Bot(token=os.environ["BOT_TOKEN"])
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é start_handler(update, context) (—Å–º. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è).
5. dispatcher.add_handler(CommandHandler("start", start_handler))
6. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ Flask-–º–∞—Ä—à—Ä—É—Ç /telegram/webhook –æ—Ç–¥–∞—ë—Ç update –≤ dispatcher.
7. –ù–µ —Ç—Ä–æ–≥–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ —á–∞—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞.
8. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Webhook:
   bot.set_webhook(url=f"{API_DOMAIN}/telegram/webhook")
9. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É /start (—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –∏ –±–µ–∑).

----------------------------------------------------------------
6. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏
----------------------------------------------------------------
‚Ä¢ /start –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ ‚Üí –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –∫–Ω–æ–ø–∫–∞ + –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞.
‚Ä¢ /start ref_XXXX ‚Üí –±–æ—Ç —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª–∞, –∑–∞—Ç–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + —Å—Å—ã–ª–∫–∞.
‚Ä¢ –î—Ä—É–≥–∏–µ —á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å.
‚Ä¢ –í –∫–æ–Ω—Å–æ–ª–∏ Replit –Ω–µ—Ç –æ—à–∏–±–æ–∫.
‚Ä¢ getWebhookInfo –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç URL .../telegram/webhook.

----------------------------------------------------------------
–û—Ç—á—ë—Ç –∞–≥–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
‚úÖ /start –∫–æ–º–∞–Ω–¥–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
‚úÖ payload —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è
‚úÖ ref_code —Å–æ–∑–¥–∞—ë—Ç—Å—è
‚úÖ Inline‚Äë–∫–Ω–æ–ø–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ Webhook –∞–∫—Ç–∏–≤–µ–Ω
