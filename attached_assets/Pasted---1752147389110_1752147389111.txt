–í–æ—Ç —Ç–æ—á–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –∞–≥–µ–Ω—Ç–∞ –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∞—É–¥–∏—Ç –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –±–∞–ª–∞–Ω—Å–∞:

---

### üìå –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: **–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∞—É–¥–∏—Ç —Ü–µ–ø–æ—á–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ UNI (–±–µ–∑ –ø—Ä–∞–≤–æ–∫ –∫–æ–¥–∞)**

**–¶–µ–ª—å:**
–ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ, —É–≥–ª—É–±–ª—ë–Ω–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤—Å–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π —Ü–µ–ø–æ—á–∫–∏ **–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ UNI**, –≤–∫–ª—é—á–∞—è WebSocket-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ —Ä–∞–Ω–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–æ–π –æ—à–∏–±–∫–∏ —Å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º –≤—ã–∑–æ–≤–∞ `BalanceNotificationService` –≤ `BalanceManager`.

---

### üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

#### 1. üìÇ –ü–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å—é —Ü–µ–ø–æ—á–∫—É:

* –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å, —á—Ç–æ **—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –≤ `BalanceManager` –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏—Å–∫–ª—é—á–∏–ª–∞ –≤—ã–∑–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å **–≤—Å–µ –º–µ—Ç–æ–¥—ã** `BalanceManager`, –æ—Å–æ–±–µ–Ω–Ω–æ `subtractBalance()` –∏ `updateUserBalance()`
* –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ **–≤ –Ω–∏—Ö –Ω–µ—Ç –≤—ã–∑–æ–≤–∞ `BalanceNotificationService`**
* –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å: **–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ª–∏ –±–∞–ª–∞–Ω—Å –≤ Supabase ‚Äî –¥–∞, –∞ –Ω–∞ frontend ‚Äî –Ω–µ—Ç**

#### 2. üîé –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

* –ù–∞–π—Ç–∏ **–≤—Å–µ –º–æ–¥—É–ª–∏ –∏ —Å–µ—Ä–≤–∏—Å—ã**, –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç `BalanceManager` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `farmingService`, `boostService`, `walletService`)
* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, **–∫—Ç–æ –∏–∑ –Ω–∏—Ö –æ–∂–∏–¥–∞–µ—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ —á–µ—Ä–µ–∑ WebSocket**, –Ω–æ –µ–≥–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç

#### 3. üîå –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –∏ —Å–ª—É—à–∞—Ç–µ–ª–∏ WebSocket:

* –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å, —á—Ç–æ **frontend –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ —Å–æ–±—ã—Ç–∏–µ `balance_update`**
* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, **–¥–æ—Ö–æ–¥–∏—Ç –ª–∏ –æ–Ω–æ –∏–∑ –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**, –Ω–∞–ø—Ä–∏–º–µ—Ä –∏–∑ `scheduler` ‚Äî –µ—Å–ª–∏ –¥–∞, —Ç–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–±–æ—á–∞—è
* –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ **–ø—Ä–∏ –¥–µ–π—Å—Ç–≤–∏—è—Ö —á–µ—Ä–µ–∑ `BalanceManager` —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è**

#### 4. üß™ –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç-–¥–µ–π—Å—Ç–≤–∏—è (–±–µ–∑ –∫–æ–¥–∞):

* –û—Ç–∫—Ä—ã—Ç—å farming-–ø–∞–∫–µ—Ç ‚Üí —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ:

  * ‚úÖ –ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ –ë–î
  * ‚ùå UI –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
* –û—Ç–∫—Ä—ã—Ç—å boost-–ø–∞–∫–µ—Ç (–µ—Å–ª–∏ —á–µ—Ä–µ–∑ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫) ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ª–∏ UI –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

### üö´ –í–ê–ñ–ù–û: –ß—Ç–æ –ù–ï –¥–µ–ª–∞—Ç—å

* ‚ùå –ù–µ –∏–∑–º–µ–Ω—è—Ç—å –∫–æ–¥ (–Ω–∏–∫–∞–∫–∏—Ö hotfix –∏–ª–∏ –≤—Å—Ç–∞–≤–æ–∫ `notifyBalanceUpdate`)
* ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–±—Ö–æ–¥—ã –∏–ª–∏ refresh'–∏
* ‚úÖ –¢–æ–ª—å–∫–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç—á—ë—Ç

---

### üì§ –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º –æ—Ç—á—ë—Ç–µ:

1. ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ **–≤ —ç—Ç–æ–º –ø—Ä–∏—á–∏–Ω–∞** –ø—Ä–æ–±–ª–µ–º—ã
2. üîÅ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Å—Ç–∞, –≥–¥–µ **–º–æ–∂–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π —Ä–µ–≥—Ä–µ—Å—Å**, –Ω–æ –µ—â—ë –Ω–µ –∑–∞–º–µ—á–µ–Ω
3. üìÅ –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –∏ –º–æ–¥—É–ª–µ–π, –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–Ω—ã—Ö –≤ —Ü–µ–ø–æ—á–∫–µ
4. üéØ –ß—ë—Ç–∫–∏–π –≤—ã–≤–æ–¥:

   * –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–∏ –ø—Ä–∏—á–∏–Ω–∞
   * –ï—Å—Ç—å –ª–∏ **–µ—â—ë —Ç–æ—á–∫–∏ —Ä–∏—Å–∫–∞**
5. ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

   * –ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å (–∏ –≥–¥–µ –∏–º–µ–Ω–Ω–æ)
   * –ö–∞–∫ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏

---

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –¥–æ–±–∞–≤–ª—é —à–∞–±–ª–æ–Ω –æ—Ç—á—ë—Ç–∞. –ì–æ—Ç–æ–≤ –ø–µ—Ä–µ–¥–∞—Ç—å —ç—Ç–æ –∞–≥–µ–Ω—Ç—É.
