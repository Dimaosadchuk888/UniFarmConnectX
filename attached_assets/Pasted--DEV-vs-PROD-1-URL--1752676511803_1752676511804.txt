‚úÖ –ß–ï–ö-–õ–ò–°–¢ –î–õ–Ø –ö–û–ú–ê–ù–î–´ ‚Äî –£–°–¢–†–ê–ù–ï–ù–ò–ï –†–ê–°–•–û–ñ–î–ï–ù–ò–ô DEV vs PROD

‚∏ª

üîß 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö URL –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü—Ä–æ–≤–µ—Ä–∫–∞ –î–µ–π—Å—Ç–≤–∏–µ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
‚úÖ window.location.origin –°—Ä–∞–≤–Ω–∏—Ç—å –≤ Preview –∏ Prod –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º–∞–Ω–∏—Ñ–µ—Å—Ç, API –∏ JWT –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–æ–º–µ–Ω
‚úÖ –ú–∞–Ω–∏—Ñ–µ—Å—Ç TON Wallet –ü–µ—Ä–µ–π—Ç–∏ –ø–æ https://prod-url/tonconnect-manifest.json –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è JSON, –∞ –Ω–µ 404
‚úÖ .env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Replit Secrets –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –Ω—É–∂–Ω—ã–µ –∫–ª—é—á–∏ (JWT_SECRET, API_URL, WALLET_URL, –∏ —Ç.–¥.) –ø–µ—Ä–µ–¥–∞–Ω—ã
‚úÖ API URL –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ fetch, axios –≤—ã–∑–æ–≤–∞—Ö –ù–µ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å localhost –∏–ª–∏ preview
‚úÖ initData Telegram console.log(window.Telegram.WebApp.initData) –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ, –∏–Ω–∞—á–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç


‚∏ª

üîê 2. JWT –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–ü—Ä–æ–≤–µ—Ä–∫–∞ –î–µ–π—Å—Ç–≤–∏–µ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ initData –°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å—å Telegram –ë–µ–∑ —ç—Ç–æ–≥–æ –Ω–µ –≤—ã–¥–∞—ë—Ç—Å—è JWT —Ç–æ–∫–µ–Ω
‚úÖ JWT —Ç–æ–∫–µ–Ω –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ Authorization –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö –ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Ç–æ–∫–µ–Ω
‚úÖ –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: {"need_jwt_token": true}? –ï—Å–ª–∏ –¥–∞ ‚Äî –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–∫–µ–Ω–µ –∏–ª–∏ –µ–≥–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
‚úÖ Auth middleware –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–µ –ª–æ–º–∞–µ—Ç –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ù–µ–ª—å–∑—è –¥–µ–ª–∞—Ç—å return error —Å—Ä–∞–∑—É ‚Äî –Ω—É–∂–Ω–æ fallback


‚∏ª

üß± 3. –ú–∞–Ω–∏—Ñ–µ—Å—Ç TON –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞

–ü—Ä–æ–≤–µ—Ä–∫–∞ –î–µ–π—Å—Ç–≤–∏–µ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
‚úÖ –ù–∞–ª–∏—á–∏–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ–∞–π–ª —Ä–µ–∞–ª—å–Ω–æ –ª–µ–∂–∏—Ç –≤ public/ –ü—É—Ç—å: /public/tonconnect-manifest.json
‚úÖ –í –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ: url: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ url: —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å preview –∏–ª–∏ raw.githubusercontent
‚úÖ Wallet –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É TON Connect –≤ –ø—Ä–æ–¥–µ –û—à–∏–±–∫–∞ ‚Äúmanifest not found‚Äù = –Ω–µ–≤–µ—Ä–Ω—ã–π –ø—É—Ç—å


‚∏ª

üßº 4. –û—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

–ü—Ä–æ–≤–µ—Ä–∫–∞ –î–µ–π—Å—Ç–≤–∏–µ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
‚úÖ –ö—ç—à –û—á–∏—Å—Ç–∏—Ç—å .next/, node_modules/ –∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ò–Ω–æ–≥–¥–∞ —Å—Ç–∞—Ä–∞—è —Å–±–æ—Ä–∫–∞ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –¥–µ–ø–ª–æ–π
‚úÖ –†—É—á–Ω–æ–π –±–∏–ª–¥ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é npm run build –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –±–∏–ª–¥ –Ω–µ –ø–∞–¥–∞–µ—Ç
‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Replit Deploy –ù–µ –ø–µ—Ä–µ–ø—É—Ç–∞–Ω–∞ –ª–∏ –≤–µ—Ç–∫–∞ –∏–ª–∏ —Ñ–∞–π–ª –¥–µ–ø–ª–æ—è –í Replit –º–æ–≥—É—Ç –¥–µ–ø–ª–æ–∏—Ç—å—Å—è —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏


‚∏ª

üß© 5. –†–∞–±–æ—Ç–∞ UI + –º–∞—Ä—à—Ä—É—Ç—ã

–ü—Ä–æ–≤–µ—Ä–∫–∞ –î–µ–π—Å—Ç–≤–∏–µ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
‚úÖ –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–∞–±–æ—Ç–∞—é—Ç –û—Ç–∫—Ä—ã—Ç—å –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –≤—Ä—É—á–Ω—É—é –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω–∏ –Ω–µ 404 –∏–ª–∏ –Ω–µ –ø—É—Å—Ç—ã–µ
‚úÖ –ë–∞–ª–∞–Ω—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ª–∏ –∑–∞–ø—Ä–æ—Å –ò —á—Ç–æ JWT –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ –ú–∏—Å—Å–∏–∏ / –±–æ–Ω—É—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–∫ ‚Üí –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
‚úÖ Farming –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ–ø–æ–∑–∏—Ç / –æ—à–∏–±–∫–∏ Internal Server Error –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –∏ –ª–æ–≥–∏–∫—É


‚∏ª

üì¶ 6. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

–ü—Ä–æ–≤–µ—Ä–∫–∞ –î–µ–π—Å—Ç–≤–∏–µ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
‚úÖ Telegram Mini App Manifest –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ Telegram –≤–∏–¥–∏—Ç WebApp –°—Å—ã–ª–∫–∏ –Ω–∞ startapp –¥–æ–ª–∂–Ω—ã –≤–µ—Å—Ç–∏ –Ω–∞ –ø—Ä–æ–¥
‚úÖ –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ª–∏ Replit –ª–∏—à–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –ü—Ä–æ–±–ª–µ–º–∞ —Å Out of Memory
‚úÖ Telegram WebApp –≤–µ—Ä—Å–∏—è –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ Telegram Mini App –≤—Å—ë –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–ø–∏—Å–∞–Ω–æ –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ side panel –∏–ª–∏ fullscreen


‚∏ª

üìç –§–∏–Ω–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
 ‚Ä¢ –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç (npm run build)
 ‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ .env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
 ‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ tonconnect-manifest.json
 ‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ Telegram (initData ‚Üí JWT)
 ‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
 ‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞, —Ñ–∞—Ä–º–∏–Ω–≥, –±–æ–Ω—É—Å—ã 

–ö–æ–¥ –Ω–µ –∏–∑–º–µ–Ω—è–µ–º , —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–æ–¥–∏–º –≥–ª—É–±–æ–∫–∏–µ —Ç–µ—Å—Ç—ã