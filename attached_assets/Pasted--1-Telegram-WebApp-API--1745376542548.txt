üö© –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è (—á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∞–≥–µ–Ω—Ç—É):

1Ô∏è‚É£ –ñ—ë—Å—Ç–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ Telegram WebApp API:

–î–æ–±–∞–≤—å –≤ –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (App.tsx): 

useEffect(() => {
  const webApp = window.Telegram?.WebApp;

  if (webApp) {
    webApp.ready();
    console.log('Telegram WebApp –≥–æ—Ç–æ–≤.');
    console.log('InitData:', webApp.initData);
    console.log('InitDataUnsafe:', webApp.initDataUnsafe);
    console.log('User:', webApp.initDataUnsafe?.user);

    if (!webApp.initData || !webApp.initDataUnsafe?.user) {
      console.error('–û—à–∏–±–∫–∞: Telegram WebApp –Ω–µ –ø–µ—Ä–µ–¥–∞–ª –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è!');
    }
  } else {
    console.error('–û—à–∏–±–∫–∞: Telegram WebApp –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω!');
  }
}, []); 

üìå –¶–µ–ª—å:
–£–±–µ–¥–∏—Ç—å—Å—è –Ω–∞ 100%, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç. –ï—Å–ª–∏ –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç ‚Äî –≤ –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç —á—ë—Ç–∫–∞—è –æ—à–∏–±–∫–∞.
 

2Ô∏è‚É£ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏:

–ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç FallbackReferralLink, —á—Ç–æ–±—ã —Å—Å—ã–ª–∫–∞ –≤—Å–µ–≥–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∞—Å—å, –¥–∞–∂–µ –µ—Å–ª–∏ Telegram API –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–ª –¥–∞–Ω–Ω—ã–µ: 

import SimpleReferralLink from '@/components/friends/SimpleReferralLink';
import { useQuery } from '@tanstack/react-query';
import userService from '@/services/userService';

const FallbackReferralLink = () => {
  const { data: currentUser, isLoading } = useQuery({
    queryKey: ['/api/me'],
    queryFn: () => userService.getCurrentUser(),
    staleTime: 1000 * 60,
  });

  if (isLoading) return <div>–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏...</div>;

  const refLink = currentUser?.ref_code
    ? https://t.me/UniFarming_Bot/UniFarm?startapp=ref_${currentUser.ref_code}
    : null;

  if (!refLink) {
    return <div>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.</div>;
  }

  return <SimpleReferralLink refLink={refLink} />;
};

export default FallbackReferralLink; 

–ó–∞—Ç–µ–º –≤ —Ä–∞–∑–¥–µ–ª–µ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã (ReferralPage.tsx) –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏ –æ–±–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: 

<div>
  <ReferralLinkCard /> 
  <FallbackReferralLink /> {/* –í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º */}
</div> 

üìå –¶–µ–ª—å:
–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–ª—è—Ç—å—Å—è –≤—Å–µ–≥–¥–∞, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è Telegram API. 

3Ô∏è‚É£ –û—á–∏—Å—Ç–∫–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ UX-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
 ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ–±—ã —Ç–µ–∫—É—â–∏–π –±–ª–æ–∫ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –æ—Ç–ª–∞–¥–∫–∏ –±—ã–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—ë–Ω (—Ç–æ—Ç, —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª —Å–±–æ–∏ –≤ UX).
 ‚Ä¢ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏ UI –¥–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ–≥–¥–∞ UX –Ω–µ –ª–æ–º–∞–ª—Å—è.
 ‚Ä¢ –£–±–µ–¥–∏—Å—å, —á—Ç–æ –Ω–∏–∫–∞–∫–æ–π –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ UI –∏ UX (–≤–∏–∑—É–∞–ª—å–Ω—ã–µ –º–µ—Ç–∫–∏, –±–∞–Ω–Ω–µ—Ä—ã) –Ω–µ –æ—Å—Ç–∞–ª—Å—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.