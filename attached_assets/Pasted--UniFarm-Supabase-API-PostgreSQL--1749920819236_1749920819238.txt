üü® –ó–ê–î–ê–ß–ê: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ UniFarm –∫ Supabase —á–µ—Ä–µ–∑ API (–±–µ–∑ –ø—Ä—è–º–æ–≥–æ PostgreSQL)

üéØ –¶–µ–ª—å:
–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–π—Ç–∏ —Å PostgreSQL (drizzle, Pool, core/db.ts) –Ω–∞ API-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ @supabase/supabase-js. –í—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ supabaseClient, –∏—Å–ø–æ–ª—å–∑—É—è project URL –∏ anon public key.

‚∏ª

üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Supabase SDK:

npm install @supabase/supabase-js

 2. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª core/supabaseClient.ts:

import { createClient } from '@supabase/supabase-js'

const supabaseUrl = 'https://wunnsvicbebssrjqedor.supabase.co'
const supabaseKey = process.env.SUPABASE_KEY

export const supabase = createClient(supabaseUrl, supabaseKey)

 3. –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á –≤ Replit Secrets –∏–ª–∏ .env:

SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1bm5zdmljYmVic3NyanFlZG9yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5MDMwNzcsImV4cCI6MjA2NTQ3OTA3N30.4ShnO3KXxi66rEMPkmAafAfN-IFImDd1YwMnrRDPD1c

 4. –ó–∞–º–µ–Ω–∏—Ç—å core/db.ts –Ω–∞ supabaseClient:

 ‚Ä¢ –í–µ–∑–¥–µ, –≥–¥–µ —Ä–∞–Ω—å—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å SQL-–∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ drizzle, pg, Pool, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API Supabase.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Å–µ—Ä–≤–∏—Å–µ:

import { supabase } from '../core/supabaseClient'

export async function fetchUsers() {
  const { data, error } = await supabase.from('users').select('*')
  if (error) throw error
  return data
}


‚∏ª

üßπ –£–¥–∞–ª–∏—Ç—å –∏ –æ—á–∏—Å—Ç–∏—Ç—å:
 ‚Ä¢ –§–∞–π–ª—ã:
 ‚Ä¢ core/db.ts
 ‚Ä¢ drizzle.config.ts
 ‚Ä¢ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã pg, drizzle, Pool
 ‚Ä¢ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env:
 ‚Ä¢ DATABASE_URL
 ‚Ä¢ PGUSER, PGPASSWORD, PGHOST, PGDATABASE

‚∏ª

‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
 ‚Ä¢ –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ supabaseClient
 ‚Ä¢ –ü—Ä–æ–µ–∫—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Replit
 ‚Ä¢ –ù–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è DATABASE_URL –∏–ª–∏ PostgreSQL SDK
 ‚Ä¢ –§–∞–π–ª .env —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ SUPABASE_KEY –∏ –¥—Ä—É–≥–∏–µ –∫–ª—é—á–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, BOT_TOKEN)

‚∏ª

üö´ –ó–∞–ø—Ä–µ—â–µ–Ω–æ:
 ‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å drizzle, pg, Pool, core/db.ts
 ‚Ä¢ –û—Å—Ç–∞–≤–ª—è—Ç—å –≤ –∫–æ–¥–µ —Å—Ç–∞—Ä—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
 ‚Ä¢ –ü–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫ Supabase —á–µ—Ä–µ–∑ DATABASE_URL

‚∏ª

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–≥—É —Å—Ä–∞–∑—É –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —à–∞–±–ª–æ–Ω—ã userService.ts, authService.ts, walletService.ts –∏ —Ç.–¥. –ø–æ–¥ –Ω–æ–≤—ã–π API.