Исправление ошибки Invalid JSON в модуле депозита фарминга UniFarm Connect

⸻

Цель задания:

Обеспечить корректную работу операции депозита в системе фарминга без ошибок формата данных.
Исключить появление ошибки вида:

Invalid JSON in response: The string did not match the expected pattern.

Сохранить существующую архитектуру проекта, без глобальных переделок.

⸻

Описание текущей проблемы:
 • При попытке внести депозит в системе фарминга возникает ошибка парсинга ответа сервера.
 • Клиентское приложение ожидает корректный JSON-ответ от сервера,
 • Но сервер возвращает либо текстовую строку, либо некорректный формат данных.
 • В результате запрос на депозит падает, и фарминг перестает работать.

⸻

Задачи:
 1. На серверной стороне проверить роут, обрабатывающий запросы депозита (/api/farming/deposit).
 2. Гарантировать, что:
 • В случае успешного выполнения депозита сервер всегда возвращает стандартный JSON-объект с информацией об успешной операции.
 • В случае любой ошибки (например, недостаточно средств, неправильная сумма) сервер также возвращает JSON-объект с описанием ошибки.
 3. Структура ответов должна быть:
 • Только в формате JSON (никаких текстовых или HTML-ответов).
 • Стандартизированной: один стиль ответа для успешных операций, один стиль для ошибок.
 4. Все возможные ошибки в процессе обработки депозита должны быть корректно перехвачены (оборачивание логики в обработчики ошибок или try-catch).
 5. Исключить использование методов отправки “сырого текста” или нестандартизированных ответов в этом маршруте.
 6. Проверить клиентскую часть:
 • После внесения депозита фарминг должен корректно обновляться без крашей.
 • Отображение доходности, баланса и фарминг-параметров должно работать корректно.

⸻

Ограничения:
 • Запрещено вносить изменения в общую архитектуру проекта (например, пересобирать все API роуты или менять базовую логику фарминга).
 • Разрешается только локальная правка роута депозита и связанных точек обработки ошибок, необходимых для устранения этой конкретной проблемы.
 • Остальные части проекта (реферальная система, баланс, Boost-пакеты) должны остаться без изменений.

⸻