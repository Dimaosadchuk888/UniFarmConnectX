–ù–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä) —è –æ–±–Ω–∞—Ä—É–∂–∏–ª **–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –∏ –∞–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤**, –∫—Ä–æ–º–µ —É–∂–µ —Ä–µ—à—ë–Ω–Ω–æ–π –æ—à–∏–±–∫–∏ —Å `amount`. –í–æ—Ç —Ç–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫:

---

## ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ (—É–∂–µ –Ω–∞–π–¥–µ–Ω–∞):
**üö´ –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è `amount` –≤ –∑–∞–ø—Ä–æ—Å –Ω–∞ `/api/uni-farming/deposit`**

---

## ‚ö†Ô∏è –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. `fetch(...)` –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç–≤–µ—Ç–∞
**–§–∞–π–ª:** `DailyBonusCard.tsx`, `FarmingHistory.tsx`

```ts
const response = await fetch(url);
const data = await response.json(); // ‚Üê –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ .ok
```

‚ùó –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—ë—Ç –æ—à–∏–±–∫—É (404/500), `response.json()` –≤—ã–∑–æ–≤–µ—Ç DOMException.

‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

```ts
if (!response.ok) throw new Error('Server error');
const data = await response.json();
```

---

### 2. `JSON.stringify(...)` —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –ø—É—Å—Ç—ã–º–∏ –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

**–§–∞–π–ª:** `DailyBonusCard.tsx` –∏ `BoostPackagesCard.tsx`

```ts
body: JSON.stringify({ user_id: userId || 1 }) // –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –ø–æ —Ç–∏–ø—É
```

‚ùó –ó–Ω–∞—á–µ–Ω–∏–µ `userId` –º–æ–∂–µ—Ç –±—ã—Ç—å `undefined`, –∞ `|| 1` ‚Äî –Ω–µ—è–≤–Ω–∞—è –ø–æ–¥–º–µ–Ω–∞.

‚úÖ –õ—É—á—à–µ —è–≤–Ω–æ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å `userId` –ø–µ—Ä–µ–¥ —ç—Ç–∏–º.

---

### 3. –ù–µ—Ç `try/catch` –≤–æ–∫—Ä—É–≥ `await` –≤—ã–∑–æ–≤–æ–≤ (–≤ —Ç.—á. —Å `sessionRestoreService`)
**–§–∞–π–ª:** `App.tsx`

‚ùó –≠—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø–∞–¥–µ–Ω–∏–µ –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –µ—Å–ª–∏ Telegram WebApp –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è.

‚úÖ –î–æ–±–∞–≤–∏—Ç—å:

```ts
try {
  const telegramReady = await sessionRestoreService.waitForTelegramWebApp();
} catch (err) {
  console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Telegram:", err);
}
```

---

## üü¢ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- –ú–µ—Ö–∞–Ω–∏–∑–º –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–æ–Ω–µ—Ç –ø–æ—Å–ª–µ —Ñ–∏–∫—Å–∞ `amount` ‚Äî —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π.
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ `ValidationError` ‚Äî —Ö–æ—Ä–æ—à–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `BigNumber`, –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞, rate –∏ –¥–∞—Ç—ã –¥–µ–ø–æ–∑–∏—Ç–∞ ‚Äî –≥—Ä–∞–º–æ—Ç–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ.

---

## üéØ –û–±—â–∏–π –∏—Ç–æ–≥

| –¢–∏–ø | –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å | –§–∞–π–ª |
|-----|---------------|------|
| ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è | `amount` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ POST `/deposit` | `UniFarmingCard.tsx` |
| ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è | `fetch(...).json()` –±–µ–∑ `.ok` | `DailyBonusCard.tsx`, `FarmingHistory.tsx` |
| ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è | `JSON.stringify(...)` –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö | `BoostPackagesCard.tsx`, `DailyBonusCard.tsx` |
| ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è | `await` –±–µ–∑ `try/catch` | `App.tsx` |

---

–•–æ—á–µ—à—å, —è —Å–æ–±–µ—Ä—É **–æ–¥–∏–Ω .txt-—Ñ–∞–π–ª —Å —ç—Ç–∏–º –ø–æ–ª–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –±–∞–≥–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –ø–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏**, —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É?