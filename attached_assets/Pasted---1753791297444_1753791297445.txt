–í–æ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π **–ø—Ä–æ–º—Ç** –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∞–≥–µ–Ω—Ç–∞, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å **–≤—Å—é —Ü–µ–ø–æ—á–∫—É –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤** –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, **—á—Ç–æ –∏–º–µ–Ω–Ω–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏**, –µ—Å–ª–∏ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ: *¬´–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É¬ª*, –ø—Ä–∏ —Ç–æ–º —á—Ç–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

### üîé **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤**

#### üß© –ü—Ä–æ–±–ª–µ–º–∞:

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å **–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (frontend/–¥–∏–∑–∞–π–Ω), –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ:

> **¬´–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É¬ª**
> –ø—Ä–∏ —Ç–æ–º, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è **–∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ**.

**–ó–∞—è–≤–∫–∞ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è**, –∏ –¥–∞–ª—å–Ω–µ–π—à–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã.

---

### üéØ –¶–µ–ª—å:

1. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å**, –ø–æ—á–µ–º—É –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞;
2. **–í—ã—è–≤–∏—Ç—å**, –Ω–∞ –∫–∞–∫–æ–º —ç—Ç–∞–ø–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥–∞—á–∞ –∑–∞—è–≤–∫–∏;
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å**, –¥–æ—Ö–æ–¥–∏—Ç –ª–∏ –∑–∞—è–≤–∫–∞ –¥–æ backend ‚Üí –ë–î ‚Üí –∞–¥–º–∏–Ω-–±–æ—Ç–∞;
4. **–ù–µ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥**, —Ç–æ–ª—å–∫–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

### ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

#### üîÅ 1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å frontend (–¥–∏–∑–∞–π–Ω)**:

* –û—Ç—Å–ª–µ–¥–∏—Ç—å **—Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –≤—ã–≤–æ–¥"**;
* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:

  * –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ HTTP-–∑–∞–ø—Ä–æ—Å (fetch/axios/etc);
  * –Ω–∞ –∫–∞–∫–æ–π endpoint (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/api/wallet/withdraw`);
  * –µ—Å—Ç—å –ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ `navigator.onLine` –∏–ª–∏ `WebApp.initData` –∏ –¥—Ä.;
  * –µ—Å—Ç—å –ª–∏ –ª–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ `isConnected`, `isTelegramReady`, `networkStatus` –∏ —Ç.–ø.;
  * –æ—Ç–∫—É–¥–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ: *"–Ω–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É"* ‚Äî —ç—Ç–æ **—Å–∏—Å—Ç–µ–º–Ω–æ–µ**, **–±—ç–∫–µ–Ω–¥-–æ—à–∏–±–∫–∞** –∏–ª–∏ **—Ä—É—á–Ω–æ–π `alert()`**.

> üí° **–í–∞–∂–Ω–æ**: —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ Telegram WebApp initData –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ —Å–µ—Å—Å–∏—è –Ω–µ –∏—Å—Ç–µ–∫–ª–∞.

---

#### üåê 2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç–µ–≤—ã–µ –≤—ã–∑–æ–≤—ã (–≤ DevTools / –ª–æ–≥–∞—Ö frontend)**:

* –£—Ö–æ–¥–∏—Ç –ª–∏ **POST-–∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä** –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É?

  * –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –ø—Ä–æ–±–ª–µ–º–∞ –≤ **frontend-–≤–∞–ª–∏–¥–∞—Ü–∏–∏** –∏–ª–∏ –æ—Ç–∫–ª—é—á—ë–Ω Telegram-–∫–æ–Ω—Ç–µ–∫—Å—Ç;
  * –ï—Å–ª–∏ –¥–∞ ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å (200/400/403/500), payload –∏ response.

---

#### üßÆ 3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å backend API (`/api/wallet/withdraw`)**

* –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä: –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ —Ñ—É–Ω–∫—Ü–∏—è `createWithdrawal()` –∏–ª–∏ –∞–Ω–∞–ª–æ–≥?
* –í–∞–ª–∏–¥–∞—Ü–∏–∏:

  * –ü—Ä–æ–≤–µ—Ä–∫–∞ `userId`, `balance`, `connectedWallet`, `telegramInitData`, `sessionToken`;
  * –í–æ–∑–º–æ–∂–Ω–æ, –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ/–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–≥–æ `userContext`;
* –õ–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–∞: –≤—ã–≤–æ–¥–∏—Ç—Å—è –ª–∏ –æ—à–∏–±–∫–∞ `"Network error"` –∏–ª–∏ `"Unauthorized"`?

---

#### üóÑÔ∏è 4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É —Å–µ—Ä–≤–∏—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏**

* –§–∞–π–ª `modules/wallet/withdrawals.ts` (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥):

  * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `withdrawals`;
  * –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –ª–∏ –æ—à–∏–±–∫–∏ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, `throw new Error("Unable to process withdrawal")`;
  * –ï—Å—Ç—å –ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏: –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π `TON address`, `balance < amount`, –¥—É–±–ª–∏—Ä—É—é—â–∞—è –∑–∞—è–≤–∫–∞ –∏ –ø—Ä.

---

#### üßµ 5. **–ü—Ä–æ—Å–ª–µ–¥–∏—Ç—å –ø—É—Ç—å –∑–∞—è–≤–∫–∏ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö**

* –¢–∞–±–ª–∏—Ü–∞ `withdrawals`:

  * –°–æ–∑–¥–∞—ë—Ç—Å—è –ª–∏ –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ?
  * –ï—Å—Ç—å –ª–∏ `createdAt`, `status = pending` –∏–ª–∏ `failed`?
  * –ü–æ–ª—è `userId`, `walletId`, `amount`, `tx_hash`, `comment` –∏ —Ç.–ø.

---

#### ü§ñ 6. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –∑–∞—è–≤–∫–∏ –≤ –∞–¥–º–∏–Ω-–±–æ—Ç**

* –õ–æ–≥–∏–∫–∞, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—É—é –∑–∞—è–≤–∫–∞ —É—Ö–æ–¥–∏—Ç –≤ –∞–¥–º–∏–Ω-–±–æ—Ç:

  * –û—á–µ—Ä–µ–¥—å? WebSocket? Cron? `TelegramBotService.sendWithdrawalRequest(...)`?
  * –ï—Å—Ç—å –ª–∏ –∑–∞–¥–µ—Ä–∂–∫–∞/–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ?

---

### üìå –í—ã–≤–æ–¥:

> –ù—É–∂–Ω–æ **—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ—á–Ω—É—é —Ç–æ—á–∫—É —Å–±–æ—è**: –≥–¥–µ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–±—Ä—ã–≤ ‚Äî –Ω–∞ —É—Ä–æ–≤–Ω–µ:

* –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å),
* frontend-–ø—Ä–æ–≤–µ—Ä–∫–∏ (`!isOnline`),
* backend-–≤–∞–ª–∏–¥–∞—Ü–∏–∏,
* –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞—è–≤–∫–∞),
* –∏–ª–∏ Telegram-–±–æ—Ç–∞ (–Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞—è–≤–∫–∞).

---

üìç **–í–∞–∂–Ω–æ:**
–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å **—Ç–æ–ª—å–∫–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π**, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ, –ë–î –∏–ª–∏ API.
–ï—Å–ª–∏ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π –ª–æ–≥/console.log, —á—Ç–æ–±—ã –æ—Ç—Å–ª–µ–¥–∏—Ç—å –º–æ–º–µ–Ω—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.

---

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –º–æ–≥—É –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, –µ—Å–ª–∏ –¥–∞—à—å —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª —Å –∫–Ω–æ–ø–∫–æ–π –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ–º API-–º–µ—Ç–æ–¥–∞, –∏–ª–∏ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –¥–ª—è –∫–æ–º–∞–Ω–¥—ã.
