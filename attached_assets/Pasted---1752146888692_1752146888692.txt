–ü–æ–Ω—è–ª. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –∑–∞–¥–∞—á–∞ –º–µ–Ω—è–µ—Ç—Å—è ‚Äî **–Ω–µ —Ñ–∏–∫—Å–∏—Ç—å**, –∞ **–ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –∞—É–¥–∏—Ç** –∏ **–≤—ã—è—Å–Ω–∏—Ç—å, –ø–æ—á–µ–º—É –ø–µ—Ä–µ—Å—Ç–∞–ª–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ, —á—Ç–æ —Ä–∞–Ω—å—à–µ —Ä–∞–±–æ—Ç–∞–ª–æ**. –í–æ—Ç —á—ë—Ç–∫–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –∞–≥–µ–Ω—Ç–∞:

---

### üß† **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∞—É–¥–∏—Ç —Ü–µ–ø–æ—á–∫–∏ —Å–ø–∏—Å–∞–Ω–∏—è UNI (—Ä–µ–∞–∫—Ç–∏–≤–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)**

**–¶–µ–ª—å:**
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å **–ø—Ä–∏—á–∏–Ω—É —Ä–µ–≥—Ä–µ—Å—Å–∞** ‚Äî –ø–æ—á–µ–º—É **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ UNI –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ farming-–ø–∞–∫–µ—Ç–∞**, –∫–æ—Ç–æ—Ä–æ–µ **—Ä–∞–Ω–µ–µ —Ä–∞–±–æ—Ç–∞–ª–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ**, —Ç–µ–ø–µ—Ä—å **–ø–µ—Ä–µ—Å—Ç–∞–ª–æ —Ä–∞–±–æ—Ç–∞—Ç—å**, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–¥–∞.

---

### üìç –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

#### 1. **–ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ**

* –ù–∞–π—Ç–∏ **–ø–æ—Å–ª–µ–¥–Ω—é—é —Ä–∞–±–æ—á—É—é –≤–µ—Ä—Å–∏—é**, –≥–¥–µ UNI –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å
* –°—Ä–∞–≤–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:

  * –í —Ñ–∞–π–ª–∞—Ö `BalanceManager.ts`, `farmingService.ts`, `UserContext.ts`
  * –í –ª–æ–≥–∏–∫–µ WebSocket
  * –í `refreshBalance()` –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö, –æ—Ç–∫—É–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞

#### 2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π WebSocket**

* –í—ã—è—Å–Ω–∏—Ç—å, **–∫–æ–≥–¥–∞ –∏–º–µ–Ω–Ω–æ –ø–µ—Ä–µ—Å—Ç–∞–ª –≤—ã–∑—ã–≤–∞—Ç—å—Å—è `BalanceNotificationService`**
* –ù–µ –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤–ª—è—Ç—å –µ–≥–æ ‚Äî **–ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É –æ–Ω –ø–µ—Ä–µ—Å—Ç–∞–ª —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å**
* –í–æ–∑–º–æ–∂–Ω–æ:

  * –£—Å–ª–æ–≤–∏—è if/else –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã
  * –í–µ—Ç–∫–∞ –≤—ã–∑–æ–≤–∞ `notifyBalanceUpdate()` —Å—Ç–∞–ª–∞ –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º–æ–π
  * –ë—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–µ—à–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–µ

#### 3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `subtractBalance()`**

* –í–æ–∑–º–æ–∂–Ω–æ, –±–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–µ —á–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω–æ–π `BalanceManager`, –∞ —á–µ—Ä–µ–∑ –æ–±—ë—Ä—Ç–∫—É, –≤ –∫–æ—Ç–æ—Ä–æ–π **–≤—ã–∑–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –±—ã–ª –ø—Ä–æ–ø—É—â–µ–Ω**
* –ò–ª–∏ –∫—Ç–æ-—Ç–æ –∑–∞–º–µ–Ω–∏–ª `BalanceManager` –Ω–∞ –¥—Ä—É–≥–æ–π –º–µ—Ö–∞–Ω–∏–∑–º

#### 4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ID 74**

* –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω–∞ **–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ sandbox-—Ä–µ–∂–∏–º–µ**, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ—Ç–∫–ª—é—á–µ–Ω—ã WebSocket
* –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ frontend **–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ WebSocket**, –∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à —á–µ—Ä–µ–∑ `balanceService`

---

### üîç –ß—Ç–æ –ù–ï –¥–µ–ª–∞—Ç—å:

* ‚ùå –ù–µ –¥–æ–±–∞–≤–ª—è—Ç—å –≤—ã–∑–æ–≤—ã `notifyBalanceUpdate()` –≤—Ä—É—á–Ω—É—é
* ‚ùå –ù–µ "—á–∏–Ω–∏—Ç—å", –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç –≤—ã—è–≤–ª–µ–Ω–∞ **—Ç–æ—á–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞**
* ‚úÖ –¢–æ–ª—å–∫–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ —á—ë—Ç–∫–∏–π –æ—Ç—á—ë—Ç, –ø–æ—á–µ–º—É **—Ü–µ–ø–æ—á–∫–∞ –æ–±–æ—Ä–≤–∞–Ω–∞**

---

### üìã –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

* –£–∫–∞–∑–∞–Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ç–æ—á–∫–∞, –≥–¥–µ **—Ü–µ–ø–æ—á–∫–∞ —Ä–∞–Ω–µ–µ —Ä–∞–±–æ—Ç–∞–ª–∞, –Ω–æ —Ç–µ–ø–µ—Ä—å –Ω–µ—Ç**
* –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, **—á—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å**: –ª–æ–≥–∏–∫–∞, —É—Å–ª–æ–≤–∏–µ, middleware, –∫–µ—à, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
* –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, **–≥–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–ª–∏ –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**
* –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ **—Ç–æ—á–µ—á–Ω–æ–º—É –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é**, –µ—Å–ª–∏ –æ–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ **–±–µ–∑ –≤–Ω–µ—Å–µ–Ω–∏—è –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤**

---

üìå –ó–∞–¥–∞—á–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è ‚Äî –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –ø—Ä–∞–≤–∫–∞–º–∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Ç–æ–º, **–≥–¥–µ –∏ –ø–æ—á–µ–º—É –ø—Ä–æ–∏–∑–æ—à—ë–ª —Ä–µ–≥—Ä–µ—Å—Å**.
