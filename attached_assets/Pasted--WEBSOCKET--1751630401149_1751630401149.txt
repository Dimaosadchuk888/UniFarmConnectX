‚úÖ –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –ó–ê–î–ê–ù–ò–ï –î–õ–Ø –ê–ì–ï–ù–¢–ê: –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –°–ò–°–¢–ï–ú–´ WEBSOCKET

üìå –¶–µ–ª—å:

–ò–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –ø–æ–∫–∞–∑–∞ –æ—à–∏–±–∫–∏ ‚Äú–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º‚Äù –ø—Ä–∏ –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–∞–∑—Ä—ã–≤–∞—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å WebSocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è –∏–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

‚∏ª

üîí –ñ–Å–°–¢–ö–ò–ï –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø:
 ‚Ä¢ ‚ùó –ó–∞–ø—Ä–µ—â–µ–Ω–æ –æ—Ç–∫–ª—é—á–∞—Ç—å WebSocket –∏–ª–∏ –∑–∞–º–µ–Ω—è—Ç—å –Ω–∞ –º–æ–∫ (–∑–∞–≥–ª—É—à–∫–∏).
 ‚Ä¢ ‚ùó –ó–∞–ø—Ä–µ—â–µ–Ω–æ —Ç—Ä–æ–≥–∞—Ç—å –∏–ª–∏ –∏–∑–º–µ–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É TonConnect.
 ‚Ä¢ ‚ùó –ó–∞–ø—Ä–µ—â–µ–Ω–æ —É–¥–∞–ª—è—Ç—å –ª—é–±–æ–π —Ñ–∞–π–ª, –æ—Å–æ–±–µ–Ω–Ω–æ webSocketContext.tsx.
 ‚Ä¢ ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã –ø–µ—Ä–µ–¥ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ–º.

‚∏ª

üìç –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
 ‚Ä¢ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ –∏ —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ.
 ‚Ä¢ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥, –Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç ‚Äú–∫—Ä–∞—Å–Ω—É—é –æ—à–∏–±–∫—É‚Äù –≤—Å–µ —ç—Ç–∏ 5 —Å–µ–∫—É–Ω–¥, —á—Ç–æ —Å–æ–∑–¥–∞—ë—Ç –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ —Å–±–æ—è —Å–∏—Å—Ç–µ–º—ã.
 ‚Ä¢ –ü—Ä–æ–±–ª–µ–º–∞ –≤ UI-–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏, –∞ –Ω–µ –≤ –ª–æ–≥–∏–∫–µ WebSocket.

‚∏ª

‚úÖ –ß—Ç–æ –∞–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —Å–¥–µ–ª–∞—Ç—å:

üîß 1. UI Delay (–ó–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–∫–∏)
 ‚Ä¢ –î–æ–±–∞–≤–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É –≤ 2 —Å–µ–∫—É–Ω–¥—ã –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ "–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º".
 ‚Ä¢ –§–∞–π–ª: client/src/components/common/NetworkStatusIndicator.tsx
 ‚Ä¢ –¶–µ–ª—å: –ø–æ–¥–∞–≤–∏—Ç—å –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–∑—Ä—ã–≤—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –Ω–µ —Ä–∞–∑–¥—Ä–∞–∂–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

üîÑ 2. State-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
 ‚Ä¢ –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ "connecting" –∏–ª–∏ "reconnecting" ‚Äî —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ –≤—ã–≤–æ–¥–∞.
 ‚Ä¢ –§–∞–π–ª: —Ç–æ—Ç –∂–µ NetworkStatusIndicator.tsx –∏–ª–∏ —Ö—É–∫, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
 ‚Ä¢ –≠—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç —Å–ª—É—á–∞–π, –∫–æ–≥–¥–∞ –æ—à–∏–±–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø—Ä–∏ —É–∂–µ –∏–¥—É—â–µ–º –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏.

‚ù§Ô∏è‚Äçüî• 3. Heartbeat (–ø—É–ª—å—Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)
 ‚Ä¢ –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º ping/pong —Ä–∞–∑ –≤ 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–∞–∑—Ä—ã–≤–æ–≤.
 ‚Ä¢ –§–∞–π–ª: client/src/contexts/webSocketContext.tsx
 ‚Ä¢ –ü—Ä–∏–º–µ—Ä:

setInterval(() => {
  if (ws?.readyState === WebSocket.OPEN) {
    ws.send(JSON.stringify({ type: 'ping' }));
  }
}, 30000);



‚ôªÔ∏è 4. –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ WebSocket
 ‚Ä¢ –¢–æ–ª—å–∫–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å: –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ª–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ webSocketContext –∏ useWebSocket.ts.
 ‚Ä¢ –ï—Å–ª–∏ –æ–±–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –Ω–µ –º–µ–Ω—è—Ç—å, –ø—Ä–æ—Å—Ç–æ –¥–æ–ª–æ–∂–∏—Ç—å: –≤ –∫–∞–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω –∫–∞–∂–¥—ã–π –∏ –µ—Å—Ç—å –ª–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è.

‚∏ª

üì§ –û–¢–ß–Å–¢, –ö–û–¢–û–†–´–ô –î–û–õ–ñ–ï–ù –ë–´–¢–¨ –ü–†–ï–î–û–°–¢–ê–í–õ–ï–ù:
 1. –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ?
 ‚Ä¢ –ö–∞–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–∞–∫–∏—Ö —Ñ–∞–π–ª–∞—Ö –±—ã–ª–∏ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è).
 2. –ö–∞–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞?
 ‚Ä¢ –í —Å–µ–∫—É–Ω–¥–∞—Ö
 3. Heartbeat —Ä–∞–±–æ—Ç–∞–µ—Ç?
 ‚Ä¢ –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ª–∏ –ø–∏–Ω–≥–∏, –ø–æ–ª—É—á–∞—é—Ç—Å—è –ª–∏ –ø–æ–Ω–≥–∏
 4. –ï—Å—Ç—å –ª–∏ –¥—É–±–ª–∏—Ä—É—é—â–µ–µ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ?
 ‚Ä¢ –ì–¥–µ –∏ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è useWebSocket –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç webSocketContext
 5. –ß—Ç–æ –µ—â—ë —Å—Ç–æ–∏—Ç –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å?
 ‚Ä¢ –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è

‚∏ª

‚úÖ –ü—Ä–∏–º–µ—Ä: –∫–∞–∫ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

–°—Ü–µ–Ω–∞—Ä–∏–π –†–µ–∑—É–ª—å—Ç–∞—Ç
–†–∞–∑—Ä—ã–≤ < 2 —Å–µ–∫ –û—à–∏–±–∫–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
–†–∞–∑—Ä—ã–≤ > 2 —Å–µ–∫ –û—à–∏–±–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ
–ù–∞—á–∞–ª–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –û—à–∏–±–∫–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è
–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω–æ