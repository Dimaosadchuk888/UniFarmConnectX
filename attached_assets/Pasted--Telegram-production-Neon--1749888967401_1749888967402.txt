‚∏ª

üõ†Ô∏è –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –ó–ê–î–ê–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram –≤ production-–±–∞–∑–µ Neon

üìå –ö–æ–Ω—Ç–µ–∫—Å—Ç:

–¢—ã —É—Ç–≤–µ—Ä–∂–¥–∞–ª, —á—Ç–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Telegram-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å telegram_id = 999888777 –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ (user_id: 1, username: test_user_ru, ref_code: VJ9AUP48), –∏ —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –±–∞–∑–µ ep-lucky-boat-a463bggt.

üîç –û–¥–Ω–∞–∫–æ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ production –±–∞–∑—ã —á–µ—Ä–µ–∑ Neon Console:
 ‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º telegram_id –Ω–µ –Ω–∞–π–¥–µ–Ω
 ‚Ä¢ ID 1, 2, 3 –∏ —Ç.–¥. —É–∂–µ –∑–∞–Ω—è—Ç—ã –¥—Ä—É–≥–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
 ‚Ä¢ –í–æ–∑–Ω–∏–∫–∞–µ—Ç –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–µ, —á—Ç–æ —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å –ª–∏–±–æ:
 ‚Ä¢ —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–π (dev, –ª–æ–∫–∞–ª—å–Ω–æ–π) –±–∞–∑–æ–π;
 ‚Ä¢ –ª–∏–±–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—à—å –¥–∞–Ω–Ω—ã–µ –≤–æ–æ–±—â–µ, –∞ —Ç–æ–ª—å–∫–æ –∏–º–∏—Ç–∏—Ä—É–µ—à—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é.

‚∏ª

üîí –¢—Ä–µ–±—É–µ—Ç—Å—è:
 1. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, —Å –∫–æ—Ç–æ—Ä–æ–π —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å:
 ‚Ä¢ –í—ã–≤–µ–¥–∏ console.log(process.env.DATABASE_URL) –ø—Ä—è–º–æ –≤–æ –≤—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
 ‚Ä¢ –£–±–µ–¥–∏—Å—å, —á—Ç–æ —ç—Ç–æ —Å—Ç—Ä–æ–≥–æ:

postgresql://neondb_owner:npg_SpgdNBV70WKl@ep-lucky-boat-a463bggt-pooler.us-east-1.aws.neon.tech/neondb?sslmode=require


 2. –ü—Ä–æ–≤–µ–¥–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
 ‚Ä¢ telegram_id: 777000999
 ‚Ä¢ username: prod_test_check
 ‚Ä¢ registration method: /api/v2/register/telegram
 ‚Ä¢ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏ –ø–æ—è–≤–ª–µ–Ω–∏–µ —ç—Ç–æ–π –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ users –≤ –±–∞–∑–µ ep-lucky-boat-a463bggt.
 3. –ü—Ä–æ–≤–µ—Ä—å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
 ‚Ä¢ –ï—Å–ª–∏ —Ç—ã –ø–æ–ª—É—á–∞–µ—à—å ID 1, 2 –∏–ª–∏ 3, ‚Äî —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —Ç—ã –ù–ï —Ä–∞–±–æ—Ç–∞–µ—à—å —Å production –±–∞–∑–æ–π.
 ‚Ä¢ Production –±–∞–∑–∞ —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –±–æ–ª–µ–µ 15 –∑–∞–ø–∏—Å–µ–π. –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å ID ‚â• 18.
 4. –í—ã–≤–µ–¥–∏ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –≤ —Ç–∞–±–ª–∏—Ü–µ users:

SELECT COUNT(*) FROM users;


 5. –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Äî —É–¥–∞–ª–∏ —Å–≤–æ–∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ (777000999, prod_test_check –∏ —Ç.–¥.).

‚∏ª

üìé –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:

–£–±–µ–¥–∏—Å—å, —á—Ç–æ:
 ‚Ä¢ UserService, AuthService, register/telegram, auth/telegram –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ core/db.ts.
 ‚Ä¢ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–¥—ë—Ç —á–µ—Ä–µ–∑ process.env.DATABASE_URL, –±–µ–∑ –¥—É–±–ª–µ–π.
 ‚Ä¢ –í—Å–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (server/db.ts, db-connect-unified.ts, *.old.ts) ‚Äî —É–¥–∞–ª–µ–Ω—ã –∏–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã.
 ‚Ä¢ –õ–æ–∫–∞–ª—å–Ω—ã–µ .env.local, .env.old, .env.development ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, —á—Ç–æ–±—ã –Ω–µ –ø–æ–¥–º–µ–Ω—è—Ç—å URL.

‚∏ª

üö´ –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø:
 ‚Ä¢ ‚ùå –ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–µ
 ‚Ä¢ ‚ùå –ù–µ–ª—å–∑—è –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã –∏–ª–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
 ‚Ä¢ ‚ùå –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±–∞–∑—ã –∏–ª–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
 ‚Ä¢ ‚úÖ –û–±—è–∑–∞—Ç–µ–ª–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ø–∞–¥–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ production-–±–∞–∑—É ep-lucky-boat-a463bggt

‚∏ª

‚úÖ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å prod_test_check —Å telegram_id 777000999 —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ Telegram Mini App, –µ–≥–æ –∑–∞–ø–∏—Å—å –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ users (ID ‚â• 18), —Å–æ–∑–¥–∞—ë—Ç—Å—è ref_code –∏ JWT. –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∏–¥—É—Ç —á–µ—Ä–µ–∑ production –±–∞–∑—É. –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã.

‚∏ª