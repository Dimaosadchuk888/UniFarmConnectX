üìå –ò—Ç–æ–≥: –∞–≥–µ–Ω—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–ª —Å production-–±–∞–∑–æ–π, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –µ–≥–æ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å.

‚∏ª

üîé –ß—Ç–æ –º—ã –≤–∏–¥–∏–º:
 1. –ê–≥–µ–Ω—Ç —É—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç:
‚ÄúProduction –±–∞–∑–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–µ–Ω–∞. ID —Å–±—Ä–æ—à–µ–Ω –¥–æ 1. –ü–µ—Ä–≤—ã–π —é–∑–µ—Ä –ø–æ–ª—É—á–∏–ª ID: 1‚Äù
 2. –§–∞–∫—Ç—ã –∏–∑ —Ç–≤–æ–µ–π –±–∞–∑—ã (Neon ep-lucky-boat-a463bggt):
 ‚Ä¢ –ï—Å—Ç—å ID: 1 ‚Üí main_test_user
 ‚Ä¢ –ï—Å—Ç—å ID: 2, 4, 7, 10, 14, 17 ‚Äî —Ç–æ –µ—Å—Ç—å –Ω–∏–∫–∞–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ –Ω–µ –±—ã–ª–æ
 ‚Ä¢ –ü–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ users_id_seq.last_value ‚â† 1

‚∏ª

‚ö†Ô∏è –í—ã–≤–æ–¥:

–ê–≥–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–ª —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –∏–ª–∏ dev-–±–∞–∑–æ–π, –Ω–µ production. –í—Å–µ –µ–≥–æ —Ç–µ—Å—Ç—ã, –≤–∫–ª—é—á–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é test_user_ru ‚Äî –Ω–µ –ø–æ–ø–∞–ª–∏ –≤ production –±–∞–∑—É. –ë–∞–∑–∞ –Ω–µ —á–∏—Å—Ç–∞—è, ID-—Å—á—ë—Ç—á–∏–∫ –Ω–µ —Å–±—Ä–æ—à–µ–Ω, test_user_ru –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

‚∏ª

‚úÖ –ß—Ç–æ –¥–µ–ª–∞—Ç—å:

–í–æ—Ç –≥–æ—Ç–æ–≤—ã–π –ø—Ä–æ–º—Ç, —á—Ç–æ–±—ã –æ–Ω –≤—Å—ë —Å–¥–µ–ª–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

‚∏ª

üß® –ü–†–û–ú–¢: –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ production-–±–∞–∑—ã (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫)

–ö–æ–Ω—Ç–µ–∫—Å—Ç:
–¢—ã –æ—à–∏–±–æ—á–Ω–æ –ø—Ä–æ–≤—ë–ª –≤—Å–µ —Ç–µ—Å—Ç—ã –≤ –¥—Ä—É–≥–æ–π –±–∞–∑–µ (dev –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π), –∞ –Ω–µ –≤ production-–±–∞–∑–µ ep-lucky-boat-a463bggt. –í Neon Console –º—ã –≤–∏–¥–∏–º, —á—Ç–æ:
 ‚Ä¢ ID 1 —É–∂–µ –∑–∞–Ω—è—Ç (main_test_user)
 ‚Ä¢ –í—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –º–µ—Å—Ç–µ
 ‚Ä¢ test_user_ru –Ω–µ –ø–æ—è–≤–∏–ª—Å—è
 ‚Ä¢ –ü–æ—Å–ª–µ–¥–Ω–∏–π ID –≤ users_id_seq > 17

‚∏ª

üéØ –ó–ê–î–ê–ß–ê:

–û—á–∏—Å—Ç–∏—Ç—å –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å production-–±–∞–∑—É Neon (ep-lucky-boat-a463bggt) –¥–ª—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞.

‚∏ª

üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
 1. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
 ‚Ä¢ –£–±–µ–¥–∏—Å—å, —á—Ç–æ process.env.DATABASE_URL —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞:

postgresql://neondb_owner:npg_SpgdNBV70WKl@ep-lucky-boat-a463bggt-pooler.us-east-1.aws.neon.tech/neondb?sslmode=require


 ‚Ä¢ –í—ã–≤–µ–¥–∏ –≤ –ª–æ–≥ console.log(process.env.DATABASE_URL) ‚Äî –Ω–µ —É–¥–∞–ª—è–π, –ø–æ–∫–∞ –Ω–µ –ø–æ–∫–∞–∂–µ—à—å –µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

 2. –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ users:
 ‚Ä¢ –£–¥–∞–ª–∏ –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ users
 ‚Ä¢ –í—ã–ø–æ–ª–Ω–∏: TRUNCATE users RESTART IDENTITY CASCADE;
 ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å: SELECT COUNT(*) –∏ SELECT last_value FROM users_id_seq (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0 –∏ 1)
 3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
 ‚Ä¢ –¢–∞–±–ª–∏—Ü–∞ users —Å–æ–¥–µ—Ä–∂–∏—Ç:
 ‚Ä¢ id (serial, PK)
 ‚Ä¢ telegram_id (bigint, unique)
 ‚Ä¢ username (text)
 ‚Ä¢ ref_code (text, unique)
 ‚Ä¢ wallet, created_at –∏ —Ç.–¥.
 ‚Ä¢ –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤—Å—ë —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç
 4. –£–¥–∞–ª–µ–Ω–∏–µ –º—É—Å–æ—Ä–∞:
 ‚Ä¢ –£–¥–∞–ª–∏ –≤—Å–µ test-—Å—Ü–µ–Ω–∞—Ä–∏–∏, —Ç–µ—Å—Ç–æ–≤—ã–µ .js-—Ñ–∞–π–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, launch-test.js, final-db-check.js)
 ‚Ä¢ –£–¥–∞–ª–∏ –≤—Å–µ .env.local, .env.dev, .env.example, –µ—Å–ª–∏ –æ–Ω–∏ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç –ø—Ä–æ–¥–∞–∫—à–Ω

‚∏ª

‚úÖ –ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏:
 5. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
 ‚Ä¢ telegram_id: 777000999
 ‚Ä¢ username: production_user_1
 ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ:
 ‚Ä¢ –û–Ω –ø–æ–ª—É—á–∏–ª ID = 1
 ‚Ä¢ –ü–æ—è–≤–∏–ª—Å—è –≤ Neon Console
 ‚Ä¢ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω ref_code –∏ JWT
 6. –°–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç –∏–ª–∏ –ª–æ–≥:
 ‚Ä¢ SELECT * FROM users ORDER BY id ASC
 ‚Ä¢ SELECT last_value FROM users_id_seq;

‚∏ª

üîí –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
 ‚Ä¢ ‚ùå –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å dev/–ª–æ–∫–∞–ª—å–Ω—ã–µ –±–∞–∑—ã
 ‚Ä¢ ‚ùå –ù–µ–ª—å–∑—è —Å–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é ‚Äî –≤—Å—ë –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∏–¥–Ω–æ –≤ Neon Console
 ‚Ä¢ ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–π —Ç–æ–ª—å–∫–æ —Å ep-lucky-boat-a463bggt

‚∏ª

üí• –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
 ‚Ä¢ –í Neon Console: —Ç–æ–ª—å–∫–æ 1 –∑–∞–ø–∏—Å—å (ID = 1, telegram_id = 777000999)
 ‚Ä¢ last_value = 1
 ‚Ä¢ ref_code –∏ JWT —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã
 ‚Ä¢ –í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã

‚∏ª