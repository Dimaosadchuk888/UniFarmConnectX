Техническое задание: Аудит backend и базы данных UniFarm

Цель:
Провести полный аудит backend-приложения и взаимодействия с базой данных, не внося никаких изменений, а только выявляя ошибки, баги, сбои в логике или потери связи между интерфейсом и базой.

⸻

Общие правила:
 • Запрещено вносить любые изменения в код.
 • Запрещено исправлять ошибки во время аудита.
 • Запрещено трогать работающие функции.
 • Все найденные ошибки и аномалии должны быть только зафиксированы в виде отчёта.
 • После завершения аудита будет выдано отдельное техническое задание на исправление.

⸻

Что проверить:
 1. Связь с базой данных (PostgreSQL):
 • Проверка подключения к базе.
 • Корректность схем и таблиц.
 • Синхронность моделей в коде и структуры таблиц в БД.
 2. Функции пользователя:
 • Регистрация / проверка регистрации.
 • Привязка TON-адреса.
 • Проверка баланса и фарминга.
 • Корректность начислений (в UNI и TON).
 3. TON транзакции:
 • Подтверждение входящих транзакций.
 • Сравнение фактической суммы с ожидаемой.
 • Обработка ошибок в случае несовпадения суммы.
 • Проверка поля boost_id в транзакциях.
 4. TON Boost пакеты:
 • Запрос всех пакетов через /api/boosts/active.
 • Проверка наличия, цен, бонусов и соответствий.
 • Логика отображения активных бустов по пользователю.
 5. Реферальная система:
 • Проверка построения дерева рефералов.
 • Логика начислений в глубину (до 20 уровней).
 • Проверка срабатывания при вводе рефкодов.
 6. Задания и миссии:
 • Получение всех типов миссий.
 • Проверка выполнения и фиксации статуса.
 • Автоначисление награды в фарминг.
 7. История транзакций:
 • Корректное отображение всех транзакций пользователя.
 • Проверка фильтрации по типу (UNI / TON / бонусы).
 • Сопоставление транзакций с фактом начислений.
 8. Админ-функции:
 • Получение статистики по пользователям.
 • Отображение и логика ручного подтверждения выводов.
 • Управление курсами токенов и бустами (без изменений).

⸻

Форма отчёта:

Для каждой найденной проблемы:
 • Указать раздел / маршрут / компонент
 • Краткое описание несоответствия
 • Статус: ошибка / потенциальная проблема / улучшение
 • Пример или скриншот (если есть)