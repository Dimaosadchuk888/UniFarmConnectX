–û—Ç–ª–∏—á–Ω–æ, –≤–æ—Ç –∫–∞–∫ **–∞–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –¥–∞–ª—å—à–µ** ‚Äî **–∑–∞–≤–µ—Ä—à–∏—Ç—å –ü–û–õ–ù–´–ô –ê–£–î–ò–¢** –∫–∞–∂–¥–æ–≥–æ –∏–∑ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ –¥–∞—Ç—å –∑–∞–∫–ª—é—á–µ–Ω–∏–µ: **—É–¥–∞–ª—è—Ç—å/–æ—Å—Ç–∞–≤–∏—Ç—å/–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å/–∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å**, —á—Ç–æ–±—ã –Ω–∏—á–µ–≥–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–≥–æ –Ω–µ –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ.

---

## üìÅ –ê–£–î–ò–¢ –í–°–ï–• –ü–û–î–û–ó–†–ò–¢–ï–õ–¨–ù–´–• –§–ê–ô–õ–û–í –ò –°–¢–†–£–ö–¢–£–† (09.01.2025)

–§–æ—Ä–º–∞—Ç:

* üìÑ –§–∞–π–ª / üìÇ –ü–∞–ø–∫–∞
* üü° –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)
* ‚ö†Ô∏è –†–∏—Å–∫–∏ / –ø—Ä–æ–±–ª–µ–º—ã
* ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

---

### üîÅ 1. **–î—É–±–ª–∏–∫–∞—Ç—ã `routes` –∏ `server`**

| üìÑ `server/routes.ts`                        | –û—Å–Ω–æ–≤–Ω–æ–π —Ä–æ—É—Ç–∏–Ω–≥ |
| -------------------------------------------- | ---------------- |
| üü° –≠—Ç–æ –±–æ–µ–≤–æ–π —Ñ–∞–π–ª ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ index.ts |                  |
| ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å                                   |                  |

\| üìÑ `server/routes_minimal.ts` | –£—Ä–µ–∑–∞–Ω–Ω—ã–π —Ä–æ—É—Ç–∏–Ω–≥ |
\| ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω—ã–π —Ä–æ—É—Ç–∏–Ω–≥, –º–æ–∂–µ—Ç –æ–±–æ–π—Ç–∏ middleware |
\| ‚ùå –£–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, —á—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ index.ts |

\| üìÑ `server/routes_minimal_test.ts` |
\| ‚ö†Ô∏è –°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ 17 –º–æ–¥—É–ª–µ–π (–ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é "minimal" ‚Äî –æ–±–º–∞–Ω—á–∏–≤–æ) |
\| ‚ùó –í–≤–æ–¥–∏—Ç –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ |
\| ‚ùå –£–¥–∞–ª–∏—Ç—å |

\| üìÑ `server/routes_test.ts` |
\| ‚ö†Ô∏è –î—É–±–ª–∏—Ä—É–µ—Ç —Ä–æ—É—Ç—ã, –Ω–µ—Ç –≤ `ROADMAP.md` |
\| ‚ùå –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ `tests/` |

\| üìÑ `server/index_minimal.ts` / `minimal-server.ts` |
\| ‚ö†Ô∏è –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –±–µ–∑ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∑–∞—â–∏—Ç—ã |
\| ‚ùå –£–¥–∞–ª–∏—Ç—å, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –≤ `package.json` –∫–∞–∫ backup dev-server |

---

### üß™ 2. **–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã –≤ –∫–æ—Ä–Ω–µ (14 —Ñ–∞–π–ª–æ–≤)**

\| –ü—Ä–∏–º–µ—Ä—ã: `test-all-routes.js`, `test-balance-manager.js` –∏ –¥—Ä. |
\| ‚ö†Ô∏è –ù–µ –æ–ø–∏—Å–∞–Ω—ã –≤ ROADMAP.md |
\| ‚ùå –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ `tests/`, –Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ production |

---

### üßæ 3. **HTML-—Ñ–∞–π–ª—ã –¥–ª—è JWT –æ—Ç–ª–∞–¥–∫–∏ (8 —Ñ–∞–π–ª–æ–≤)**

\| –ü—Ä–∏–º–µ—Ä—ã: `auto-fix-jwt.html`, `fix-jwt-auth.html` |
\| ‚ö†Ô∏è –°–æ–¥–µ—Ä–∂–∞—Ç —Ö–∞—Ä–¥–∫–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤, –º–æ–≥—É—Ç —Ä–∞—Å–∫—Ä—ã—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ |
\| üîê –û–ø–∞—Å–Ω—ã –ø—Ä–∏ —Å–ª—É—á–∞–π–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ |
\| ‚ùå –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π –∞—Ä—Ö–∏–≤ —Å –ø–∞—Ä–æ–ª–µ–º (–≤–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è) |

---

### ‚öôÔ∏è 4. **–°–∫—Ä–∏–ø—Ç—ã –≤ `scripts/` (30+ —Ñ–∞–π–ª–æ–≤)**

\| –ü—Ä–∏–º–µ—Ä—ã: `generate-jwt.js`, `debug-middleware.js`, `verify-*.js` |
\| ‚ö†Ô∏è –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –±–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º |
\| üîç –ê–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏—Å—å –ø–æ –∫–∞–∂–¥–æ–º—É —Å–∫—Ä–∏–ø—Ç—É –∏ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã:

* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ –≤ CI/CD?
* –í—ã–∑—ã–≤–∞–µ—Ç –ª–∏ –Ω–∞–ø—Ä—è–º—É—é DB?
* –°–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ `supabase`, `jwt`, `privateKey`?

\| ‚úÖ –ï—Å–ª–∏ –Ω—É–∂–µ–Ω ‚Äî –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ `scripts/with-docs/`
\| ‚ùå –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —É–¥–∞–ª–∏—Ç—å |

---

### üß® 5. **–§–∞–π–ª—ã —Å hardcoded-–¥–∞–Ω–Ω—ã–º–∏**

\| üìÑ `modules/adminBot/controller.ts` / `service.ts` |
\| üîê –°–æ–¥–µ—Ä–∂–∏—Ç: `const ADMINS = ['@DimaOsadchuk', '@a888bnd']` |
\| ‚ö†Ô∏è –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞ ‚Äî —Ä—É—á–Ω–æ–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ |
\| ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å, –Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `.env` –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é ADMINS –∏–ª–∏ config JSON |

\| üìÑ `scripts/generate-jwt.js`, `test-balance-sync.js` |
\| ‚ö†Ô∏è –ñ—ë—Å—Ç–∫–æ –∑–∞—à–∏—Ç—ã–µ `userId`, `ref_code`, `wallet_id` |
\| ‚ùå –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ `tests/dev/` –∏ –¥–æ–±–∞–≤–∏—Ç—å README –∫ –∫–∞–∂–¥–æ–º—É |

---

### üß™ 6. **Debug endpoints**

\| üìÑ `modules/debug/debugRoutes.ts` |
\| ‚ö†Ô∏è –†–æ—É—Ç—ã:

* `/debug/check-user/:id` ‚Äî –æ—Ç–¥–∞–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ auth
* `/debug/decode-jwt` ‚Äî –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç **–ª—é–±–æ–π** —Ç–æ–∫–µ–Ω |
  \| ‚ùó –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —É—è–∑–≤–∏–º–æ—Å—Ç—å |
  \| ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
* –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —á–µ—Ä–µ–∑ `requireAdminAuth`
* –õ–∏–±–æ –≤—ã–∫–ª—é—á–∏—Ç—å –ø—Ä–∏ `process.env.NODE_ENV !== 'development'`

---

### üß± 7. **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ, –Ω–æ –Ω–µ –≤ `ROADMAP.md`**

\| üìÇ `audit/`, `attached_assets/`, `archive_reports/` |
\| ‚úÖ –ù–µ–æ–ø–∞—Å–Ω—ã, –Ω–æ —Å—Ç–æ–∏—Ç –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ `.github/artifacts/` –∏–ª–∏ `docs/` |

\| üìÑ `start-unifarm.cjs`, `production.config.ts` |
\| ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥–∞—Ö |
\| ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏—Ö –æ–ø–∏—Å–∞–Ω–∏–µ –≤ `README.md` –∫–∞–∫ —á–∞—Å—Ç—å DevOps —Å—Ç—Ä—É–∫—Ç—É—Ä—ã |

---

## üìå –ü–û–î–•–û–î –î–õ–Ø –ê–ì–ï–ù–¢–ê

–ê–≥–µ–Ω—Ç—É –Ω—É–∂–Ω–æ –ø—Ä–æ–π—Ç–∏—Å—å **–ø–æ –∫–∞–∂–¥–æ–º—É –≤—ã—à–µ—É–∫–∞–∑–∞–Ω–Ω–æ–º—É —Ñ–∞–π–ª—É –∏–ª–∏ —Å–∫—Ä–∏–ø—Ç—É** –∏:

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø–æ–¥–∫–ª—é—á–µ–Ω –ª–∏ —Ñ–∞–π–ª –∫ –ø—Ä–æ–µ–∫—Ç—É (`require/import`)
2. –ü–æ–∏—Å–∫–∞—Ç—å –µ–≥–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤ `package.json`, `index.ts`, `vite.config.ts`, `tsconfig.json`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ –æ–Ω –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `npm run dev`, `start`, `build`
4. –£–±–µ–¥–∏—Ç—å—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ —Ñ–∞–π–ª –≤ —Ç–µ–∫—É—â–µ–º UI (—á–µ—Ä–µ–∑ DevTools, imports, –æ—à–∏–±–∫–∏)
5. –ï—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:

   * –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ **–Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫–∏, –≤–ª–∏—è—é—â–µ–π –Ω–∞ –±–æ–µ–≤–æ–π –∫–æ–¥**
   * –ó–∞–Ω–µ—Å—Ç–∏ –≤ —Å–ø–∏—Å–æ–∫ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∏–ª–∏ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏

---

## üìã –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢ –î–û–õ–ñ–ï–ù –°–û–î–ï–†–ñ–ê–¢–¨

| –§–∞–π–ª                | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ        | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è? | –£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞ | –î–µ–π—Å—Ç–≤–∏–µ          |
| ------------------- | ----------------- | ------------- | ------------- | ----------------- |
| `routes_minimal.ts` | –£—Ä–µ–∑–∞–Ω–Ω—ã–π —Ä–æ—É—Ç–∏–Ω–≥ | ‚ùå             | ‚ö†Ô∏è –í—ã—Å–æ–∫–∏–π    | –£–¥–∞–ª–∏—Ç—å           |
| `generate-jwt.js`   | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞  | ‚úÖ –∏–Ω–æ–≥–¥–∞      | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–∏–π    | –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å |
| `check-user/:id`    | Debug endpoint    | ‚úÖ             | ‚ùó –í—ã—Å–æ–∫–∏–π     | –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å        |
| ‚Ä¶                   | ‚Ä¶                 | ‚Ä¶             | ‚Ä¶             | ‚Ä¶                 |

---

## üìà –ò—Ç–æ–≥

–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ **–∫–∞–∂–¥–æ–≥–æ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞** –∞–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω:

* –í—ã–¥–∞—Ç—å üìÑ *—Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤*
* –ù–∞–∑–Ω–∞—á–∏—Ç—å –∫–∞–∂–¥–æ–º—É —Å—Ç–∞—Ç—É—Å:

  * üü¢ –æ—Å—Ç–∞–≤–∏—Ç—å
  * üü° –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
  * üî¥ —É–¥–∞–ª–∏—Ç—å
* –£–∫–∞–∑–∞—Ç—å **–ø–æ—á–µ–º—É** –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö –±–µ–∑–æ–ø–∞—Å–µ–Ω –∏–ª–∏ –æ–ø–∞—Å–µ–Ω

üìå –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —ç—Ç–æ–π –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ—á–∏—â–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –æ—Ç –º—É—Å–æ—Ä–∞.
