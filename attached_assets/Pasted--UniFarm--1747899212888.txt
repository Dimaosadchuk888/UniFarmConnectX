Твоя роль — системний інтегратор, який повинен довести UniFarm до повністю готового продакшн-стану.

Основна ціль:

Забезпечити, щоб продакшн-збірка UniFarm повністю запускалась через Replit, відкривалась за зовнішнім URL, правильно працювала як Telegram Mini App, була підключена до бази даних Neon, Telegram-бота, і мала активну підтримку TON Connect (якщо він є в клієнтській частині).

⸻

Завдання:

1. Консолідація конфігурацій .env

У проєкті виявлено дублікати файлів конфігурації:
 • .env
 • .env.replit
 • .env.neon
 • .env.explain

Потрібно:
 • Залишити лише один основний .env файл
 • Перенести в нього всі значення, включно з:
 • NEON_DB_URL
 • TELEGRAM_BOT_TOKEN
 • MINI_APP_URL
 • Видалити/відключити дублікати, щоб не викликати конфлікти між базами даних

Використовуй ці значення:

NEON_DB_URL=postgresql://neondb_owner:npg_SpgdNBV70WKl@ep-lucky-boat-a463bggt-pooler.us-east-1.aws.neon.tech/neondb?sslmode=require
NEON_ID=br-gentle-snowflake-a4p4y6rz
MINI_APP_URL=https://uni-farm-connect-x-lukyanenkolawfa.replit.app

Якщо ці значення потрібно додати в секрети — зроби це. Переконайся, що вони доступні у runtime.

⸻

2. Стабілізація запуску Replit
 • Кнопка Run не повинна завершувати сервер через 1–3 секунди
 • Перевір, що:
 • Немає process.exit(1) при помилках БД
 • Увімкнені обробники uncaughtException, unhandledRejection
 • Є setInterval або інший механізм, щоб утримувати процес активним
 • Якщо треба — реалізуй окремий start.cjs для стабільного запуску в Replit

⸻

3. Telegram інтеграція

Перевір:
 • Бот ініціалізується через TELEGRAM_BOT_TOKEN (в .env/секретах)
 • Вебхук встановлений: /api/telegram/webhook
 • Кнопка меню підключена до Mini App

Якщо потрібно — виконай вручну або автоматично:

curl -X POST -H "Content-Type: application/json" -d '{"appUrl": "https://uni-farm-connect-x-lukyanenkolawfa.replit.app/webapp"}' https://uni-farm-connect-x-lukyanenkolawfa.replit.app/api/telegram/setup


⸻

4. Перевірка запуску через браузер
 • Переконайся, що при переході за посиланням:
 • https://uni-farm-connect-x-lukyanenkolawfa.replit.app
 • …відкривається фронтенд, а не білий екран
 • Якщо фронт не збирається — проверь vite, dist, обслуговування статичних файлів через Express
 • Додай правильну підтримку CORS

⸻

5. Mini App Telegram
 • Mini App повинен відкриватися в Telegram через кнопку
 • Telegram має передавати initData, user.id, ref_code
 • Система має фіксувати користувача і зберігати його в БД
 • Реєстрація та відображення гаманця має працювати

⸻

6. TON Connect (за потреби)
 • Якщо в клієнті реалізовано TON Connect — знайди і перевір:
 • Де підключається манифест
 • Яка URL прописана для TON manifest
 • Який гаманець підключається (MyTonWallet, OpenMask, Tonkeeper)

⸻

7. Фінальні кроки
 • Ліквідуй усі console.log або заміни їх на логер
 • Додай логування старту сервера, URL, підключення до БД
 • Виведи короткий звіт:
 • Що підключено
 • Чи працює Mini App
 • Чи працює фронт по посиланню
 • Чи працює Telegram Webhook

⸻

Ніяких дублікатів, додаткових файлів або маршрутов створювати не потрібно.
Працюй тільки з існуючою структурою і чітко виводь статус після кожного кроку.

Якщо щось не працює — виводь причину та пропозицію, як виправити.

⸻

Головна мета:
Щоб UniFarm стабільно працював на продакшн-силці, відкривався в браузері, в Telegram Mini App, і коректно обробляв реєстрацію та API.