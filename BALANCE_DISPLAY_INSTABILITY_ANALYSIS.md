# üö® **–ê–ù–ê–õ–ò–ó –ù–ï–°–¢–ê–ë–ò–õ–¨–ù–û–°–¢–ò –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø –ë–ê–õ–ê–ù–°–ê**

**–î–∞—Ç–∞:** 4 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –∏—Å—á–µ–∑–∞—é—â–∏–µ –±–∞–ª–∞–Ω—Å—ã, –≤–æ–∑–≤—Ä–∞—Ç –∫ —Å—Ç–∞—Ä—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º, –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

---

## üí• **–ö–û–†–ù–ï–í–´–ï –ü–†–ò–ß–ò–ù–´ –ü–†–û–ë–õ–ï–ú**

### **1. üîÑ RACE CONDITIONS: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**

**–ü—Ä–æ–±–ª–µ–º–∞:** 5 —Ä–∞–∑–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –ø—ã—Ç–∞—é—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:

1. **WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** (`useWebSocketBalanceSync.ts`)
2. **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ —Ç–∞–π–º–µ—Ä—É** (–∫–∞–∂–¥—ã–µ 2 –º–∏–Ω—É—Ç—ã)
3. **–†—É—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** (`refreshBalance()`)
4. **BalanceUpdateCoordinator** (–¥–µ–±–∞—É–Ω—Å–∏–Ω–≥ 1.5—Å–µ–∫)
5. **–ö–µ—à —Å–∏—Å—Ç–µ–º—ã** (TTL 5 –º–∏–Ω—É—Ç –Ω–∞ –±—ç–∫–µ–Ω–¥–µ, 60 —Å–µ–∫ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ)

**–°—Ü–µ–Ω–∞—Ä–∏–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞:**
```
13:00:00 - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç –¥–µ–ø–æ–∑–∏—Ç 5 TON
13:00:01 - WebSocket —à–ª–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
13:00:02 - BalanceCoordinator –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–¥–µ–±–∞—É–Ω—Å 1.5—Å)
13:00:03 - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π refresh —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
13:00:03.5 - BalanceCoordinator –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
13:00:04 - –ù–æ–≤—ã–π WebSocket –ø—Ä–∏—Ö–æ–¥–∏—Ç
–†–µ–∑—É–ª—å—Ç–∞—Ç: –ë–∞–ª–∞–Ω—Å "–ø—Ä—ã–≥–∞–µ—Ç" –º–µ–∂–¥—É —Å—Ç–∞—Ä—ã–º –∏ –Ω–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º
```

### **2. üíæ –ü–†–û–ë–õ–ï–ú–´ –° –ö–ï–®–ò–†–û–í–ê–ù–ò–ï–ú: –ù–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —É—Ä–æ–≤–Ω–µ–π**

**Backend BalanceCache.ts (TTL: 5 –º–∏–Ω—É—Ç):**
```typescript
private readonly TTL_SECONDS = 300; // 5 –º–∏–Ω—É—Ç
```

**Frontend balanceService.ts (TTL: 1 –º–∏–Ω—É—Ç–∞):**
```typescript
BALANCE_TTL: 60000, // 60 —Å–µ–∫—É–Ω–¥
```

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** Backend –∫–µ—à –∂–∏–≤–µ—Ç –≤ 5 —Ä–∞–∑ –¥–æ–ª—å—à–µ!

**–°—Ü–µ–Ω–∞—Ä–∏–π –ø–æ—Ç–µ—Ä–∏ –±–∞–ª–∞–Ω—Å–∞:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –±–∞–ª–∞–Ω—Å 100 TON (–∏–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–µ—à–∞)
2. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–µ—à –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 60 —Å–µ–∫
3. –ó–∞–ø—Ä–æ—Å –∏–¥–µ—Ç –Ω–∞ backend, backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–µ—à 5-–º–∏–Ω—É—Ç–Ω–æ–π –¥–∞–≤–Ω–æ—Å—Ç–∏  
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–∞–ª–∞–Ω—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ —Å—Ç–∞—Ä–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é!

### **3. üîÄ STALE-WHILE-REVALIDATE –ö–û–ù–§–õ–ò–ö–¢**

**balanceService.ts —Å—Ç—Ä–æ–∫–∏ 64-73:**
```typescript
// SMART FORCE REFRESH: –Ω–µ —É–¥–∞–ª—è–µ–º –∫–µ—à –ø–æ–ª–Ω–æ—Å—Ç—å—é –µ—Å–ª–∏ –æ–Ω —Å–≤–µ–∂–∏–π
if (forceRefresh && cachedItem) {
  const cacheAge = Date.now() - cachedItem.timestamp;
  if (cacheAge < CACHE_CONFIG.MIN_CACHE_AGE) {
    console.log(`[balanceService] üõ°Ô∏è –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–≤–µ–∂–∏–π –∫–µ—à –ø—Ä–∏ forceRefresh`);
    return cachedItem.data; // ‚Üê –í–û–ó–í–†–ê–©–ê–ï–ú –°–¢–ê–†–´–ï –î–ê–ù–ù–´–ï!
  }
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** `forceRefresh` –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –¥–ª—è "—Å–≤–µ–∂–µ–≥–æ" –∫–µ—à–∞ (3 —Å–µ–∫), –Ω–æ –±–∞–ª–∞–Ω—Å –º–æ–≥ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è!

### **4. üì° WEBSOCKET –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï**

**useWebSocketBalanceSync.ts —Å—Ç—Ä–æ–∫–∏ 40-48:**
```typescript
// –ê–í–¢–û–û–ë–ù–û–í–õ–ï–ù–ò–ï –∫–∞–∂–¥—ã–µ 2 –º–∏–Ω—É—Ç—ã
const interval = setInterval(() => {
  balanceCoordinator.requestUpdate(userId, 'interval-auto', false);
}, 120000);
```

**useWebSocketBalanceSync.ts —Å—Ç—Ä–æ–∫–∏ 55-64:**
```typescript
// WEBSOCKET –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
if (lastMessage && lastMessage.type === 'balance_update') {
  balanceCoordinator.requestUpdate(userId, 'websocket-update', true);
}
```

**–ö–æ–Ω—Ñ–ª–∏–∫—Ç:** –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ WebSocket —Ä–∞–±–æ—Ç–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ!

### **5. üèóÔ∏è USER CONTEXT –ê–°–ò–ù–•–†–û–ù–ù–û–°–¢–¨**

**userContext.tsx —Å—Ç—Ä–æ–∫–∏ 241-325:**
```typescript
const refreshUserData = useCallback(async () => {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–æ–∫–µ–Ω
  const testResponse = await correctApiRequest('/api/v2/users/profile');
  if (testResponse.success) {
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ë–ï–ó refreshBalance()
    dispatch({ type: 'SET_USER_DATA', payload: userData });
    return; // ‚Üê –í–´–•–û–î–ò–ú –ë–ï–ó –û–ë–ù–û–í–õ–ï–ù–ò–Ø –ë–ê–õ–ê–ù–°–ê!
  }
});
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–µ—Å—Å–∏–∏ –±–∞–ª–∞–Ω—Å –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è!

---

## üîç **–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó –°–ò–°–¢–ï–ú–´**

### **Backend: –¶–µ–ø–æ—á–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π**

1. **BalanceManager.updateUserBalance()** ‚Üí –û–±–Ω–æ–≤–ª—è–µ—Ç –ë–î
2. **BalanceCache.set()** ‚Üí –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ memory –∫–µ—à (TTL: 5 –º–∏–Ω)
3. **BalanceNotificationService.notifyBalanceUpdate()** ‚Üí WebSocket
4. **Frontend –ø–æ–ª—É—á–∞–µ—Ç WebSocket** ‚Üí Trigger refresh

### **Frontend: –¶–µ–ø–æ—á–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è**

1. **fetchBalance()** ‚Üí API –∑–∞–ø—Ä–æ—Å
2. **cacheService** ‚Üí –õ–æ–∫–∞–ª—å–Ω—ã–π –∫–µ—à (TTL: 1 –º–∏–Ω)
3. **userContext reducer** ‚Üí SET_BALANCE action
4. **Components re-render** ‚Üí –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞

### **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**

**–¢–æ—á–∫–∞ 1:** Backend TTL (5 –º–∏–Ω) vs Frontend TTL (1 –º–∏–Ω)
**–¢–æ—á–∫–∞ 2:** WebSocket –¥–µ–±–∞—É–Ω—Å–∏–Ω–≥ (1.5 —Å–µ–∫) vs API –æ—Ç–≤–µ—Ç (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
**–¢–æ—á–∫–∞ 3:** Force refresh –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (3 —Å–µ–∫) vs —Ä–µ–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
**–¢–æ—á–∫–∞ 4:** –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (2 –º–∏–Ω) vs WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## üìä **–°–¶–ï–ù–ê–†–ò–ò –ü–†–û–ë–õ–ï–ú–ù–û–ì–û –ü–û–í–ï–î–ï–ù–ò–Ø**

### **–°—Ü–µ–Ω–∞—Ä–∏–π A: "–ò—Å—á–µ–∑–∞—é—â–∏–π –¥–µ–ø–æ–∑–∏—Ç"**
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: 100 TON –±–∞–ª–∞–Ω—Å
2. –î–µ–ø–æ–∑–∏—Ç 5 TON ‚Üí API —É—Å–ø–µ—Ö ‚Üí WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
3. Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è: 105 TON ‚úÖ
4. –ß–µ—Ä–µ–∑ 1 –º–∏–Ω—É—Ç—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–µ—à –∏—Å—Ç–µ–∫–∞–µ—Ç
5. –ù–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å ‚Üí Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ä—ã–π –∫–µ—à: 100 TON ‚ùå
6. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç: 100 TON (–ø–æ—Ç–µ—Ä—è 5 TON –≤–∏–∑—É–∞–ª—å–Ω–æ)
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π B: "–ü—Ä—ã–≥–∞—é—â–∏–π –±–∞–ª–∞–Ω—Å"**
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: 100 TON
2. WebSocket: "–æ–±–Ω–æ–≤–∏ –±–∞–ª–∞–Ω—Å" ‚Üí BalanceCoordinator (–¥–µ–±–∞—É–Ω—Å 1.5—Å)
3. –ê–≤—Ç–æ—Ç–∞–π–º–µ—Ä: "–æ–±–Ω–æ–≤–∏ –±–∞–ª–∞–Ω—Å" ‚Üí Immediate request
4. BalanceCoordinator —á–µ—Ä–µ–∑ 1.5—Å: –µ—â–µ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
5. –†–µ–∑—É–ª—å—Ç–∞—Ç: 3 –∑–∞–ø—Ä–æ—Å–∞ –∫ API –≤ —Ç–µ—á–µ–Ω–∏–µ 2 —Å–µ–∫—É–Ω–¥
6. –ë–∞–ª–∞–Ω—Å "–ø—Ä—ã–≥–∞–µ—Ç" –º–µ–∂–¥—É –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π C: "–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π"**
```
1. –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–æ–∑–∏—Ç ‚Üí forceRefresh –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
2. –ö–µ—à –≤–æ–∑—Ä–∞—Å—Ç: 2 —Å–µ–∫—É–Ω–¥—ã (< MIN_CACHE_AGE: 3 —Å–µ–∫)
3. fetchBalance –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –°–¢–ê–†–´–ô –∫–µ—à –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ forceRefresh
4. –ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å –ù–ï –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
```

---

## üõ†Ô∏è **–ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –°–¢–ê–ë–ò–õ–ò–ó–ê–¶–ò–ò**

### **1. –£–ù–ò–§–ò–ö–ê–¶–ò–Ø TTL**
```typescript
// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫–µ—à–∞
Backend BalanceCache: 60 —Å–µ–∫—É–Ω–¥ (–≤–º–µ—Å—Ç–æ 300)
Frontend balanceService: 60 —Å–µ–∫—É–Ω–¥ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
```

### **2. –ü–†–ò–û–†–ò–¢–ò–ó–ê–¶–ò–Ø –ò–°–¢–û–ß–ù–ò–ö–û–í –û–ë–ù–û–í–õ–ï–ù–ò–ô**
```typescript
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ü—Ä—è–º—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è (–¥–µ–ø–æ–∑–∏—Ç, –≤—ã–≤–æ–¥)
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ —Ç–∞–π–º–µ—Ä—É
```

### **3. –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï FORCE REFRESH**
```typescript
// –£–±–∏—Ä–∞–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É MIN_CACHE_AGE –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
if (forceRefresh && (source === 'deposit' || source === 'withdrawal')) {
  // –í—Å–µ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è–µ–º, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∫–µ—à
}
```

### **4. –°–ú–ê–†–¢ –î–ï–ë–ê–£–ù–°–ò–ù–ì**
```typescript
// –†–∞–∑–ª–∏—á–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 500ms (–±—ã—Å—Ç—Ä–æ)
–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 5000ms (–º–µ–¥–ª–µ–Ω–Ω–æ)
–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏: 0ms (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
```

### **5. FALLBACK –°–¢–†–ê–¢–ï–ì–ò–Ø**
```typescript
if (apiError) {
  // –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ä—ã–π –∫–µ—à, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
  return { loading: true, error: '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞...' };
}
```

---

## üéØ **–ü–õ–ê–ù –°–¢–ê–ë–ò–õ–ò–ó–ê–¶–ò–ò**

### **–≠—Ç–∞–ø 1: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**
- [ ] –î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –±–∞–ª–∞–Ω—Å–∞
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –ò–∑–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—É—Ç–µ–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### **–≠—Ç–∞–ø 2: –ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**  
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å TTL –∫–µ—à–µ–π (60 —Å–µ–∫ –≤–µ–∑–¥–µ)
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å forceRefresh –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—é –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### **–≠—Ç–∞–ø 3: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**
- [ ] –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –±–∞–ª–∞–Ω—Å–∞
- [ ] –£–º–Ω—ã–π –∫–µ—à —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- [ ] Optimistic updates —Å rollback –º–µ—Ö–∞–Ω–∏–∑–º–æ–º

### **–≠—Ç–∞–ø 4: UX —É–ª—É—á—à–µ–Ω–∏—è**
- [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] Retry –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- [ ] Graceful degradation –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö

---

## üìà **–û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´**

–ü–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—Ç:
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** –±–∞–ª–∞–Ω—Å–∞ –±–µ–∑ "–ø—Ä—ã–∂–∫–æ–≤"
- ‚úÖ **–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –ø–æ—Å–ª–µ –¥–µ–ø–æ–∑–∏—Ç–æ–≤
- ‚úÖ **–ù–∞–¥–µ–∂–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é** –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
- ‚úÖ **–ü–æ–Ω—è—Ç–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å** –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π

**–¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–º–µ–µ—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–±—É—é—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –∫ —Ä–µ—à–µ–Ω–∏—é.**