# üö® –ê–ù–ê–õ–ò–ó –†–ò–°–ö–û–í –ú–ê–°–°–û–í–û–ô –ú–ò–ì–†–ê–¶–ò–ò –ê–ö–ö–ê–£–ù–¢–û–í
**–î–∞—Ç–∞:** 31.07.2025  
**–°—Ç–∞—Ç—É—Å:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó  
**–í–æ–ø—Ä–æ—Å:** –ú–æ–∂–Ω–æ –ª–∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã —Å—Ä–∞–∑—É –∫–∞–∫ User ID 25?

## ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –†–ò–°–ö–ò –ú–ê–°–°–û–í–û–ô –ú–ò–ì–†–ê–¶–ò–ò

### 1. **–ü–û–¢–ï–†–Ø –î–ê–ù–ù–´–•**
- **–†–∏—Å–∫:** –ú–∞—Å—Å–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∑–∞—Ç–µ—Ä–µ—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–ü—Ä–∏–º–µ—Ä:** –ê–∫–∫–∞—É–Ω—Ç—ã —Å —Ä–∞–±–æ—Ç–∞—é—â–∏–º–∏ –±–∞–ª–∞–Ω—Å–∞–º–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–±—Ä–æ—à–µ–Ω—ã
- **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –ü–æ—Ç–µ—Ä—è —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å—É–¥–µ–±–Ω—ã–µ –∏—Å–∫–∏

### 2. **–ù–ê–†–£–®–ï–ù–ò–ï REFERRAL –°–ò–°–¢–ï–ú–´**
- **–†–∏—Å–∫:** –ú–∞—Å—Å–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ ref_code –º–æ–∂–µ—Ç —Ä–∞–∑—Ä—É—à–∏—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å–µ—Ç—å
- **–ü—Ä–∏–º–µ—Ä:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ—Ç–µ—Ä—è—é—Ç —Å–≤–æ–∏—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –∏ –¥–æ—Ö–æ–¥—ã
- **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –ö–æ–ª–ª–∞–ø—Å —ç–∫–æ–Ω–æ–º–∏–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

### 3. **–î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï TELEGRAM_ID**
- **–†–∏—Å–∫:** –ü–æ–ø—ã—Ç–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å telegram_id –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã
- **–ü—Ä–∏–º–µ—Ä:** –î–≤–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º telegram_id
- **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –ø–æ—Ç–µ—Ä—è –¥–æ—Å—Ç—É–ø–∞

### 4. **–ö–û–õ–õ–ê–ü–° –ë–ê–ó–´ –î–ê–ù–ù–´–•**
- **–†–∏—Å–∫:** –ú–∞—Å—Å–æ–≤–æ–µ UPDATE –Ω–∞ –º–∏–ª–ª–∏–æ–Ω–∞—Ö –∑–∞–ø–∏—Å–µ–π –º–æ–∂–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ë–î
- **–ü—Ä–∏–º–µ—Ä:** UPDATE users SET ... WHERE id > 1000; –Ω–∞ 100k+ –∑–∞–ø–∏—Å–µ–π
- **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ —á–∞—Å—ã, –ø–æ—Ç–µ—Ä—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 5. **–ù–ê–†–£–®–ï–ù–ò–ï –¢–†–ê–ù–ó–ê–ö–¶–ò–û–ù–ù–û–ô –ò–°–¢–û–†–ò–ò**
- **–†–∏—Å–∫:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ user_id –≤ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö –º–æ–∂–µ—Ç —Ä–∞–∑–æ—Ä–≤–∞—Ç—å —Å–≤—è–∑–∏
- **–ü—Ä–∏–º–µ—Ä:** –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–º–∏ –∫ —Å—Ç–∞—Ä—ã–º ID
- **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –ü–æ—Ç–µ—Ä—è –∏—Å—Ç–æ—Ä–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π, –Ω–∞–ª–æ–≥–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

## ‚úÖ –ë–ï–ó–û–ü–ê–°–ù–ê–Ø –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê: –ü–û–≠–¢–ê–ü–ù–ê–Ø –ú–ò–ì–†–ê–¶–ò–Ø

### **–§–ê–ó–ê 1: –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê (1-2 –¥–Ω—è)**
```sql
-- –ê–Ω–∞–ª–∏–∑ –º–∞—Å—à—Ç–∞–±–∞ –ø—Ä–æ–±–ª–µ–º—ã
SELECT 
    COUNT(*) as total_users,
    COUNT(CASE WHEN telegram_id IS NULL THEN 1 END) as missing_telegram_id,
    COUNT(CASE WHEN balance_uni IS NULL THEN 1 END) as missing_uni_balance,
    COUNT(CASE WHEN NOT EXISTS(SELECT 1 FROM user_sessions WHERE user_sessions.user_id = users.id) THEN 1 END) as no_sessions
FROM users;
```

### **–§–ê–ó–ê 2: –ö–ê–¢–ï–ì–û–†–ò–ó–ê–¶–ò–Ø (1 –¥–µ–Ω—å)**
```sql
-- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ç–∏–ø–∞–º –ø—Ä–æ–±–ª–µ–º
CREATE TEMP TABLE user_categories AS
SELECT 
    id,
    username,
    telegram_id,
    CASE 
        WHEN telegram_id IS NULL THEN 'CRITICAL_MISSING_TG_ID'
        WHEN NOT EXISTS(SELECT 1 FROM user_sessions WHERE user_sessions.user_id = users.id) THEN 'MISSING_SESSIONS'
        WHEN NOT EXISTS(SELECT 1 FROM transactions WHERE transactions.user_id = users.id) THEN 'NO_TRANSACTIONS'
        ELSE 'HEALTHY'
    END as category,
    CASE 
        WHEN telegram_id IS NULL THEN 1
        WHEN NOT EXISTS(SELECT 1 FROM user_sessions WHERE user_sessions.user_id = users.id) THEN 2
        ELSE 3
    END as fix_priority
FROM users;
```

### **–§–ê–ó–ê 3: –ü–ò–õ–û–¢–ù–ê–Ø –ú–ò–ì–†–ê–¶–ò–Ø (3-5 –¥–Ω–µ–π)**
- **–í—ã–±—Ä–∞—Ç—å 10-20 –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏**
- **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Ä—É—á–Ω—É—é**
- **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å–≤—è–∑–∏ –∏ –±–∞–ª–∞–Ω—Å—ã**
- **–ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**

### **–§–ê–ó–ê 4: –ë–ê–¢–ß–ï–í–ê–Ø –ú–ò–ì–†–ê–¶–ò–Ø (1-2 –Ω–µ–¥–µ–ª–∏)**
```sql
-- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ 50-100 –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∑–∞ —Ä–∞–∑
-- –° –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∫–∞–∂–¥–æ–≥–æ –±–∞—Ç—á–∞
UPDATE users 
SET telegram_id = (SELECT correct_telegram_id FROM temp_fixes WHERE temp_fixes.user_id = users.id)
WHERE id IN (SELECT user_id FROM temp_fixes LIMIT 50)
  AND telegram_id IS NULL;
```

## üìä –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### **–ù–ï–ú–ï–î–õ–ï–ù–ù–û (—Å–µ–≥–æ–¥–Ω—è)**
1. **–°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
2. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—à—Ç–∞–± –ø—Ä–æ–±–ª–µ–º—ã**
3. **–í—ã–±—Ä–∞—Ç—å 5 —Å–∞–º—ã—Ö –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–æ–≤**

### **–ù–ê –≠–¢–û–ô –ù–ï–î–ï–õ–ï**
1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å 9 —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ –æ–¥–Ω–æ–º—É**
2. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**
3. **–ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏**

### **–í –°–õ–ï–î–£–Æ–©–ï–ú –ú–ï–°–Ø–¶–ï**
1. **–°–æ–∑–¥–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏**
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∫–æ–ø–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
3. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –±–∞—Ç—á–∞–º–∏ –ø–æ 100 –∞–∫–∫–∞—É–Ω—Ç–æ–≤**

## üéØ –í–´–í–û–î

**–ù–ï–¢, –º–∞—Å—Å–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∑–∞ —Ä–∞–∑ –û–ü–ê–°–ù–ê!**

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:**
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å 9 –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ
2. –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
3. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –±–∞—Ç—á–∞–º–∏
4. –ü–æ—Å—Ç–æ—è–Ω–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–ü–æ–º–Ω–∏—Ç–µ:** 99% –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –∑–∞—á–µ–º —Ä–∏—Å–∫–æ–≤–∞—Ç—å –∏–º–∏ —Ä–∞–¥–∏ 1%?