# UniFarm - –û—Ç—á–µ—Ç –æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

**–î–∞—Ç–∞:** 9 –∏—é–ª—è 2025  
**–ê–≤—Ç–æ—Ä:** DevOps Team  
**–°—Ç–∞—Ç—É—Å:** –í –ø—Ä–æ—Ü–µ—Å—Å–µ

## üìä –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å

- [x] –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ ‚Ññ1: –§–ª–∞–≥ `uni_farming_active`
- [x] –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ2: –¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ `FARMING_DEPOSIT`
- [ ] –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ3: TON-–∫–æ—à–µ–ª—ë–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ñ–∞—Ä–º–∏–Ω–≥–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 62

**–ü—Ä–æ–±–ª–µ–º–∞:** –§–ª–∞–≥ `uni_farming_active` –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª—Å—è –≤ `true` –ø—Ä–∏ –¥–µ–ø–æ–∑–∏—Ç–µ, —Ö–æ—Ç—è –≤ –∫–æ–¥–µ —ç—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ.

**–†–µ—à–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `scripts/fix-user-62-active-farming.js`
- –í—Ä—É—á–Ω—É—é –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω —Ñ–∞—Ä–º–∏–Ω–≥ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 62
- –†–µ–∑—É–ª—å—Ç–∞—Ç: `uni_farming_active: true ‚úÖ`

**–î–µ—Ç–∞–ª–∏:**
```
–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- uni_farming_active: false
- uni_deposit_amount: 100
- balance_uni: 448.238824

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- uni_farming_active: true ‚úÖ
- uni_farming_last_update: 2025-07-09T16:37:32.757
- –î–µ–ø–æ–∑–∏—Ç –∏ –±–∞–ª–∞–Ω—Å –æ—Å—Ç–∞–ª–∏—Å—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω —Ç–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ FARMING_DEPOSIT

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —Ç–∏–ø `FARMING_REWARD` —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π —Å—É–º–º–æ–π –¥–ª—è –¥–µ–ø–æ–∑–∏—Ç–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ç–∏–ø –≤ `modules/transactions/model.ts`:
  ```typescript
  FARMING_DEPOSIT: 'farming_deposit'
  ```
- –û–±–Ω–æ–≤–ª–µ–Ω `modules/farming/service.ts` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞:
  ```typescript
  type: 'FARMING_DEPOSIT',  // –í–º–µ—Å—Ç–æ FARMING_REWARD
  amount_uni: depositAmount.toString(),  // –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è —Å—É–º–º–∞
  ```

**–°—Ç–∞—Ç—É—Å:** –ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω, –æ–∂–∏–¥–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –Ω–æ–≤—ã–º –¥–µ–ø–æ–∑–∏—Ç–æ–º.

## üîÑ –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

–î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä
2. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –∫–æ–¥–æ–º

### 2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è TON-–∫–æ—à–µ–ª—å–∫–∞ (–ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ3)

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—É `users`:
```sql
ALTER TABLE users
  ADD COLUMN ton_wallet_address TEXT,
  ADD COLUMN ton_wallet_verified BOOLEAN DEFAULT false,
  ADD COLUMN ton_wallet_linked_at TIMESTAMP;
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
1. –°–¥–µ–ª–∞—Ç—å –Ω–æ–≤—ã–π –¥–µ–ø–æ–∑–∏—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å —Ç–∏–ø–æ–º `FARMING_DEPOSIT`
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

- –í—Å–µ–≥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Ç–∏–ø–∞ `FARMING_REWARD`: 1000+
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Ç–∏–ø–∞ `FARMING_DEPOSIT`: 0 (–Ω–æ–≤—ã–π —Ç–∏–ø)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 62: 100 UNI –≤ –¥–µ–ø–æ–∑–∏—Ç–µ, —Ñ–∞—Ä–º–∏–Ω–≥ –∞–∫—Ç–∏–≤–µ–Ω

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–°—Ä–æ—á–Ω–æ:** –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞
2. **–í–∞–∂–Ω–æ:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –¥–µ–ø–æ–∑–∏—Ç —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π
3. **–ü–ª–∞–Ω–æ–≤–æ:** –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î –¥–ª—è TON-–∫–æ—à–µ–ª—å–∫–æ–≤

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å –∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π —Ñ–∞—Ä–º–∏–Ω–≥–∞ —Ä–µ—à–µ–Ω–∞ –≤—Ä—É—á–Ω—É—é –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 62
- –ö–æ–¥ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤ –±—É–¥—É—â–∏—Ö –¥–µ–ø–æ–∑–∏—Ç–∞—Ö
- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π