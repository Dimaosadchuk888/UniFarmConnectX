# üìä –û–¢–ß–ï–¢ –û –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò –°–•–ï–ú–´ –ë–î UNIFARM

## üìÖ –î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 2025-01-10

## üéØ –¶–µ–ª—å
–ü—Ä–∏–≤–µ—Å—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ –ø–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π —Å–∏—Å—Ç–µ–º—ã UniFarm –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞—É–¥–∏—Ç–∞ –æ—Ç 2025-07-10.

## üìà –ò—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

–ù–∞ –æ—Å–Ω–æ–≤–µ –∞—É–¥–∏—Ç–∞ –±—ã–ª–∏ –≤—ã—è–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

### ‚ùå –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è:
1. **–¢–∞–±–ª–∏—Ü–∞ users** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–æ–ª—è `is_active`, `status`, `processed_at`, `processed_by`, `updated_at`
2. **–¢–∞–±–ª–∏—Ü–∞ transactions** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–æ–ª—è `transaction_type`, `amount`, `currency`, `updated_at`
3. **–¢–∞–±–ª–∏—Ü–∞ referrals** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–æ–ª—è –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
4. **–¢–∞–±–ª–∏—Ü–∞ farming_sessions** - –ø—É—Å—Ç–∞—è, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É
5. **–¢–∞–±–ª–∏—Ü–∞ boost_purchases** - –ø—É—Å—Ç–∞—è, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
6. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã** - `user_missions`, `airdrops`, `daily_bonus_logs`

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –ø–æ–ª–µ–π

#### –¢–∞–±–ª–∏—Ü–∞ `users`:
```sql
- is_active (BOOLEAN) - —Å—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- status (VARCHAR) - —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å
- processed_at (TIMESTAMP) - –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- processed_by (INTEGER) - ID –æ–±—Ä–∞–±–æ—Ç–∞–≤—à–µ–≥–æ
- updated_at (TIMESTAMP) - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

#### –¢–∞–±–ª–∏—Ü–∞ `transactions`:
```sql
- transaction_type (VARCHAR) - —Ç–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- amount (NUMERIC) - –æ–±—â–∞—è —Å—É–º–º–∞
- currency (VARCHAR) - –≤–∞–ª—é—Ç–∞
- updated_at (TIMESTAMP) - –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

#### –¢–∞–±–ª–∏—Ü–∞ `referrals`:
```sql
- total_referrals (INTEGER) - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- active_referrals (INTEGER) - –∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ—Ñ–µ—Ä–∞–ª—ã
- total_earnings (NUMERIC) - –æ–±—â–∏–π –¥–æ—Ö–æ–¥
- referral_levels (JSONB) - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —É—Ä–æ–≤–Ω—è–º
- referral_count (INTEGER) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
```

#### –¢–∞–±–ª–∏—Ü–∞ `farming_sessions`:
```sql
- user_id (INTEGER) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- uni_farming_start_timestamp (TIMESTAMP) - –Ω–∞—á–∞–ª–æ —Ñ–∞—Ä–º–∏–Ω–≥–∞
- uni_farming_last_update (TIMESTAMP) - –ø–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- uni_farming_rate (NUMERIC) - —Å–∫–æ—Ä–æ—Å—Ç—å —Ñ–∞—Ä–º–∏–Ω–≥–∞
- uni_deposit_amount (NUMERIC) - —Å—É–º–º–∞ –¥–µ–ø–æ–∑–∏—Ç–∞
- uni_farming_active (BOOLEAN) - —Å—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- created_at (TIMESTAMP) - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
```

#### –¢–∞–±–ª–∏—Ü–∞ `boost_purchases`:
```sql
- –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å 13 –ø–æ–ª—è–º–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å boost-–ø–∞–∫–µ—Ç–∞–º–∏
```

### 2. –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–ª–µ–π

- **transactions.metadata** - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ
- **transactions.action** - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü

#### –¢–∞–±–ª–∏—Ü–∞ `referral_commissions`:
–°–æ–∑–¥–∞–Ω–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –∫–æ–º–∏—Å—Å–∏—è—Ö —Å –ø–æ–ª—è–º–∏:
- user_id, source_user_id
- level, percentage, amount
- currency, source_type
- created_at

### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

- –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –ø–æ–ª—è
- –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `updated_at`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª–µ–π

### 5. –ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Ç–∞–±–ª–∏—Ü

–¢–∞–±–ª–∏—Ü—ã `user_missions`, `airdrops`, `daily_bonus_logs` –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ DEPRECATED, –Ω–æ –Ω–µ —É–¥–∞–ª–µ–Ω—ã –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ:
- 100% —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î —Å –∫–æ–¥–æ–º —Å–∏—Å—Ç–µ–º—ã
- –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è –¥–æ–±–∞–≤–ª–µ–Ω—ã
- –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è —É–¥–∞–ª–µ–Ω—ã –∏–ª–∏ –ø–æ–º–µ—á–µ–Ω—ã
- –°–æ–∑–¥–∞–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω–¥–µ–∫—Å—ã
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã

### üîß SQL —Å–∫—Ä–∏–ø—Ç:
–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `scripts/sync_schema_to_system.sql` —Å–æ–¥–µ—Ä–∂–∞—â–∏–π:
- 216 —Å—Ç—Ä–æ–∫ SQL –∫–æ–º–∞–Ω–¥
- 7 —Ä–∞–∑–¥–µ–ª–æ–≤ —Å —á–µ—Ç–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ü–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ë–î!**
2. –°–∫—Ä–∏–ø—Ç –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–µ–Ω - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `IF NOT EXISTS` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Å—Ç–∞–Ω–æ–≤—è—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é

1. –°–¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
   ```bash
   pg_dump unifarm_db > backup_$(date +%Y%m%d_%H%M%S).sql
   ```

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑–µ

3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç:
   ```bash
   psql -U username -d unifarm_db -f scripts/sync_schema_to_system.sql
   ```

4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üìù –ò—Ç–æ–≥

–°–∫—Ä–∏–ø—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î —Å —Ç–µ–∫—É—â–µ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π —Å–∏—Å—Ç–µ–º—ã UniFarm, —É—Å—Ç—Ä–∞–Ω—è—è –≤—Å–µ –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É—è —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.