# üìä –ü–û–õ–ù–´–ô –ê–£–î–ò–¢ –°–ò–°–¢–ï–ú–´ UNIFARM - 09.01.2025

## üìå –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ**: 444
- **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**: 45+
- **–ú—É—Å–æ—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**: 60+
- **–î—É–±–ª–∏–∫–∞—Ç–æ–≤**: 15+

---

## üìÅ –ù–ê–ô–î–ï–ù–ù–´–ï –î–£–ë–õ–ò–ö–ê–¢–´

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥—É–±–ª–∏–∫–∞—Ç—ã –≤ server/
```
‚ùå server/routes.ts (–æ—Å–Ω–æ–≤–Ω–æ–π) 
‚ùå server/routes_minimal.ts (—É—Ä–µ–∑–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
‚ùå server/routes_minimal_test.ts (—Ç–µ—Å—Ç–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
‚ùå server/routes_test.ts (–µ—â—ë –æ–¥–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è)
‚ùå server/index_minimal.ts (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)
‚ùå server/minimal-server.ts (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)
```
**–†–∏—Å–∫**: –ü—É—Ç–∞–Ω–∏—Ü–∞ –≤ —Ç–æ–º, –∫–∞–∫–æ–π —Ñ–∞–π–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. –í–æ–∑–º–æ–∂–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤.

### –î—É–±–ª–∏–∫–∞—Ç—ã –º–æ–¥—É–ª–µ–π
- ‚úÖ controller.ts, service.ts, routes.ts –≤ –∫–∞–∂–¥–æ–º –º–æ–¥—É–ª–µ - —ç—Ç–æ **–ù–û–†–ú–ê–õ–¨–ù–û** (–º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- ‚ùå –ù–ï –Ω–∞–π–¥–µ–Ω–æ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Ç–∏–ø–∞ *-fixed.ts –∏–ª–∏ *-backup.ts –≤ modules/

---

## üóëÔ∏è –ú–£–°–û–†–ù–´–ï/–ù–ï–£–ß–¢–Å–ù–ù–´–ï –§–ê–ô–õ–´

### –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã –≤ –∫–æ—Ä–Ω–µ (14 —Ñ–∞–π–ª–æ–≤)
```
‚ùå test-all-routes.js
‚ùå test-balance-manager.js
‚ùå test-balance-sync.js
‚ùå test-deposit-api.js
‚ùå test-farming-deposit-debug.js
‚ùå test-health.js
‚ùå test-module-imports.js
‚ùå test-new-endpoints.js
‚ùå test-routes-import.js
‚ùå test-wallet-direct.js
‚ùå debug-balance-issue.js
‚ùå investigate-balance-deduction.js
‚ùå investigate-deposit-deduction.js
‚ùå quick-wallet-test.js
```
**–ü—Ä–æ–±–ª–µ–º–∞**: –ó–∞—Ö–ª–∞–º–ª—è—é—Ç –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –ø–∞–ø–∫–µ tests/

### HTML —Ñ–∞–π–ª—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ JWT (8 —Ñ–∞–π–ª–æ–≤)
```
‚ùå auto-fix-jwt.html
‚ùå check-jwt-auth.html
‚ùå fix-jwt-auth.html
‚ùå jwt-token-updater.html
‚ùå test-deposit-debug.html
‚ùå test-deposit-live.html
‚ùå test-ton-withdrawal.html
‚ùå test-userid-sync.html
```
**–†–∏—Å–∫**: –ú–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å hardcoded —Ç–æ–∫–µ–Ω—ã –∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –ù–µ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (30+ —Ñ–∞–π–ª–æ–≤)
```
scripts/
‚ùå build-deploy.js
‚ùå build-production.js
‚ùå build-simple.js
‚ùå check_database_status.js
‚ùå check-jwt-validation.js
‚ùå check-missions-*.js (5 —Ñ–∞–π–ª–æ–≤)
‚ùå check-user-62.js
‚ùå db_status_check.js
‚ùå debug-middleware*.js (2 —Ñ–∞–π–ª–∞)
‚ùå direct_db_check.js
‚ùå generate-jwt.js
‚ùå restart-server.js
‚ùå start-*.js (3 —Ñ–∞–π–ª–∞)
‚ùå supabase-*.js (3 —Ñ–∞–π–ª–∞)
‚ùå test-*.js (3 —Ñ–∞–π–ª–∞)
‚ùå trace-auth-flow.js
‚ùå verify-*.js (2 —Ñ–∞–π–ª–∞)
```
**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –±–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

## ‚ö†Ô∏è –ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–û –û–ü–ê–°–ù–´–ï –§–ê–ô–õ–´

### –§–∞–π–ª—ã —Å hardcoded –¥–∞–Ω–Ω—ã–º–∏
```
üî• modules/adminBot/controller.ts - hardcoded usernames –∞–¥–º–∏–Ω–æ–≤
üî• modules/adminBot/service.ts - hardcoded –∞–¥–º–∏–Ω—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ  
üî• security-fixes-verification.js - —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
üî• test-balance-sync.js - hardcoded user IDs
üî• scripts/generate-jwt.js - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è JWT —Ç–æ–∫–µ–Ω–æ–≤
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
```
üî• server/routes_minimal.ts - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
üî• server/index_minimal.ts - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
üî• server/minimal-server.ts - —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
```
**–†–∏—Å–∫**: –ú–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã –≤–º–µ—Å—Ç–æ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, –æ–±—Ö–æ–¥—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### Debug endpoints
```
üî• modules/debug/debugRoutes.ts - –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Ä–æ—É—Ç—ã –ë–ï–ó –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò:
   - GET /debug/check-user/:id - —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (id, telegram_id, username, ref_code)
   - POST /debug/decode-jwt - –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç –ª—é–±–æ–π JWT —Ç–æ–∫–µ–Ω
```
**–†–∏—Å–∫**: –û—Ç–∫—Ä—ã—Ç—ã–π –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –î—É–±–ª–∏–∫–∞—Ç—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
```
üî• server/routes_minimal_test.ts - –ü–û–õ–ù–ê–Ø –∫–æ–ø–∏—è –≤—Å–µ—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–µ minimal!)
   - –°–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï 17 –º–æ–¥—É–ª–µ–π —Å–∏—Å—Ç–µ–º—ã
   - –ú–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –æ—Å–Ω–æ–≤–Ω—ã–º routes.ts
```
**–†–∏—Å–∫**: –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ —Å–ª—É—á–∞–π–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏

---

## üü© –ë–ï–ó–û–ü–ê–°–ù–´–ï, –ù–û –ù–ï –û–ü–ò–°–ê–ù–ù–´–ï –í ROADMAP.md

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
```
‚úÖ build.js - —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ Vite
‚úÖ build.sh - bash —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏
‚úÖ production.config.ts - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è production
‚úÖ production-server.js - production —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚úÖ dev-server.js - development —Å–µ—Ä–≤–µ—Ä
‚úÖ start-unifarm.cjs - CommonJS —Å—Ç–∞—Ä—Ç–µ—Ä
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –æ—Ç—á—ë—Ç—ã
```
‚úÖ ROADMAP_*.md (10+ —Ñ–∞–π–ª–æ–≤) - —Ä–∞–∑–ª–∏—á–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
‚úÖ TODO_*.md - —Å–ø–∏—Å–∫–∏ –∑–∞–¥–∞—á
‚úÖ –ü–ï–†–ï–ó–ê–ü–£–°–ö_–°–ï–†–í–ï–†–ê_–ò–ù–°–¢–†–£–ö–¶–ò–Ø.md
```

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–ø–∫–∏
```
‚úÖ audit/ - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞—É–¥–∏—Ç–æ–≤
‚úÖ archive_reports/ - –∞—Ä—Ö–∏–≤ –æ—Ç—á—ë—Ç–æ–≤
‚úÖ attached_assets/ - –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚úÖ data/ - –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚úÖ logs/ - –ª–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
```

---

## üìä –°–†–ê–í–ù–ï–ù–ò–ï –° ROADMAP.md

### –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏ (17 –∏–∑ 17)
‚úÖ auth, user, wallet, farming, boost, tonFarming, referral
‚úÖ missions, dailyBonus, transactions, airdrop, monitor
‚úÖ admin, telegram, adminBot, scheduler, debug

### –ù–ï –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤ ROADMAP.md
```
‚ùå –í—Å–µ test-*.js —Ñ–∞–π–ª—ã –≤ –∫–æ—Ä–Ω–µ
‚ùå –í—Å–µ HTML —Ñ–∞–π–ª—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏  
‚ùå server/routes_minimal*.ts –≤–∞—Ä–∏–∞–Ω—Ç—ã
‚ùå server/*minimal*.ts —Å–µ—Ä–≤–µ—Ä—ã
‚ùå –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤ scripts/
‚ùå audit/, archive_reports/, attached_assets/
```

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
1. **–£–î–ê–õ–ò–¢–¨** –≤—Å–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤ server/ (routes_minimal*.ts, *minimal*.ts)
2. **–ü–ï–†–ï–ù–ï–°–¢–ò** –≤—Å–µ test-*.js –∏–∑ –∫–æ—Ä–Ω—è –≤ tests/
3. **–£–î–ê–õ–ò–¢–¨** –∏–ª–∏ –∑–∞—â–∏—Ç–∏—Ç—å HTML —Ñ–∞–π–ª—ã —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏
4. **–î–û–ö–£–ú–ï–ù–¢–ò–†–û–í–ê–¢–¨** –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –≤ scripts/

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
1. –î–æ–±–∞–≤–∏—Ç—å –≤ .gitignore –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
2. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å modules/debug –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
1. –û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å archive_reports/
2. –û—á–∏—Å—Ç–∏—Ç—å attached_assets/
3. –î–æ–±–∞–≤–∏—Ç—å README –≤ –ø–∞–ø–∫–∏ –±–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

## üìà –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production**: 75%

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã**:
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ –∫–æ—Ä–Ω–µ
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã–µ debug endpoints

**–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã**:
- –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è
- –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ