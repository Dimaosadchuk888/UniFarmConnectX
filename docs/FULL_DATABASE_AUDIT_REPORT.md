# üìã –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö UniFarm

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 01.08.2025  
**–ê–≥–µ–Ω—Ç:** Replit AI  
**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã:** TON Blockchain Integration

---

## üìä –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ë–î:
- **–í—Å–µ–≥–æ —Ç–∞–±–ª–∏—Ü –≤ —Å—Ö–µ–º–µ:** 31 —Ç–∞–±–ª–∏—Ü–∞
- **–ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** 4 —Ç–∞–±–ª–∏—Ü—ã (users, transactions, missions, withdraw_requests)
- **–ü—É—Å—Ç—ã—Ö —Ç–∞–±–ª–∏—Ü:** 7 —Ç–∞–±–ª–∏—Ü
- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π:** ~596,000 –∑–∞–ø–∏—Å–µ–π

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Ö–æ–¥–∫–∏:
1. ‚ùó **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:** –ë–∞–ª–∞–Ω—Å—ã –∏ —Ñ–∞—Ä–º–∏–Ω–≥-–¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ –≤ —Ç–∞–±–ª–∏—Ü–µ `users`, —Ç–∞–∫ –∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
2. ‚ùó **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã:** 7 —Ç–∞–±–ª–∏—Ü —Å 0 –∑–∞–ø–∏—Å–µ–π, –Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ —Å—Ö–µ–º–µ
3. ‚ùó **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ö–µ–º—ã:** –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –ë–î —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª—è, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ `schema.ts`
4. ‚ùó **–ò–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ–ª–µ–π:** –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ª–µ–π –¥–ª—è —Ñ–∞—Ä–º–∏–Ω–≥–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ `users` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π

---

## üîç 1. –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 1.1 –¢–∞–±–ª–∏—Ü—ã –≤ —Å—Ö–µ–º–µ (shared/schema.ts)

| ‚Ññ | –¢–∞–±–ª–∏—Ü–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---|---------|----------|---------|
| 1 | **authUsers** | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| 2 | **users** | –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (64 –∑–∞–ø–∏—Å–∏) |
| 3 | **userSessions** | –°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | ‚ùå –ü—É—Å—Ç–∞—è (0 –∑–∞–ø–∏—Å–µ–π) |
| 4 | **farmingDeposits** | –î–µ–ø–æ–∑–∏—Ç—ã —Ñ–∞—Ä–º–∏–Ω–≥–∞ | ‚ùå –ü—É—Å—Ç–∞—è (0 –∑–∞–ø–∏—Å–µ–π) |
| 5 | **userBalances** | –ë–∞–ª–∞–Ω—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | ‚ùì –î—É–±–ª–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ users |
| 6 | **transactions** | –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π | ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (595,958 –∑–∞–ø–∏—Å–µ–π) |
| 7 | **referrals** | –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏ | ‚ùå –ü—É—Å—Ç–∞—è (0 –∑–∞–ø–∏—Å–µ–π) |
| 8 | **referral_earnings** | –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –¥–æ—Ö–æ–¥—ã | ‚ùì –°—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω |
| 9 | **missions** | –ú–∏—Å—Å–∏–∏ | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (5 –∑–∞–ø–∏—Å–µ–π) |
| 10 | **userMissions** | –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –º–∏—Å—Å–∏–∏ | ‚ùå –ü—É—Å—Ç–∞—è (0 –∑–∞–ø–∏—Å–µ–π) |
| 11 | **uniFarmingDeposits** | UNI –¥–µ–ø–æ–∑–∏—Ç—ã | ‚ùì –°—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω |
| 12 | **boostDeposits** | –ë—É—Å—Ç-–¥–µ–ø–æ–∑–∏—Ç—ã | ‚ùì –°—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω |
| 13 | **tonBoostDeposits** | TON –±—É—Å—Ç-–¥–µ–ø–æ–∑–∏—Ç—ã | ‚ùì –°—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω |
| 14 | **tonFarmingData** | TON —Ñ–∞—Ä–º–∏–Ω–≥ –¥–∞–Ω–Ω—ã–µ | ‚ùì –°—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω |
| 15 | **launchLogs** | –õ–æ–≥–∏ –∑–∞–ø—É—Å–∫–æ–≤ | ‚ùì –°—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω |
| 16 | **partition_logs** | –õ–æ–≥–∏ –ø–∞—Ä—Ç–∏—Ü–∏–π | ‚ùì –°—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω |
| 17 | **reward_distribution_logs** | –õ–æ–≥–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–≥—Ä–∞–¥ | ‚ùì –°—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω |
| 18 | **performance_metrics** | –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ | ‚ùì –°—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω |
| 19 | **boostPackages** | –ü–∞–∫–µ—Ç—ã –±—É—Å—Ç–æ–≤ | ‚ùì –°—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω |
| 20 | **tonBoostPackages** | TON –±—É—Å—Ç-–ø–∞–∫–µ—Ç—ã | ‚ùì –°—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω |
| 21 | **userBoosts** | –ê–∫—Ç–∏–≤–Ω—ã–µ –±—É—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | ‚ùì –°—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω |
| 22 | **airdrops** | Airdrop –∫–∞–º–ø–∞–Ω–∏–∏ | ‚ùå –ü—É—Å—Ç–∞—è (0 –∑–∞–ø–∏—Å–µ–π) |
| 23 | **airdropParticipants** | –£—á–∞—Å—Ç–Ω–∏–∫–∏ airdrop | ‚ùì –°—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω |
| 24 | **dailyBonusLogs** | –õ–æ–≥–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –±–æ–Ω—É—Å–æ–≤ | ‚ùå –ü—É—Å—Ç–∞—è (0 –∑–∞–ø–∏—Å–µ–π) |
| 25 | **withdrawRequests** | –ó–∞—è–≤–∫–∏ –Ω–∞ –≤—ã–≤–æ–¥ | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (12 –∑–∞–ø–∏—Å–µ–π) |

### 1.2 –ê–Ω–∞–ª–∏–∑ —Ç–∞–±–ª–∏—Ü—ã users

–¢–∞–±–ª–∏—Ü–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–∑–±—ã—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–π (40+ –∫–æ–ª–æ–Ω–æ–∫), –º–Ω–æ–≥–∏–µ –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –¥—É–±–ª–∏—Ä—É—é—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:

#### –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø–æ–ª—è:
1. **–§–∞—Ä–º–∏–Ω–≥ UNI:** 
   - `uni_deposit_amount`, `uni_farming_balance`, `uni_farming_rate`, `uni_farming_start_timestamp`
   - `uni_farming_last_update`, `uni_farming_deposit`, `uni_farming_active`, `uni_farming_activated_at`
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ª–µ–π –¥–ª—è –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

2. **TON Boost:**
   - `ton_boost_package`, `ton_farming_balance`, `ton_farming_rate`, `ton_farming_start_timestamp`
   - `ton_farming_last_update`, `ton_farming_accumulated`, `ton_farming_last_claim`
   - `ton_boost_active`, `ton_boost_package_id`, `ton_boost_rate`
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏

3. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è (–∏–∑ database_tables_info.json):**
   - `last_active` - –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –ë–î, –Ω–æ –Ω–µ –≤ —Å—Ö–µ–º–µ
   - `referrer_id` - –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –ë–î, –Ω–æ –Ω–µ –≤ —Å—Ö–µ–º–µ
   - `ton_boost_expires_at` - –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –ë–î, –Ω–æ –Ω–µ –≤ —Å—Ö–µ–º–µ

### 1.3 –ê–Ω–∞–ª–∏–∑ —Ç–∞–±–ª–∏—Ü—ã transactions

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (595,958 –∑–∞–ø–∏—Å–µ–π)

#### –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è:
1. –í –ë–î –µ—Å—Ç—å –ø–æ–ª—è `type`, `amount_uni`, `amount_ton` (—Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç)
2. –í schema.ts –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã `transaction_type`, `currency`, `amount` (–Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç)
3. –ü–æ–ª—è `metadata`, `source`, `action` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –Ω–æ –∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞

---

## üîé 2. –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### 2.1 –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ë–î

–ü–æ—Å–ª–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞ –≤—ã—è–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:

#### –¢–∞–±–ª–∏—Ü–∞ users (–∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):
- **SELECT:** –ß–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ `telegram_id`, `ref_code`, `id`
- **UPDATE:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤ —á–µ—Ä–µ–∑ `BalanceManager`, —Ñ–∞—Ä–º–∏–Ω–≥-–¥–∞–Ω–Ω—ã—Ö
- **INSERT:** –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `SupabaseUserRepository`
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –°–ª—É–∂–∏—Ç –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### –¢–∞–±–ª–∏—Ü–∞ transactions (–∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):
- **SELECT:** –ó–∞–ø—Ä–æ—Å—ã –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ `user_id`, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `type` –∏ `status`
- **INSERT:** –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –ø—Ä–∏ –ª—é–±—ã—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö —á–µ—Ä–µ–∑ `TransactionEnforcer`
- **UPDATE:** –†–µ–¥–∫–æ, —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–µ –ø–æ–ª—è (`type`, `amount_uni`, `amount_ton`) –≤–º–µ—Å—Ç–æ –Ω–æ–≤—ã—Ö –∏–∑ —Å—Ö–µ–º—ã

#### –¢–∞–±–ª–∏—Ü–∞ missions (—á–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):
- **SELECT:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–∏—Å—Å–∏–π
- **UPDATE:** –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- **INSERT:** –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–º–∏—Å—Å–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é)

#### –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- `uni_farming_data` - –µ—Å—Ç—å fallback –Ω–∞ `users`
- `ton_farming_data` - –µ—Å—Ç—å fallback –Ω–∞ `users`
- `referrals` - –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `users.referred_by`
- `user_sessions` - —Å–µ—Å—Å–∏–∏ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

### 2.2 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

1. **BalanceManager (core/BalanceManager.ts):**
   - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞–º–∏
   - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–µ—à–µ–º –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä—è–º—ã–µ UPDATE –∫ —Ç–∞–±–ª–∏—Ü–µ `users`

2. **UniFarmingRepository (modules/farming/UniFarmingRepository.ts):**
   - –ü—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `uni_farming_data`
   - –ü—Ä–∏ –æ—à–∏–±–∫–µ 42P01 (—Ç–∞–±–ª–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç) –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ `users`
   - Fallback –º–µ—Ö–∞–Ω–∏–∑–º –º–∞–ø–ø–∏—Ç –ø–æ–ª—è users –Ω–∞ —Ñ–æ—Ä–º–∞—Ç uni_farming_data

3. **TransactionEnforcer (core/TransactionEnforcer.ts):**
   - –°–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –¥–ª—è –∞—É–¥–∏—Ç–∞
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç –ø–æ–ª–µ–π —Ç–∞–±–ª–∏—Ü—ã transactions

### 2.3 –¢—Ä–∏–≥–≥–µ—Ä—ã –æ–ø–µ—Ä–∞—Ü–∏–π

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - INSERT –≤ `users` —á–µ—Ä–µ–∑ `SupabaseUserRepository.createUser()`
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ `ref_code`
   - Welcome bonus —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é

2. **–ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ñ–∞—Ä–º–∏–Ω–≥–∞:**
   - UPDATE –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø–æ–ª–µ–π –≤ `users` (uni_farming_*)
   - –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–ø–∏—Å–∏ –≤ `uni_farming_data` —Å fallback –Ω–∞ `users`
   - –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ç–∏–ø–∞ FARMING_DEPOSIT

3. **–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–∞:**
   - UPDATE `users` —á–µ—Ä–µ–∑ `BalanceManager.updateUserBalance()`
   - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –±–∞–ª–∞–Ω—Å–∞
   - –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ç–∏–ø–∞ FARMING_REWARD

4. **–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤:**
   - INSERT –≤ `withdraw_requests`
   - UPDATE `users` —á–µ—Ä–µ–∑ `BalanceManager` (–æ–ø–µ—Ä–∞—Ü–∏—è subtract)
   - –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ç–∏–ø–∞ WITHDRAWAL

### 2.4 –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ –∫–æ–¥–µ

1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞:**
   - BalanceManager (–æ—Å–Ω–æ–≤–Ω–æ–π)
   - UserRepository.updateBalance() (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
   - TransactionService.updateUserBalance() (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
   - directBalanceHandler.ts (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)

2. **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å—Ö–µ–º—ã –∏ –∫–æ–¥–∞:**
   - –ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª—è, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ schema.ts
   - Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã —Å–æ–∑–¥–∞—é—Ç –ø—É—Ç–∞–Ω–∏—Ü—É –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ –¥–∞–Ω–Ω—ã—Ö
   - –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π vs –Ω–æ–≤—ã–π –≤ —Å—Ö–µ–º–µ

---

## ‚ùå 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è

### 3.1 –ü–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –≤ –ë–î, –Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ schema.ts:
1. `users.last_active`
2. `users.referrer_id`
3. `users.ton_boost_expires_at`

### 3.2 –¢–∞–±–ª–∏—Ü—ã –≤ —Å—Ö–µ–º–µ, –Ω–æ –ø—É—Å—Ç—ã–µ –≤ –ë–î:
1. `user_sessions` - —Å–∏—Å—Ç–µ–º–∞ —Å–µ—Å—Å–∏–π –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
2. `referrals` - —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –ø–æ–ª—è –≤ `users`
3. `farming_sessions` - —Ñ–∞—Ä–º–∏–Ω–≥ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `users`
4. `boost_purchases` - –±—É—Å—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `users`
5. `user_missions` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏—Å—Å–∏–π –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è
6. `airdrops` - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª airdrop –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
7. `daily_bonus_logs` - –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

### 3.3 –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:
1. **–ë–∞–ª–∞–Ω—Å—ã:** —Ö—Ä–∞–Ω—è—Ç—Å—è –∏ –≤ `users`, –∏ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –≤ `user_balances`
2. **–§–∞—Ä–º–∏–Ω–≥:** –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–∞–±–ª–∏—Ü –¥–ª—è –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
3. **–†–µ—Ñ–µ—Ä–∞–ª—ã:** –ø–æ–ª—è –≤ `users` vs –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ `referrals`

---

## üß™ 4. –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (–ø–ª–∞–Ω)

### 4.1 –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- Telegram ID: 999999999
- Username: test_user_audit
- Ref code: TEST_AUDIT_2025

**–û–∂–∏–¥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–î:**
1. –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å –≤ `users`
2. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è welcome bonus –≤ `transactions`
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ `ref_code`

### 4.2 –ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞

**–¢–µ—Å—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:**
- –ù–∞—á–∏—Å–ª–∏—Ç—å 10 TON
- –ù–∞—á–∏—Å–ª–∏—Ç—å 100 UNI

**–û–∂–∏–¥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
1. UPDATE `users.balance_ton` –∏ `users.balance_uni`
2. INSERT –≤ `transactions` —Å —Ç–∏–ø–∞–º–∏ DEPOSIT

### 4.3 –§–∞—Ä–º–∏–Ω–≥ / –±—É—Å—Ç—ã / –±–æ–Ω—É—Å—ã

**–¢–µ—Å—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:**
- –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å UNI farming —Å –¥–µ–ø–æ–∑–∏—Ç–æ–º 50 UNI
- –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å TON boost –ø–∞–∫–µ—Ç #1
- –ü–æ–ª—É—á–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å

**–û–∂–∏–¥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ UPDATE –≤ `users`
2. INSERT –≤ `transactions` –¥–ª—è –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞—Å—á–µ—Ç–æ–≤ rate

### 4.4 –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤

**–¢–µ—Å—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:**
- –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –≤—ã–≤–æ–¥ 5 TON

**–û–∂–∏–¥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
1. INSERT –≤ `withdraw_requests`
2. UPDATE `users.balance_ton` (–∑–∞–º–æ—Ä–æ–∑–∫–∞ —Å—Ä–µ–¥—Å—Ç–≤)
3. INSERT –≤ `transactions` —Å —Ç–∏–ø–æ–º WITHDRAWAL

### 4.5 –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

**–¢–µ—Å—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:**
- –°–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–µ—Ñ-–∫–æ–¥–æ–º –ø–µ—Ä–≤–æ–≥–æ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è

**–û–∂–∏–¥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è `parent_ref_code` –∏ `referred_by`
2. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –±–æ–Ω—É—Å–æ–≤

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ:
1. **–ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î:**
   - –í—ã–Ω–µ—Å—Ç–∏ —Ñ–∞—Ä–º–∏–Ω–≥-–¥–∞–Ω–Ω—ã–µ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
   - –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤—è–∑–∏ –≤–º–µ—Å—Ç–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å schema.ts —Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –ë–î:**
   - –î–æ–±–∞–≤–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
   - –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü

3. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (currency + amount)
   - –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å metadata —á–µ—Ä–µ–∑ JSON Schema

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
1. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
2. –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (595k –∑–∞–ø–∏—Å–µ–π)
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è transactions

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
1. –î–æ–±–∞–≤–∏—Ç—å –∞—É–¥–∏—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

---

## üß™ 5. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

### 5.1 –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:** scripts/database-audit-test-scenarios.ts

#### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- **–í—Å–µ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:** 1 (–æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫)
- **–£—Å–ø–µ—à–Ω–æ:** 0
- **–ü—Ä–æ–≤–∞–ª–µ–Ω–æ:** 1

#### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **Foreign Key Constraints:**
   ```
   Code: 23503
   Details: Key (id)=(308) is still referenced from table "transactions"
   Message: update or delete on table "users" violates foreign key constraint
   ```
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
   - –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∫–∞—Å–∫–∞–¥–Ω—ã–µ —É–¥–∞–ª–µ–Ω–∏—è

2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
   ```
   Code: 23505
   Details: Key (telegram_id)=(999999999) already exists
   Message: duplicate key value violates unique constraint "users_telegram_id_key"
   ```

### 5.2 SQL –ê—É–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:** scripts/database-sql-audit.ts
**–û—Ç—á—ë—Ç:** database_sql_audit_1754062277462.json

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ë–î:
```json
{
  "users": 0,
  "transactions": 1000 (–≤—Å–µ FARMING_REWARD),
  "withdraw_requests": 0,
  "uni_farming_data": 0,
  "ton_farming_data": 0,
  "referrals": 0,
  "user_sessions": 0
}
```

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Ö–æ–¥–∫–∏:

1. **SCHEMA_MISMATCH (HIGH Severity):**
   - –¢–∞–±–ª–∏—Ü–∞ transactions –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
   - –¢–µ–∫—É—â–∏–µ –ø–æ–ª—è: `type`, `amount_uni`, `amount_ton`
   - –û–∂–∏–¥–∞–µ–º—ã–µ: `transaction_type`, `amount`, `currency`

2. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã:** 4 —Ç–∞–±–ª–∏—Ü—ã –ø—É—Å—Ç—ã–µ
3. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤ 4 –º–µ—Å—Ç–∞—Ö

---

## üìä –ò—Ç–æ–≥–æ–≤—ã–µ –≤—ã–≤–æ–¥—ã

### –ì–ª–∞–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ö–µ–º—ã –∏ —Ä–µ–∞–ª—å–Ω–æ–π –ë–î** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ transactions
2. **–ò–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** - 10+ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ç–∞–±–ª–∏—Ü
3. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏** - —Ñ–∞—Ä–º–∏–Ω–≥, –±–∞–ª–∞–Ω—Å—ã, —Ä–µ—Ñ–µ—Ä–∞–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ users
4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–∞—Å–∫–∞–¥–Ω—ã—Ö —Å–≤—è–∑–µ–π** - –ø—Ä–æ–±–ª–µ–º—ã —Å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å—é –¥–∞–Ω–Ω—ã—Ö

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É:

**–í–´–°–û–ö–ò–ô:**
1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å schema.ts —Å —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ë–î
2. –†–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å foreign key constraints
3. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**–°–†–ï–î–ù–ò–ô:**
1. –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞—Ä–º–∏–Ω–≥-–¥–∞–Ω–Ω—ã–µ –≤ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
2. –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–∞—Å–∫–∞–¥–Ω—ã–µ —É–¥–∞–ª–µ–Ω–∏—è

**–ù–ò–ó–ö–ò–ô:**
1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (—Å—Ç—Ä–æ–∫–∏ ‚Üí —á–∏—Å–ª–∞ –¥–ª—è –±–∞–ª–∞–Ω—Å–æ–≤)
2. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

---

**–°—Ç–∞—Ç—É—Å –æ—Ç—á–µ—Ç–∞:** ‚úÖ –ó–∞–≤–µ—Ä—à—ë–Ω
**–î–∞—Ç–∞:** 2025-08-01
**–ê–≤—Ç–æ—Ä:** AI Database Auditor