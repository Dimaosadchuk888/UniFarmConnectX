# –ê—É–¥–∏—Ç T55: –ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ UniFarm

## üîç –°–¢–ê–¢–£–° –ê–£–î–ò–¢–ê: ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ù–ê–†–£–®–ï–ù–ò–Ø –û–ë–ù–ê–†–£–ñ–ï–ù–´

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è**: 16 –∏—é–Ω—è 2025  
**–†–µ–∂–∏–º**: Read-only –∞–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–∏  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û –ø–æ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞–º  

---

## üìã 1. –ì–¥–µ –∏ –∫–∞–∫ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è distributeReferralRewards()

### –ù–∞–π–¥–µ–Ω–æ 3 –º–µ—Å—Ç–∞ –≤—ã–∑–æ–≤–∞:

#### 1.1 ‚ùå –ù–ê–†–£–®–ï–ù–ò–ï: –ü–æ–∫—É–ø–∫–∞ Boost —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –±–∞–ª–∞–Ω—Å
**–§–∞–π–ª**: `modules/boost/service.ts:195-218`  
**–ú–µ—Ç–æ–¥**: `purchaseWithInternalWallet()`  
**–¢—Ä–∏–≥–≥–µ—Ä**: –ü–æ–∫—É–ø–∫–∞ Boost-–ø–∞–∫–µ—Ç–∞ –∑–∞ TON –∏–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞

```typescript
// –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –æ –ø–æ–∫—É–ø–∫–µ
const purchase = await this.createBoostPurchase(userId, boostPackage.id, 'wallet', null, 'confirmed');

// –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã –æ—Ç –ø–æ–∫—É–ø–∫–∏ TON Boost
const referralResult = await referralService.distributeReferralRewards(
  userId,
  requiredAmount.toString(),
  'ton_boost',
  'TON'
);
```

**–ü–†–û–ë–õ–ï–ú–ê**: –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –ø—Ä–∏ **–ø–æ–∫—É–ø–∫–µ** Boost-–ø–∞–∫–µ—Ç–∞, –∞ –Ω–µ –æ—Ç **–¥–æ—Ö–æ–¥–∞** —Å –Ω–µ–≥–æ.

#### 1.2 ‚ùå –ù–ê–†–£–®–ï–ù–ò–ï: –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ TON Boost
**–§–∞–π–ª**: `modules/boost/service.ts:559-584`  
**–ú–µ—Ç–æ–¥**: `activateBoost()`  
**–¢—Ä–∏–≥–≥–µ—Ä**: –ê–∫—Ç–∏–≤–∞—Ü–∏—è Boost –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤–Ω–µ—à–Ω–µ–π TON —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

```typescript
// –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ Boost –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ TON
const amount = boostPackage.min_amount || '0';
const referralResult = await referralService.distributeReferralRewards(
  userId,
  amount.toString(),
  'ton_boost',
  'TON'
);
```

**–ü–†–û–ë–õ–ï–ú–ê**: –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –ø—Ä–∏ **–∞–∫—Ç–∏–≤–∞—Ü–∏–∏** Boost-–ø–∞–∫–µ—Ç–∞, –∞ –Ω–µ –æ—Ç **–¥–æ—Ö–æ–¥–∞** —Å –Ω–µ–≥–æ.

#### 1.3 ‚úÖ –ö–û–†–†–ï–ö–¢–ù–û: UNI Farming –¥–æ—Ö–æ–¥—ã
**–§–∞–π–ª**: `core/scheduler/farmingScheduler.ts:76-101`  
**–ú–µ—Ç–æ–¥**: `processUniFarmingIncome()`  
**–¢—Ä–∏–≥–≥–µ—Ä**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–∞ –æ—Ç UNI —Ñ–∞—Ä–º–∏–Ω–≥–∞ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)

```typescript
// –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–µ–∞–ª—å–Ω—ã–º –¥–æ—Ö–æ–¥–æ–º
const { error: updateError } = await supabase
  .from('users')
  .update({
    balance_uni: parseFloat(farmer.balance_uni || '0') + parseFloat(income),
    uni_farming_last_update: new Date().toISOString()
  })
  .eq('id', farmer.id);

// –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã –æ—Ç UNI —Ñ–∞—Ä–º–∏–Ω–≥–∞
const referralResult = await referralService.distributeReferralRewards(
  farmer.id.toString(),
  income,
  'uni_farming',
  'UNI'
);
```

**–°–¢–ê–¢–£–°**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ - –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –ø–æ—Å–ª–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Ö–æ–¥–∞ –æ—Ç UNI —Ñ–∞—Ä–º–∏–Ω–≥–∞.

---

## üéØ 2. –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –≤—ã–∑–æ–≤–∞

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞–º):

#### 2.1 UNI Farming Income
- **–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç —á–µ—Ä–µ–∑ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
- **–£—Å–ª–æ–≤–∏–µ**: `income > 0` - —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–º –¥–æ—Ö–æ–¥–µ
- **–†–∞—Å—á–µ—Ç**: –î–æ—Ö–æ–¥ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ `calculateUniFarmingIncome(farmer)`
- **–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: `REFERRAL_REWARD` —Å `sourceType: 'uni_farming'`
- **–í–∞–ª—é—Ç–∞**: UNI

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (–Ω–∞—Ä—É—à–∞—é—Ç –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞):

#### 2.2 TON Boost Purchase (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –±–∞–ª–∞–Ω—Å)
- **–¢—Ä–∏–≥–≥–µ—Ä**: –°–ø–∏—Å–∞–Ω–∏–µ TON –∏–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ Boost
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ **–ø–æ–∫—É–ø–∫–µ**, –∞ –Ω–µ –æ—Ç **–¥–æ—Ö–æ–¥–∞**
- **–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: `REFERRAL_REWARD` —Å `sourceType: 'ton_boost'`
- **–í–∞–ª—é—Ç–∞**: TON

#### 2.3 TON Boost Activation (–≤–Ω–µ—à–Ω–∏–π –∫–æ—à–µ–ª–µ–∫)
- **–¢—Ä–∏–≥–≥–µ—Ä**: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–π TON —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è Boost
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ **–∞–∫—Ç–∏–≤–∞—Ü–∏–∏**, –∞ –Ω–µ –æ—Ç **–¥–æ—Ö–æ–¥–∞**
- **–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: `REFERRAL_REWARD` —Å `sourceType: 'ton_boost'`
- **–í–∞–ª—é—Ç–∞**: TON

---

## üö® 3. –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è

### 3.1 –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ù–ê–†–£–®–ï–ù–ò–ï #1: –ü–æ–¥–º–µ–Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–æ—Ö–æ–¥–∞
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ –Ω–∞–≥—Ä–∞–¥—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è —Å —Å—É–º–º—ã –ø–æ–∫—É–ø–∫–∏/–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ Boost-–ø–∞–∫–µ—Ç–∞ –≤–º–µ—Å—Ç–æ –¥–æ—Ö–æ–¥–∞ –æ—Ç –Ω–µ–≥–æ

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞**:
```typescript
// modules/boost/service.ts:199-204
const referralResult = await referralService.distributeReferralRewards(
  userId,
  requiredAmount.toString(), // ‚ùå –°—É–º–º–∞ –ø–æ–∫—É–ø–∫–∏, –ù–ï –¥–æ—Ö–æ–¥!
  'ton_boost',
  'TON'
);
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å**:
```typescript
// –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–æ—Ö–æ–¥–∞ –æ—Ç TON Boost farming
const referralResult = await referralService.distributeReferralRewards(
  userId,
  actualBoostIncome.toString(), // ‚úÖ –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –¥–æ—Ö–æ–¥ –æ—Ç Boost
  'ton_boost',
  'TON'
);
```

### 3.2 –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ù–ê–†–£–®–ï–ù–ò–ï #2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã
**–ü—Ä–æ–±–ª–µ–º–∞**: –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö

**–ù–∞–π–¥–µ–Ω–Ω—ã–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã**:
- ‚ùå `purchaseWithInternalWallet()` - –ø–æ–∫—É–ø–∫–∞ Boost –∑–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –±–∞–ª–∞–Ω—Å
- ‚ùå `activateBoost()` - –∞–∫—Ç–∏–≤–∞—Ü–∏—è Boost –ø–æ—Å–ª–µ –≤–Ω–µ—à–Ω–µ–π –æ–ø–ª–∞—Ç—ã

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å**:
- ‚úÖ –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–æ—Ö–æ–¥–∞ –æ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ TON Boost –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–µ
- ‚úÖ –ü—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ TON Boost –¥–æ—Ö–æ–¥–æ–≤
- ‚úÖ –ü—Ä–∏ –∫–ª–µ–π–º–µ TON Boost –Ω–∞–≥—Ä–∞–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

### 3.3 –ù–ê–†–£–®–ï–ù–ò–ï #3: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ TON Boost farming –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: –í —Å–∏—Å—Ç–µ–º–µ –Ω–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –¥–ª—è TON Boost –¥–æ—Ö–æ–¥–æ–≤

**–°—É—â–µ—Å—Ç–≤—É–µ—Ç**:
- ‚úÖ `processUniFarmingIncome()` - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ UNI –¥–æ—Ö–æ–¥–æ–≤

**–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**:
- ‚ùå `processTonBoostIncome()` - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ TON Boost –¥–æ—Ö–æ–¥–æ–≤
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–æ–≤ –æ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö Boost-–ø–∞–∫–µ—Ç–æ–≤
- ‚ùå –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –æ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö TON Boost –¥–æ—Ö–æ–¥–æ–≤

---

## üîç 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### 4.1 –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–∏–ø—ã –≤ distributeReferralRewards:
```typescript
// modules/referral/service.ts:329-341
const { error: txError } = await supabase
  .from('transactions')
  .insert({
    user_id: parseInt(commission.userId),
    type: 'REFERRAL_REWARD', // ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ç–∏–ø
    amount_uni: currency === 'UNI' ? parseFloat(commission.amount) : 0,
    amount_ton: currency === 'TON' ? parseFloat(commission.amount) : 0,
    currency: currency,
    status: 'completed',
    description: `–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞ ${commission.level} —É—Ä–æ–≤–Ω—è –æ—Ç ${sourceType}`,
    source_user_id: parseInt(sourceUserId),
    created_at: new Date().toISOString()
  });
```

### 4.2 –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—ã –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã:
- ‚ùå `TON_BOOST_INCOME` - –¥–æ—Ö–æ–¥ –æ—Ç TON Boost
- ‚ùå `UNI_FARMING_INCOME` - –¥–æ—Ö–æ–¥ –æ—Ç UNI —Ñ–∞—Ä–º–∏–Ω–≥–∞
- ‚ùå –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–µ–∂–¥—É `boost_purchase` –∏ `boost_income`

---

## üìä 5. –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### 5.1 ReferralService –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ**: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
```typescript
logger.info('[ReferralService] –ù–∞—á–∞–ª–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥', {
  sourceUserId, amount, sourceType, currency
});
```

### 5.2 BoostService –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
‚ùå **–ü—Ä–æ–±–ª–µ–º–Ω–æ–µ**: –õ–æ–≥–∏ —Å–∫—Ä—ã–≤–∞—é—Ç –Ω–∞—Ä—É—à–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª
```typescript
logger.info('[BoostService] –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã', {
  userId, boostPackageId, distributed, totalAmount
});
```
**–ü—Ä–æ–±–ª–µ–º–∞**: –õ–æ–≥–∏ –Ω–µ —É–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ, –∞ –Ω–µ –æ—Ç –¥–æ—Ö–æ–¥–∞.

### 5.3 FarmingScheduler –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ**: –Ø—Å–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ - —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –¥–æ—Ö–æ–¥
```typescript
logger.info(`[FARMING_SCHEDULER] –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –¥–ª—è UNI —Ñ–∞—Ä–º–∏–Ω–≥–∞`, {
  farmerId, income, distributed, totalAmount
});
```

---

## üîó 6. –°–≤—è–∑—å —Å farming scheduler

### 6.1 UNI Farming Scheduler:
‚úÖ **–°—Ç–∞—Ç—É—Å**: –ö–û–†–†–ï–ö–¢–ù–û –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `core/scheduler/farmingScheduler.ts:76-101`
- **–ü—Ä–æ—Ü–µ—Å—Å**: –î–æ—Ö–æ–¥ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è ‚Üí –±–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è ‚Üí —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è
- **–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç

### 6.2 TON Boost Scheduler:
‚ùå **–°—Ç–∞—Ç—É—Å**: –ü–û–õ–ù–û–°–¢–¨–Æ –û–¢–°–£–¢–°–¢–í–£–ï–¢
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –¥–ª—è TON Boost –¥–æ—Ö–æ–¥–æ–≤
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –≤–º–µ—Å—Ç–æ –¥–æ—Ö–æ–¥–∞
- **–ù–µ–æ–±—Ö–æ–¥–∏–º–æ**: –°–æ–∑–¥–∞—Ç—å `processTonBoostIncome()` –º–µ—Ç–æ–¥

---

## üéØ 7. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞–º

### RedMap —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- ‚úÖ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –æ—Ç **–¥–æ—Ö–æ–¥–∞** UNI Farming
- ‚ùå –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –æ—Ç **–¥–æ—Ö–æ–¥–∞** TON Boost (–Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ)
- ‚úÖ –ù–ï –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –ø—Ä–∏ Daily Bonus
- ‚úÖ –ù–ï –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –º–∏—Å—Å–∏–π
- ‚úÖ –ù–ï –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- **UNI Farming**: 100% —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞–º ‚úÖ
- **TON Boost**: 0% —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞–º ‚ùå

---

## üõ†Ô∏è 8. –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 8.1 –£–±—Ä–∞—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã:
```typescript
// ‚ùå –£–î–ê–õ–ò–¢–¨ –∏–∑ modules/boost/service.ts:195-218
await referralService.distributeReferralRewards(
  userId, requiredAmount.toString(), 'ton_boost', 'TON'
);

// ‚ùå –£–î–ê–õ–ò–¢–¨ –∏–∑ modules/boost/service.ts:559-584  
await referralService.distributeReferralRewards(
  userId, amount.toString(), 'ton_boost', 'TON'
);
```

### 8.2 –°–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É:
```typescript
// ‚úÖ –î–û–ë–ê–í–ò–¢–¨ –≤ core/scheduler/farmingScheduler.ts
async processTonBoostIncome(): Promise<void> {
  // –ü–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ TON Boost
  // –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –¥–æ—Ö–æ–¥ –æ—Ç Boost
  // –û–±–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  // –í—ã–∑–≤–∞—Ç—å distributeReferralRewards —Å —Ä–µ–∞–ª—å–Ω—ã–º –¥–æ—Ö–æ–¥–æ–º
}
```

---

## üö® –í–´–í–û–î

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞:
**–ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û –¥–ª—è TON Boost —á–∞—Å—Ç–∏**

### –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑:
- **UNI Farming**: ‚úÖ 100% —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞–º
- **TON Boost**: ‚ùå 0% —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞–º  
- **–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**: 50% (—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è UNI)

### –ì–ª–∞–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–ü–æ–¥–º–µ–Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞**: –ù–∞—á–∏—Å–ª–µ–Ω–∏—è —Å —Å—É–º–º—ã –ø–æ–∫—É–ø–∫–∏ –≤–º–µ—Å—Ç–æ –¥–æ—Ö–æ–¥–∞
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã**: –ü–æ–∫—É–ø–∫–∞/–∞–∫—Ç–∏–≤–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Ö–æ–¥–∞  
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ TON –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞**: –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–æ—Ö–æ–¥–æ–≤ –æ—Ç Boost

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. **–ù–ï–ú–ï–î–õ–ï–ù–ù–û —É–¥–∞–ª–∏—Ç—å** —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∏–∑ –º–µ—Ç–æ–¥–æ–≤ –ø–æ–∫—É–ø–∫–∏/–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ Boost
2. **–°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫** TON Boost –¥–æ—Ö–æ–¥–æ–≤ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ UNI
3. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É** –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ TON –¥–æ—Ö–æ–¥–æ–≤
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π —Ç–æ–ª—å–∫–æ –æ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –¥–æ—Ö–æ–¥–æ–≤

### –°—Ç–∞—Ç—É—Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è RedMap:
‚ùå **–ù–ï –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢** - —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å—Ä–æ—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TON Boost –ª–æ–≥–∏–∫–∏

---

*–ê—É–¥–∏—Ç T55 –∑–∞–≤–µ—Ä—à–µ–Ω: 16 –∏—é–Ω—è 2025*  
*–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å: –í–´–°–û–ö–ê–Ø - –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ*