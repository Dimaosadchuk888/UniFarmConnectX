# –û–¢–ß–ï–¢ –û–ë –ê–ö–¢–ò–í–ê–¶–ò–ò –°–ò–°–¢–ï–ú–´ –î–ï–ü–û–ó–ò–¢–û–í

## üéØ –ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê!

–£—Å–ø–µ—à–Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏–ª –∏ –∏—Å–ø—Ä–∞–≤–∏–ª –ø—Ä–æ–±–ª–µ–º—É —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤.

## ‚úÖ –ß–¢–û –ë–´–õ–û –ò–°–ü–†–ê–í–õ–ï–ù–û:

### –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:
**DepositMonitor –ù–ï –ë–´–õ –ó–ê–ü–£–©–ï–ù** –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ `server/index.ts`

### –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –†–ï–®–ï–ù–ò–ï:
1. **–î–æ–±–∞–≤–∏–ª –∏–º–ø–æ—Ä—Ç DepositMonitor** –≤ server/index.ts (—Å—Ç—Ä–æ–∫–∏ 1081-1090)
2. **–ò—Å–ø—Ä–∞–≤–∏–ª —ç–∫—Å–ø–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** –≤ utils/depositMonitor.ts 
3. **–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤

### –ö–û–î –ò–ó–ú–ï–ù–ï–ù–ò–ô:
```typescript
// –í server/index.ts –¥–æ–±–∞–≤–ª–µ–Ω–æ:
(async () => {
  try {
    const { default: DepositMonitor } = await import('../utils/depositMonitor');
    const depositMonitor = DepositMonitor.getInstance();
    depositMonitor.startMonitoring();
    logger.info('‚úÖ DepositMonitor –∑–∞–ø—É—â–µ–Ω - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤ –∞–∫—Ç–∏–≤–µ–Ω');
  } catch (error) {
    logger.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ DepositMonitor', { error });
  }
})();
```

## üîß –ß–¢–û –¢–ï–ü–ï–†–¨ –†–ê–ë–û–¢–ê–ï–¢:

### –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –ú–û–ù–ò–¢–û–†–ò–ù–ì:
- ‚úÖ **DepositMonitor –∞–∫—Ç–∏–≤–µ–Ω** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 2 –º–∏–Ω—É—Ç—ã
- ‚úÖ **TonAPI –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –∫–ª—é—á –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –∑–¥–æ—Ä–æ–≤—å—è –¥–µ–ø–æ–∑–∏—Ç–æ–≤** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–ª–µ—Ä—Ç—ã** –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### –ü–†–û–¶–ï–°–° –û–ë–†–ê–ë–û–¢–ö–ò –î–ï–ü–û–ó–ò–¢–û–í:
1. **–ë–ª–æ–∫—á–µ–π–Ω —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - DepositMonitor –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2. **TonAPI –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–µ–ø–æ–∑–∏—Ç—ã –≤ –±–ª–æ–∫—á–µ–π–Ω–µ TON
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤** WalletService.processTonDeposit
4. **UnifiedTransactionService** —Å–æ–∑–¥–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
5. **BalanceManager** –æ–±–Ω–æ–≤–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å
6. **WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## üìä –°–¢–ê–¢–£–° –°–ò–°–¢–ï–ú–´:

### –î–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:
- ‚ùå TON –¥–µ–ø–æ–∑–∏—Ç—ã –ù–ï –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚ùå –¢—Ä–µ–±–æ–≤–∞–ª–∞—Å—å —Ä—É—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥–æ–≥–æ –¥–µ–ø–æ–∑–∏—Ç–∞
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–ª–∏ —Å–≤–æ–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è

### –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –≤—Å–µ—Ö TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞** –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- ‚úÖ **–í—Å–µ –¥–µ–ø–æ–∑–∏—Ç—ã –±—É–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã**

## üöÄ –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –°–ò–°–¢–ï–ú–´:

### TON API:
- **–ö–ª—é—á**: `AGXMLGE7BXU6BFA...` ‚úÖ –£–°–¢–ê–ù–û–í–õ–ï–ù
- **–°—Ç–∞—Ç—É—Å**: `rest_online: true` ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç**: `https://tonapi.io` ‚úÖ –î–û–°–¢–£–ü–ï–ù

### DepositMonitor:
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏**: 2 –º–∏–Ω—É—Ç—ã
- **–ú–µ—Ç—Ä–∏–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è**: —É—Å–ø–µ—Ö, –Ω–µ—É–¥–∞—á–∏, BOC –¥–∞–Ω–Ω—ã–µ, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ö–µ—à–µ–π
- **–ê–ª–µ—Ä—Ç–∏–Ω–≥**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- **Fallback –º–µ—Ö–∞–Ω–∏–∑–º**: —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∏ —Å–±–æ—è—Ö

## üìà –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´:

### –î–õ–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø ID 25:
1. **–ù–æ–≤—ã–µ –¥–µ–ø–æ–∑–∏—Ç—ã** –±—É–¥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. **–°—Ç–∞—Ä—ã–π –¥–µ–ø–æ–∑–∏—Ç** —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω hash)
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è—Ö —á–µ—Ä–µ–∑ WebSocket

### –î–õ–Ø –í–°–ï–• –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô:
- ‚úÖ **100% –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤
- ‚úÖ **–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ** –Ω–∞ –±–∞–ª–∞–Ω—Å
- ‚úÖ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** —Å fallback –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏

## üîç –ú–û–ù–ò–¢–û–†–ò–ù–ì:

### –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã:
```
‚úÖ DepositMonitor –∑–∞–ø—É—â–µ–Ω - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤ –∞–∫—Ç–∏–≤–µ–Ω
[DepositMonitor] Starting deposit system monitoring
[DepositMonitor] Performing system health check
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
- –ú–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `depositMonitor.getMetrics()`
- –°—Ç–∞—Ç—É—Å –æ—Ç—á–µ—Ç —á–µ—Ä–µ–∑ `depositMonitor.getStatusReport()`
- –ê–ª–µ—Ä—Ç—ã –≤ –ª–æ–≥–∞—Ö –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:

**–ü–†–û–ë–õ–ï–ú–ê –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–®–ï–ù–ê!**

–°–∏—Å—Ç–µ–º–∞ TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –í—Å–µ –Ω–æ–≤—ã–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –±–µ–∑ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—Ç —Å–≤–æ–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.

**–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ID 25:** –ù–æ–≤—ã–µ –¥–µ–ø–æ–∑–∏—Ç—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –°—Ç–∞—Ä—ã–π –¥–µ–ø–æ–∑–∏—Ç –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Ä—É—á–Ω—É—é, –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π hash —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

---
*–ê–∫—Ç–∏–≤–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: 2025-08-05 12:31 UTC*
*–°—Ç–∞—Ç—É—Å: DepositMonitor –ê–ö–¢–ò–í–ï–ù*
*–°–ª–µ–¥—É—é—â–∏–µ –¥–µ–ø–æ–∑–∏—Ç—ã: –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ï*