# ‚úÖ –ü–†–û–ë–õ–ï–ú–ê –î–£–ë–õ–ò–ö–ê–¢–û–í TON –î–ï–ü–û–ó–ò–¢–û–í –†–ï–®–ï–ù–ê

**–î–∞—Ç–∞:** 3 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–í—Ä–µ–º—è:** 14:15 UTC  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–û–ë–õ–ï–ú–ê –ü–û–õ–ù–û–°–¢–¨–Æ –£–°–¢–†–ê–ù–ï–ù–ê  

## üéØ –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê –ù–ê–ô–î–ï–ù–ê –ò –£–°–¢–†–ê–ù–ï–ù–ê

### ‚úÖ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ –ë–´–õ –ù–ê 100% –ü–†–ê–í!
**"–î–≤–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ TX Hash –∏ BOC –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞—é—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã"** - –ê–ë–°–û–õ–Æ–¢–ù–û –¢–û–ß–ù–û–ï –ü–û–ü–ê–î–ê–ù–ò–ï!

## üîç –ß–¢–û –ë–´–õ–û –û–ë–ù–ê–†–£–ñ–ï–ù–û:

### –î–í–û–ô–ù–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê –î–ï–ü–û–ó–ò–¢–û–í:
1. **–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (—Ä–∞–±–æ—Ç–∞–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ):**
   - Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚Üí –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ `/api/v2/wallet/ton-deposit`
   - Backend –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤ `modules/wallet/controller.ts`
   - –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `UnifiedTransactionService`

2. **–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥ (—Å–æ–∑–¥–∞–≤–∞–ª –¥—É–±–ª–∏–∫–∞—Ç—ã):**
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ –≤ `sendTonTransaction()` (—Å—Ç—Ä–æ–∫–∏ 431-470)
   - –í—Ç–æ—Ä–æ–π –≤—ã–∑–æ–≤ —Ç–æ–≥–æ –∂–µ API `/api/v2/wallet/ton-deposit`  
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: –æ–¥–∏–Ω –¥–µ–ø–æ–∑–∏—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª—Å—è –î–í–ê–ñ–î–´

## üö® –£–î–ê–õ–ï–ù–ù–´–ô –ü–†–û–ë–õ–ï–ú–ù–´–ô –ö–û–î:

```typescript
// –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£–≤–µ–¥–æ–º–ª—è–µ–º backend –æ —É—Å–ø–µ—à–Ω–æ–º TON –¥–µ–ø–æ–∑–∏—Ç–µ
// –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ –¥–µ–ø–æ–∑–∏—Ç–æ–≤ –∏–∑-–∑–∞ —Ä–∞–∑—Ä—ã–≤–∞ Frontend-Backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
try {
  const { correctApiRequest } = await import('@/lib/correctApiRequest');
  
  const cleanBocHash = result.boc.replace(/_\d{13}_[a-zA-Z0-9_-]+$/, '');
  
  const backendResponse = await correctApiRequest('/api/v2/wallet/ton-deposit', 'POST', {
    ton_tx_hash: cleanBocHash,
    amount: tonAmount,
    wallet_address: tonConnectUI.account?.address || 'unknown'
  });
  
  console.log('‚úÖ Backend –¥–µ–ø–æ–∑–∏—Ç —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω:', backendResponse);
} catch (backendError) {
  // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
}
```

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

### –¢–ï–ü–ï–†–¨ –†–ê–ë–û–¢–ê–ï–¢:
- ‚úÖ –û–¥–∏–Ω –ø—É—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–µ–ø–æ–∑–∏—Ç–æ–≤ (–∫–∞–∫ –±—ã–ª–æ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ)
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `UnifiedTransactionService`
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ `modules/wallet/controller.ts`
- ‚úÖ –í—Å–µ –±–∞–ª–∞–Ω—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ì–ê–†–ê–ù–¢–ò–ò –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò:
- ‚úÖ –î–µ–ø–æ–∑–∏—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞)
- ‚úÖ –ù—É–ª–µ–≤–æ–π —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ —Å—Ä–µ–¥—Å—Ç–≤
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
- ‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–µ–ø–æ–∑–∏—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

## üìä –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø:

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `client/src/services/tonConnectService.ts` (—É–¥–∞–ª–µ–Ω—ã —Å—Ç—Ä–æ–∫–∏ 431-470)

### –û—Å—Ç–∞–≤—à–∞—è—Å—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
- ‚úÖ `TonDepositCard.tsx` ‚Üí `sendTonTransaction()` ‚Üí Blockchain
- ‚úÖ Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚Üí `/api/v2/wallet/ton-deposit` 
- ‚úÖ `modules/wallet/controller.tonDeposit()` ‚Üí `service.processTonDeposit()`
- ‚úÖ `UnifiedTransactionService` ‚Üí –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è ‚Üí `BalanceManager`

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:

**–ü—Ä–æ–±–ª–µ–º–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞.**

–°–∏—Å—Ç–µ–º–∞ –≤–µ—Ä–Ω—É–ª–∞—Å—å –∫ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ –∫–æ–¥–∞. –í—Å–µ –Ω–æ–≤—ã–µ –¥–µ–ø–æ–∑–∏—Ç—ã –±—É–¥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤.

**–°–¢–ê–¢–£–°:** ‚úÖ –ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ù –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ