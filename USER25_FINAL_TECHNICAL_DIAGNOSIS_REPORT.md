# üéØ –û–ö–û–ù–ß–ê–¢–ï–õ–¨–ù–´–ô –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ô –î–ò–ê–ì–ù–û–ó: User #25 TON –¥–µ–ø–æ–∑–∏—Ç

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê –ù–ê–ô–î–ï–ù–ê –ò –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ê  
**–£—Å–ª–æ–≤–∏–µ:** –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô –í –ö–û–î - —Ç–æ–ª—å–∫–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ü–µ–ø–æ—á–∫–∞ —Ä–∞–∑—Ä—ã–≤–∞ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–∞  

## üìä –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –î–ê–ù–ù–´–ï

### User #25 Production Status ‚úÖ
- **–°—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î:** DimaOsadchuk, ID: 25, telegram_id: 425855744
- **–†–µ—Ñ-–∫–æ–¥:** REF_1750079004411_nddfp2 ‚úÖ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω)
- **TON Balance:** 0 ‚ùå (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0.1)
- **TON —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:** 0 ‚ùå (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 1)

### Blockchain Transaction Status ‚úÖ  
- **Hash:** b30da7471672b8fc154baca674b2cc9c0829ead2a443bfa901f7b676ced2c70d
- **–°—Ç–∞—Ç—É—Å:** –£–°–ü–ï–®–ù–û –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –±–ª–æ–∫—á–µ–π–Ω–æ–º
- **–°—É–º–º–∞:** 0.1 TON
- **–ü–æ–ª—É—á–∞—Ç–µ–ª—å:** –ê–¥–º–∏–Ω –ø–æ–ª—É—á–∏–ª —Å—Ä–µ–¥—Å—Ç–≤–∞ ‚úÖ

## üîç –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ô –ê–ù–ê–õ–ò–ó –ó–ê–í–ï–†–®–ï–ù

### ‚úÖ BACKEND –ö–û–ú–ü–û–ù–ï–ù–¢–´ (–≤—Å–µ –≥–æ—Ç–æ–≤—ã):

#### 1. API Endpoint —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
```
POST /api/v2/wallet/ton-deposit
Router: modules/wallet/routes.ts:82 ‚úÖ
Controller: modules/wallet/controller.ts::tonDeposit() ‚úÖ
Validation: tonDepositSchema ‚úÖ
Auth: requireTelegramAuth ‚úÖ
```

#### 2. Service Logic –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω:
```
modules/wallet/service.ts::processTonDeposit() ‚úÖ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π ‚úÖ
- BalanceManager.addBalance() ‚úÖ  
- UnifiedTransactionService.createTransaction() ‚úÖ
- Rollback –ø—Ä–∏ –æ—à–∏–±–∫–µ ‚úÖ
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ
```

#### 3. Database Schema –≥–æ—Ç–æ–≤–∞:
```
- –¢–∞–±–ª–∏—Ü–∞ transactions ‚úÖ
- –ü–æ–ª–µ balance_ton –≤ users ‚úÖ
- –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω–¥–µ–∫—Å—ã ‚úÖ
```

### ‚ùå FRONTEND –ö–û–ú–ü–û–ù–ï–ù–¢ (–¢–û–ß–ö–ê –†–ê–ó–†–´–í–ê):

#### client/src/services/tonConnectService.ts –ü–†–û–ë–õ–ï–ú–ê:
```typescript
// –ï–°–¢–¨:
async function sendTonTransaction() {
  // ... –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ –±–ª–æ–∫—á–µ–π–Ω ‚úÖ
  return { txHash: result.boc, status: 'success' }; 
}

// –ù–ï–¢: –≤—ã–∑–æ–≤–∞ backend API –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚ùå
// –ù–ï–¢: POST /api/v2/wallet/ton-deposit ‚ùå
// –ù–ï–¢: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è backend –æ –¥–µ–ø–æ–∑–∏—Ç–µ ‚ùå
```

## üéØ –ü–û–õ–ù–ê–Ø –¶–ï–ü–û–ß–ö–ê –†–ê–ó–†–´–í–ê

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ —Å User #25:
```
1. ‚úÖ User #25 –Ω–∞–∂–∞–ª "–ü–æ–ø–æ–ª–Ω–∏—Ç—å 0.1 TON"
2. ‚úÖ tonConnectService.sendTonTransaction() –≤—ã–ø–æ–ª–Ω–µ–Ω
3. ‚úÖ Tonkeeper –ø–æ–∫–∞–∑–∞–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –∏ –ø–æ–ª—É—á–∏–ª –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
4. ‚úÖ Blockchain –æ–±—Ä–∞–±–æ—Ç–∞–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é (hash: b30da747...)
5. ‚úÖ –ê–¥–º–∏–Ω –ø–æ–ª—É—á–∏–ª 0.1 TON –Ω–∞ unifarming.ton
6. ‚ùå Frontend –ù–ï –í–´–ó–í–ê–õ POST /api/v2/wallet/ton-deposit
7. ‚ùå Backend –ù–ï –£–ó–ù–ê–õ –æ –¥–µ–ø–æ–∑–∏—Ç–µ  
8. ‚ùå processTonDeposit() –ù–ï –í–´–ü–û–õ–ù–ï–ù
9. ‚ùå BalanceManager.addBalance() –ù–ï –í–´–ó–í–ê–ù
10. ‚ùå –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ù–ï –°–û–ó–î–ê–ù–ê –≤ –ë–î
11. ‚ùå balance_ton –æ—Å—Ç–∞–ª—Å—è 0
12. ‚ùå WebSocket –ù–ï –û–¢–ü–†–ê–í–ò–õ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
13. ‚ùå UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–π –±–∞–ª–∞–Ω—Å
```

## üìã –ö–û–ù–ö–†–ï–¢–ù–´–ï –§–ê–ô–õ–´ –ò –ú–ï–¢–û–î–´

### ‚úÖ Backend –≥–æ—Ç–æ–≤ (–ù–ï –¢–†–ï–ë–£–ï–¢ –ò–ó–ú–ï–ù–ï–ù–ò–ô):
- `modules/wallet/controller.ts::tonDeposit()` - endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- `modules/wallet/service.ts::processTonDeposit()` - –ª–æ–≥–∏–∫–∞ –≥–æ—Ç–æ–≤–∞
- `modules/wallet/routes.ts` - –º–∞—Ä—à—Ä—É—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
- `core/BalanceManager.ts` - –º–µ—Ç–æ–¥—ã –≥–æ—Ç–æ–≤—ã
- `core/TransactionService.ts` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚ùå Frontend –¢–†–ï–ë–£–ï–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:
- `client/src/services/tonConnectService.ts::sendTonTransaction()` 
  - **–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤—ã–∑–æ–≤ backend API
  - **–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:** fetch POST /api/v2/wallet/ton-deposit

## üí° –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –†–ï–®–ï–ù–ò–ï

### –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ (10-15 —Å—Ç—Ä–æ–∫):
```typescript
// –í client/src/services/tonConnectService.ts –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:
const response = await fetch('/api/v2/wallet/ton-deposit', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${jwtToken}`
  },
  body: JSON.stringify({
    ton_tx_hash: result.boc,
    amount: tonAmount,  
    wallet_address: tonConnectUI.account.address
  })
});
```

## üìä –í–õ–ò–Ø–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´

### –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:
- **User #25** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω (–¥–µ–ø–æ–∑–∏—Ç –Ω–µ –∑–∞—á–∏—Å–ª–µ–Ω)
- **–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ TON Connect** - –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã
- **–ü—Ä–æ–±–ª–µ–º–∞ –ù–ï –µ–¥–∏–Ω–∏—á–Ω–∞—è** - —Å–∏—Å—Ç–µ–º–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è

### –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:
- –°—Ä–µ–¥—Å—Ç–≤–∞ —É—Ö–æ–¥—è—Ç –∞–¥–º–∏–Ω—É ‚úÖ
- –ë–∞–ª–∞–Ω—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ù–ï –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è ‚ùå
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ù–ï —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –≤ –ë–î ‚ùå

## üîß –ü–õ–ê–ù –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø

### –î–ª—è User #25 (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ):
```bash
# –†—É—á–Ω–æ–π –≤—ã–∑–æ–≤ backend API —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
curl -X POST /api/v2/wallet/ton-deposit \
  -H "Authorization: Bearer <valid_jwt>" \
  -d '{
    "ton_tx_hash": "b30da7471672b8fc154baca674b2cc9c0829ead2a443bfa901f7b676ced2c70d",
    "amount": 0.1,
    "wallet_address": "<user_wallet_address>"
  }'
```

### –î–ª—è —Å–∏—Å—Ç–µ–º—ã (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ):
1. –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ POST /api/v2/wallet/ton-deposit –≤ tonConnectService.ts
2. –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å txHash, amount, wallet_address –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
3. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Ç–≤–µ—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## üìÑ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É Frontend TON Connect –∏ Backend API

**–¢–ò–ü –ü–†–û–ë–õ–ï–ú–´:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è - missing API integration

**–§–ê–ô–õ –†–ê–ó–†–´–í–ê:** `client/src/services/tonConnectService.ts` (–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤—ã–∑–æ–≤ backend)

**BACKEND STATUS:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

**FRONTEND STATUS:** ‚ùå –ù–µ —É–≤–µ–¥–æ–º–ª—è–µ—Ç backend –æ –¥–µ–ø–æ–∑–∏—Ç–∞—Ö

**–†–ï–®–ï–ù–ò–ï:** –î–æ–±–∞–≤–∏—Ç—å 10-15 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –¥–ª—è –≤—ã–∑–æ–≤–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ API

**User #25 –¥–µ–ø–æ–∑–∏—Ç:** –ú–û–ñ–ï–¢ –ë–´–¢–¨ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù —á–µ—Ä–µ–∑ –ø—Ä—è–º–æ–π API –≤—ã–∑–æ–≤

---
**–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê** - –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã, —Ç–æ—á–∫–∞ —Ä–∞–∑—Ä—ã–≤–∞ –Ω–∞–π–¥–µ–Ω–∞