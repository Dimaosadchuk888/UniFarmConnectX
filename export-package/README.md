# UniFarm Package для развертывания в Cloud

Этот пакет содержит все необходимые файлы для запуска UniFarm в облачной среде.

## Содержимое пакета

- `dist/` - скомпилированные файлы сервера
- `client/` - исходный код клиентской части
- `server/` - исходный код серверной части
- `start-browser-access.cjs` - скрипт запуска с поддержкой прямого доступа через браузер
- `package.json` - зависимости и скрипты для сборки и запуска
- `.env.example` - пример файла окружения (создайте собственный .env файл)
- `cloud-setup.sh` - скрипт быстрой настройки среды
- `run-cloud.sh` - скрипт запуска приложения в облачной среде

## Инструкция по запуску

1. Распакуйте архив в корневую директорию вашего проекта
2. Создайте файл `.env` на основе `.env.example`
3. Установите необходимые зависимости: `npm install`
4. Запустите приложение: `./run-cloud.sh` или `node start-browser-access.cjs`

## Проверка на дубликаты и ошибки

Для проверки дубликатов и ошибок используйте следующие инструменты:

1. **Проверка дубликатов транзакций:**
   - Откройте `/api/debug/transactions` в браузере
   - Используйте `check-duplicates.js` скрипт: `node scripts/check-duplicates.js`

2. **Проверка ошибок в логах:**
   - Просмотрите файл логов в `/logs/app.log`
   - Используйте endpoint: `/api/debug/errors`

## Переменные окружения

Обязательные переменные окружения:

```
DATABASE_URL=<URL вашей PostgreSQL базы данных>
NODE_ENV=production
PORT=3000
FORCE_NEON_DB=true
OVERRIDE_DB_PROVIDER=neon
SKIP_TELEGRAM_CHECK=true
ALLOW_BROWSER_ACCESS=true
```

## Особенности запуска в Cloud

1. Убедитесь, что порт 3000 доступен
2. Используйте переменную `SKIP_TELEGRAM_CHECK=true` для отключения проверки Telegram
3. Для работы с базой данных требуется указать DATABASE_URL