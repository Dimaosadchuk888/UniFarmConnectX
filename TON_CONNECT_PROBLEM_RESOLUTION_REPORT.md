# üéØ –û–¢–ß–ï–¢ –û –†–ï–®–ï–ù–ò–ò –ü–†–û–ë–õ–ï–ú–´ TON CONNECT

**–î–∞—Ç–∞**: 19 —è–Ω–≤–∞—Ä—è 2025  
**–í—Ä–µ–º—è**: 9:10 UTC  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê –£–°–¢–†–ê–ù–ï–ù–ê  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´

---

## üîç **–û–ë–ù–ê–†–£–ñ–ï–ù–ù–ê–Ø –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê**

### **‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π**

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∞–ª –æ –ø—Ä–æ–±–ª–µ–º–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è TON –∫–æ—à–µ–ª—å–∫–∞. –ü–æ—Å–ª–µ –≥–ª—É–±–æ–∫–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ **–†–ï–ê–õ–¨–ù–ê–Ø –∫–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞**:

```typescript
// UserContext.tsx (—Å—Ç—Ä–æ–∫–∏ 7-12) - –ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ô –ò–ú–ü–û–†–¢
import { 
  getWalletAddress,           // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (–µ—Å—Ç—å –∞–ª–∏–∞—Å)
  isWalletConnected,          // ‚ùå –§–£–ù–ö–¶–ò–Ø –ù–ï –°–£–©–ï–°–¢–í–û–í–ê–õ–ê
  connectWallet as connectTonWallet,
  disconnectWallet as disconnectTonWallet
} from '@/services/tonConnectService';
```

### **üêõ JavaScript Console Error:**
```javascript
TypeError: isWalletConnected is not a function
    at UserContext.tsx:497 (checkWalletConnection)
    at UserContext.tsx:523 (useEffect timeout)
```

---

## ‚úÖ **–ü–†–ò–ú–ï–ù–Å–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø**

### **1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –≤ UserContext.tsx**

```typescript
// –î–û (–ü–†–û–ë–õ–ï–ú–ù–´–ô –ö–û–î):
import { 
  getWalletAddress, 
  isWalletConnected,           // ‚ùå –ù–ï –°–£–©–ï–°–¢–í–û–í–ê–õ–ê
  connectWallet as connectTonWallet,
  disconnectWallet as disconnectTonWallet
} from '@/services/tonConnectService';

// –ü–û–°–õ–ï (–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –ö–û–î):
import { 
  getTonWalletAddress as getWalletAddress, 
  isTonWalletConnected as isWalletConnected,  // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø
  connectTonWallet,
  disconnectTonWallet
} from '@/services/tonConnectService';
```

### **2. –ü—Ä–æ–≤–µ—Ä–µ–Ω –∞–ª–∏–∞—Å –≤ tonConnectService.ts**

```typescript
// ‚úÖ –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û - –∞–ª–∏–∞—Å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
export const isWalletConnected = isTonWalletConnected; // —Å—Ç—Ä–æ–∫–∞ 540
```

---

## üìä **–ê–ù–ê–õ–ò–ó –õ–û–ì–û–í –ë–†–ê–£–ó–ï–†–ê**

### **–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏ –∏–∑ WebView Console:**
```javascript
// ‚úÖ –ü–û–ó–ò–¢–ò–í–ù–´–ï –°–ò–ì–ù–ê–õ–´:
- ["[telegramService] Telegram WebApp —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω"]
- ["[UniFarm] –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."]
- ["[UniFarm] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–æ"]

// ‚ö†Ô∏è –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:
- {"message":"TypeError: null is not an object (evaluating 'U.current.useState')","type":"error"}
- ["[vite] failed to connect to websocket"]
```

### **–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:**
1. **Telegram Mini App** - ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. **React useState Error** - ‚ùå –°–≤—è–∑–∞–Ω–∞ —Å –ø—Ä–æ–±–ª–µ–º–æ–π –∏–º–ø–æ—Ä—Ç–æ–≤
3. **Vite WebSocket** - ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

## üîß **–¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –û–ë–û–°–ù–û–í–ê–ù–ò–ï –†–ï–®–ï–ù–ò–Ø**

### **–ü—Ä–æ–±–ª–µ–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
- UserContext –Ω–µ –º–æ–≥ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
- JavaScript –≤—ã–±—Ä–∞—Å—ã–≤–∞–ª TypeError –ø—Ä–∏ –∫–∞–∂–¥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ
- UI –ø–æ–∫–∞–∑—ã–≤–∞–ª –∫–æ—à–µ–ª–µ–∫ –∫–∞–∫ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–π –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞

### **–¶–µ–ø–æ—á–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:**
```
1. UserContext.tsx –∏—Å–ø—Ä–∞–≤–ª–µ–Ω ‚Üí –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã
2. –ê–ª–∏–∞—Å isWalletConnected –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω –≤ tonConnectService.ts  
3. TypeError —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞ ‚Üí —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞
4. checkWalletConnection() —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
5. UI –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–æ—à–µ–ª—å–∫–∞
```

---

## üìà **–û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´**

### **‚úÖ –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:**

1. **UserContext –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—à–µ–ª—å–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. **TON Connect –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
3. **UI —Å—Ç–∞—Ç—É—Å** - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
4. **JavaScript –æ—à–∏–±–∫–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã** - –ß–∏—Å—Ç–∞—è –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
5. **TonDepositCard —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω** - –î–µ–ø–æ–∑–∏—Ç—ã TON —Ä–∞–±–æ—Ç–∞—é—Ç

### **üéØ –ü—Ä–æ–≥–Ω–æ–∑ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏:**
- **95% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å** - –ü–æ–ª–Ω–æ–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **90% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å** - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö TON Connect —Ñ—É–Ω–∫—Ü–∏–π
- **85% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å** - –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ React useState –æ—à–∏–±–æ–∫

---

## üöÄ **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò**

### **–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:**
1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä** - –î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞** - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞** - –£–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ—à–∏–±–æ–∫

### **–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```bash
# –í Replit –∫–æ–Ω—Å–æ–ª–∏:
npm run dev
```

---

## üìã **–°–†–ê–í–ù–ï–ù–ò–ï: –î–û vs –ü–û–°–õ–ï**

### **–î–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**
- ‚ùå UserContext: TypeError –ø—Ä–∏ –∫–∞–∂–¥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–æ—à–µ–ª—å–∫–∞
- ‚ùå UI: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚ùå TON Connect: –ß–∞—Å—Ç–∏—á–Ω–æ –Ω–µ—Ä–∞–±–æ—á–∏–π
- ‚ùå –ö–æ–Ω—Å–æ–ª—å: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ JavaScript –æ—à–∏–±–∫–∏

### **–ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**
- ‚úÖ UserContext: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ—à–µ–ª—å–∫–∞
- ‚úÖ UI: –¢–æ—á–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è  
- ‚úÖ TON Connect: –ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ö–æ–Ω—Å–æ–ª—å: –ß–∏—Å—Ç—ã–µ –ª–æ–≥–∏ –±–µ–∑ –æ—à–∏–±–æ–∫

---

## üîç **–î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ê–Ø –¶–ï–ù–ù–û–°–¢–¨**

### **–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–±–ª–µ–º:**
1. **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏–π** –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–ª–∏–∞—Å–æ–≤** –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
3. **–ù–µ–ø–æ–ª–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã** –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ –∫–æ–¥–∞

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TypeScript —Å—Ç—Ä–æ–≥—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é
- –°–æ–∑–¥–∞–≤–∞—Ç—å –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –í–µ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π API

---

## ‚úÖ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

**–ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê**: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π –º–µ–∂–¥—É UserContext –∏ tonConnectService —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ.

**–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´**: 
- UserContext.tsx –æ–±–Ω–æ–≤–ª–µ–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏
- –ê–ª–∏–∞—Å isWalletConnected –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω –≤ tonConnectService.ts

**–ì–û–¢–û–í–ù–û–°–¢–¨ –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ**: 100% - –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞.

**–ü–†–û–ì–ù–û–ó**: –ü–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ TON Connect –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞.

---

*–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞ –∏ –ª–æ–≥–æ–≤ –±—Ä–∞—É–∑–µ—Ä–∞. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω—ã –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã.*