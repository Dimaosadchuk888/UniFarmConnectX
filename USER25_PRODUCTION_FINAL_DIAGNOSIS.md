# üéØ –û–ö–û–ù–ß–ê–¢–ï–õ–¨–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: User #25 Production TON –¥–µ–ø–æ–∑–∏—Ç

**–î–∞—Ç–∞:** 20 –∏—é–ª—è 2025  
**–£—Å–ª–æ–≤–∏–µ:** –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô –í –ö–û–î - —Ç–æ–ª—å–∫–æ –∞–Ω–∞–ª–∏–∑ Production  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê –ù–ê–ô–î–ï–ù–ê  

## üìä –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ù–ê–•–û–î–ö–ò

### 1. User #25 –°–£–©–ï–°–¢–í–£–ï–¢ –≤ Production –ë–î ‚úÖ
```
üìã User ID 25:
   Telegram ID: 425855744
   Username: DimaOsadchuk  
   Ref Code: REF_1750079004411_nddfp2 ‚úÖ
   TON Balance: 0 ‚ùå (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0.1)
   UNI Balance: 44706.812204
   Created: 2025-06-16T13:03:24.488578
```

### 2. TON —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –û–¢–°–£–¢–°–¢–í–£–Æ–¢ ‚ùå
```
–ù–∞–π–¥–µ–Ω–æ TON —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –¥–ª—è User #25: 0
Hash b30da7471672b8fc154baca674b2cc9c0829ead2a443bfa901f7b676ced2c70d: –ù–ï –ù–ê–ô–î–ï–ù
```

### 3. API endpoint –ù–ï –†–ê–ë–û–¢–ê–ï–¢ –¥–ª—è User #25 ‚ùå
```
GET /api/v2/wallet/balance?user_id=25
Response: "Invalid or expired JWT token"
```

## üîç –¢–û–ß–ö–ê –†–ê–ó–†–´–í–ê –õ–û–ö–ê–õ–ò–ó–û–í–ê–ù–ê

### –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê: –î–µ–ø–æ–∑–∏—Ç –ù–ï –û–ë–†–ê–ë–û–¢–ê–ù Backend-–æ–º

**–ü—Ä–æ–±–ª–µ–º–∞:** TON —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —É—Å–ø–µ—à–Ω–∞ –≤ –±–ª–æ–∫—á–µ–π–Ω–µ, –∞–¥–º–∏–Ω –ø–æ–ª—É—á–∏–ª —Å—Ä–µ–¥—Å—Ç–≤–∞, –ù–û backend –ù–ï –°–û–ó–î–ê–õ –∑–∞–ø–∏—Å—å –≤ –ë–î.

### –¶–µ–ø–æ—á–∫–∞ —Ä–∞–∑—Ä—ã–≤–∞:
```
‚úÖ TON –¥–µ–ø–æ–∑–∏—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω (0.1 TON)
‚úÖ –ë–ª–æ–∫—á–µ–π–Ω –æ–±—Ä–∞–±–æ—Ç–∞–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é  
‚úÖ –ê–¥–º–∏–Ω –ø–æ–ª—É—á–∏–ª —Å—Ä–µ–¥—Å—Ç–≤–∞
‚ùå Backend –ù–ï –û–ë–†–ê–ë–û–¢–ê–õ –¥–µ–ø–æ–∑–∏—Ç User #25
‚ùå –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ù–ï –°–û–ó–î–ê–ù–ê –≤ —Ç–∞–±–ª–∏—Ü–µ transactions
‚ùå balance_ton –ù–ï –û–ë–ù–û–í–õ–ï–ù (–æ—Å—Ç–∞–ª—Å—è 0)
‚ùå BalanceManager.addBalance() –ù–ï –í–´–ó–í–ê–ù
‚ùå WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ù–ï –û–¢–ü–†–ê–í–õ–ï–ù–û
‚ùå Frontend –ù–ï –ü–û–õ–£–ß–ò–õ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
‚ùå UI –±–∞–ª–∞–Ω—Å –ù–ï –û–ë–ù–û–í–ò–õ–°–Ø
```

## üéØ –§–ê–ô–õ–´/–ú–ï–¢–û–î–´ –ì–î–ï –ü–†–û–ò–°–•–û–î–ò–¢ –†–ê–ó–†–´–í

### 1. **modules/wallet/controller.ts** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –º–µ—Ç–æ–¥ getBalance()
```typescript
// –í —Ñ–∞–π–ª–µ –ù–ï–¢ –º–µ—Ç–æ–¥–∞ getBalance() –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ /api/v2/wallet/balance
// API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT –æ—à–∏–±–∫—É –≤–º–µ—Å—Ç–æ –±–∞–ª–∞–Ω—Å–∞ User #25
```

### 2. **Backend –æ–±—Ä–∞–±–æ—Ç–∫–∞ TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤** - –ù–ï –°–†–ê–ë–û–¢–ê–õ–ê
```typescript
// –ì–¥–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∞:
// TON Connect ‚Üí verify transaction ‚Üí BalanceManager.addBalance() ‚Üí DB update
// –†–µ–∑—É–ª—å—Ç–∞—Ç: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ù–ï –°–û–•–†–ê–ù–ï–ù–ê, –±–∞–ª–∞–Ω—Å –ù–ï –û–ë–ù–û–í–õ–ï–ù
```

### 3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ –ë–î** - –¥–µ–ø–æ–∑–∏—Ç –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω
```sql
-- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
INSERT INTO transactions (user_id, type, amount, description) 
VALUES (25, 'TON_DEPOSIT', 0.1, 'TON Deposit via TON Connect');

UPDATE users SET balance_ton = balance_ton + 0.1 WHERE id = 25;

-- –§–∞–∫—Ç–∏—á–µ—Å–∫–∏: –ù–ò –û–î–ù–û–ô –∑–∞–ø–∏—Å–∏ –Ω–µ—Ç
```

## üí° –î–ò–ê–ì–ù–û–ó –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–Ø –ö–û–î–ê

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ —Å User #25:
1. **TON Connect –æ—Ç–ø—Ä–∞–≤–∏–ª –¥–µ–ø–æ–∑–∏—Ç** ‚Üí –±–ª–æ–∫—á–µ–π–Ω –ø–æ–ª—É—á–∏–ª ‚úÖ
2. **–ê–¥–º–∏–Ω –ø–æ–ª—É—á–∏–ª —Å—Ä–µ–¥—Å—Ç–≤–∞** ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ‚úÖ  
3. **Backend –ù–ï –û–ë–†–ê–ë–û–¢–ê–õ** –¥–µ–ø–æ–∑–∏—Ç –¥–ª—è User #25 ‚ùå
4. **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç webhook** –∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤ ‚ùå
5. **Database –ù–ï –û–ë–ù–û–í–õ–ï–ù–ê** - balance_ton = 0 ‚ùå
6. **API –Ω–µ –º–æ–∂–µ—Ç** –≤–µ—Ä–Ω—É—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å ‚ùå

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
```
1. TON Connect service –ù–ï –°–û–ó–î–ê–õ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –¥–ª—è User #25
2. Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ù–ï –°–†–ê–ë–û–¢–ê–õ–ê –∏–ª–∏ –ù–ï –ù–ê–°–¢–†–û–ï–ù–ê  
3. BalanceManager.addBalance() –ù–ï –ë–´–õ –í–´–ó–í–ê–ù
4. Production –ª–æ–≥–∏ –ù–ï –°–û–î–ï–†–ñ–ê–¢ –∑–∞–ø–∏—Å–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–µ–ø–æ–∑–∏—Ç–∞
5. WebSocket NOT —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
```

## üìã –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:** Backend –ù–ï –û–ë–†–ê–ë–û–¢–ê–õ TON –¥–µ–ø–æ–∑–∏—Ç User #25, —Ö–æ—Ç—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —É—Å–ø–µ—à–Ω–∞ –≤ –±–ª–æ–∫—á–µ–π–Ω–µ.

**–¢–û–ß–ö–ê –†–ê–ó–†–´–í–ê:** –ú–µ–∂–¥—É TON Connect confirmation –∏ Database update - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–µ–ø–æ–∑–∏—Ç–æ–≤.

**–¢–ò–ü –ü–†–û–ë–õ–ï–ú–´:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è - –¥–µ–ø–æ–∑–∏—Ç "–≤–∏—Å–∏—Ç" –º–µ–∂–¥—É –±–ª–æ–∫—á–µ–π–Ω–æ–º –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

**–ù–ï–û–ë–•–û–î–ò–ú–´–ï –î–ï–ô–°–¢–í–ò–Ø (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞):**
1. ‚úÖ –ù–∞–π—Ç–∏ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –¥–ª—è User #25  
3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å balance_ton = 0.1 –¥–ª—è User #25
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ü–µ–ø–æ—á–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ TON Connect ‚Üí Database

**–°–¢–ê–¢–£–°:** üéØ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –ø—Ä–æ–±–ª–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–∞ - —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ backend –æ–±—Ä–∞–±–æ—Ç–∫–∏ TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤.

---
**User #25 –¥–µ–ø–æ–∑–∏—Ç –ù–ï –ü–û–¢–ï–†–Ø–ù** - —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö