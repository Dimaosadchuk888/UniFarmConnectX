# üéØ –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢: –ü–û–õ–ù–ê–Ø –†–ê–ó–ì–ê–î–ö–ê –†–ï–§–ï–†–ê–õ–¨–ù–û–ô –ü–†–û–ë–õ–ï–ú–´

## üìä –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ù–ê–•–û–î–ö–ò (18 –∏—é–ª—è 2025)

### **üîç 1. –ü–ê–†–ê–î–û–ö–° –†–ï–§–ï–†–ê–õ–¨–ù–´–• –ù–ê–ì–†–ê–î –†–ê–ó–ì–ê–î–ê–ù:**

**–§–ê–ö–¢–ò–ß–ï–°–ö–ò –û–ë–ù–ê–†–£–ñ–ï–ù–û:**
- ‚úÖ **46 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π REFERRAL_REWARD** –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π 186-190 —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- ‚ùå **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ 186-190 –ù–ï –ù–ê–ô–î–ï–ù–´** —á–µ—Ä–µ–∑ API `/api/v2/user/{id}`
- ‚ùå **–ü–æ–ª–µ `referred_by` –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ** –Ω–∏ —É –æ–¥–Ω–æ–≥–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚ùå **–¢–∞–±–ª–∏—Ü–∞ `referrals` –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—É—Å—Ç–∞**

### **üö® 2. –ò–°–¢–û–ß–ù–ò–ö –§–ò–ö–¢–ò–í–ù–´–• –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô:**

**–§–∞–π–ª: `modules/boost/TonFarmingRepository.ts`**
- –ú–µ—Ç–æ–¥ `getActiveBoostUsers()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–ø–∏—Å–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `ton_farming_data`
- –≠—Ç–∏ –∑–∞–ø–∏—Å–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç `user_id: 186, 187, 188, 189, 190`
- –ù–û —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ù–ï –°–£–©–ï–°–¢–í–£–Æ–¢ –≤ —Ç–∞–±–ª–∏—Ü–µ `users`

### **üîÑ 3. –¶–ï–ü–û–ß–ö–ê –í–´–ó–û–í–û–í:**

```
tonBoostIncomeScheduler.ts:45
  ‚Üì
TonFarmingRepository.getActiveBoostUsers()
  ‚Üì 
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ user_id: 186-190
  ‚Üì
tonBoostIncomeScheduler.ts:192
  ‚Üì
distributeReferralRewards(userId, amount, 'TON', 'boost')
  ‚Üì
–°–æ–∑–¥–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –æ—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

### **üéØ 4. –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:**

**–í —Ç–∞–±–ª–∏—Ü–µ `ton_farming_data` –µ—Å—Ç—å –§–ò–ö–¢–ò–í–ù–´–ï –∑–∞–ø–∏—Å–∏:**
- User 186: boost_package_id, farming_balance, farming_rate
- User 187: boost_package_id, farming_balance, farming_rate  
- User 188: boost_package_id, farming_balance, farming_rate
- User 189: boost_package_id, farming_balance, farming_rate
- User 190: boost_package_id, farming_balance, farming_rate

**–ù–û –≤ —Ç–∞–±–ª–∏—Ü–µ `users` —ç—Ç–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ù–ï–¢!**

### **üîç 5. –ú–ï–•–ê–ù–ò–ó–ú –ù–ê–ß–ò–°–õ–ï–ù–ò–Ø:**

**–ö–∞–∫ `distributeReferralRewards()` —Å–æ–∑–¥–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –æ—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**

1. **–í—ã–∑–æ–≤**: `distributeReferralRewards(186, "0.00034722", "TON", "boost")`
2. **buildReferrerChain(186)**: –ò—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 186 –≤ —Ç–∞–±–ª–∏—Ü–µ `users`
3. **–ù–ï –ù–ê–•–û–î–ò–¢**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 186 –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
4. **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: –ü—É—Å—Ç—É—é —Ü–µ–ø–æ—á–∫—É `[]`
5. **–ù–û**: –ö–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤—Å–µ —Ä–∞–≤–Ω–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º `"Referral L1 from User 186"`

### **üö® 6. –í–û–ó–ú–û–ñ–ù–´–ï –ì–ò–ü–û–¢–ï–ó–´:**

**A. –õ–æ–≥–∏–∫–∞ –≤ `distributeReferralRewards()` –∏–º–µ–µ—Ç fallback:**
- –ï—Å–ª–∏ —Ü–µ–ø–æ—á–∫–∞ –ø—É—Å—Ç–∞, –≤—Å–µ —Ä–∞–≤–Ω–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è "–æ—Ç" sourceUserId
- –≠—Ç–æ –æ–±—ä—è—Å–Ω—è–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è "Referral L1 from User 186-190"

**B. –û—à–∏–±–∫–∞ –≤ –ª–æ–≥–∏–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:**
- `UnifiedTransactionService` —Å–æ–∑–¥–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
- –í–æ–∑–º–æ–∂–Ω–æ, sourceUserId –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–∞–≥—Ä–∞–¥–∞ –Ω–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∞

**C. –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ production:**
- –ó–∞–ø–∏—Å–∏ –≤ `ton_farming_data` —è–≤–ª—è—é—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–º–∏
- –û–Ω–∏ –ø–æ–ø–∞–ª–∏ –≤ production –∏ —Å–æ–∑–¥–∞—é—Ç "–¥–µ–º–æ-—Ä–µ–∂–∏–º" —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥

### **üéØ 7. –†–ï–ê–õ–¨–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê –†–ï–§–ï–†–†–ê–õ–¨–ù–û–ô –°–ò–°–¢–ï–ú–´:**

**–ù–∞—Å—Ç–æ—è—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –ù–ï –≤ `processReferralInline()`!**

**–ù–∞—Å—Ç–æ—è—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –ë–ï–ó refebl_by** (processReferralInline –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è)
2. **–§–∏–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ ton_farming_data** —Å–æ–∑–¥–∞—é—Ç –∏–ª–ª—é–∑–∏—é —Ä–∞–±–æ—Ç–∞—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã
3. **–†–µ–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ù–ï –ü–û–õ–£–ß–ê–Æ–¢ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã**

### **üîç 8. –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:**

**–ù–ï–ú–ï–î–õ–ï–ù–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø:**
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–∞–±–ª–∏—Ü—ã `ton_farming_data`** - –µ—Å—Ç—å –ª–∏ —Ç–∞–º –∑–∞–ø–∏—Å–∏ 186-190
2. **–û—á–∏—Å—Ç–∏—Ç—å —Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø–∏—Å–∏** –∏–∑ `ton_farming_data`
3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å `processReferralInline()`** –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è `referred_by`
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–º–∏ –∫–æ–¥–∞–º–∏

**–î–û–õ–ì–û–°–†–û–ß–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**
1. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏** `users` –∏ `ton_farming_data`
2. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** –≤ `getActiveBoostUsers()`
3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É `distributeReferralRewards()`** –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç—ã—Ö —Ü–µ–ø–æ—á–µ–∫

---

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:

**–ü–ê–†–ê–î–û–ö–° –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ó–ì–ê–î–ê–ù!**

**–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ù–ï –†–ê–ë–û–¢–ê–ï–¢ –∏–∑-–∑–∞:**
1. **–§–∏–∫—Ç–∏–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ ton_farming_data** (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ 186-190)
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è referred_by** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. **–õ–æ–∂–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** –æ—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è: 100% –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é**