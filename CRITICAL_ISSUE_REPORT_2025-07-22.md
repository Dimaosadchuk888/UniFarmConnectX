# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –û–¢–ß–ï–¢: –ü—Ä–æ–±–ª–µ–º–∞ —Å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω–µ

**–î–∞—Ç–∞:** 22 –∏—é–ª—è 2025, 07:24 UTC  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** HIGHEST PRIORITY  
**–°—Ç–∞—Ç—É—Å:** üîç –ê–ö–¢–ò–í–ù–û–ï –†–ê–°–°–õ–ï–î–û–í–ê–ù–ò–ï  

---

## üìã –ò–°–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û–ï –†–ï–ó–Æ–ú–ï

### –ó–∞—è–≤–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∞–µ—Ç:** 1% –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –≤–º–µ—Å—Ç–æ 1% –≤ –¥–µ–Ω—å  
**–û–∂–∏–¥–∞–µ—Ç—Å—è:** 1% –≤ —Å—É—Ç–∫–∏, —Ä–∞–∑–±–∏—Ç—ã–π –Ω–∞ 288 –º–∏–∫—Ä–æ–Ω–∞—á–∏—Å–ª–µ–Ω–∏–π –ø–æ 5 –º–∏–Ω—É—Ç  
**–§–∞–∫—Ç–∏—á–µ—Å–∫–∏:** –í–æ–∑–º–æ–∂–Ω—ã–µ –ø–µ—Ä–µ–ø–ª–∞—Ç—ã –≤ —Ä–∞–∑–º–µ—Ä–µ ~288x –æ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –¥–æ—Ö–æ–¥–∞  

---

## üîç –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó

### 1. –ê–Ω–∞–ª–∏–∑ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ñ–æ—Ä–º—É–ª—ã
**–§–∞–π–ª:** `core/farming/UnifiedFarmingCalculator.ts`  
**–°—Ç—Ä–æ–∫–∏ 66-68:**
```typescript
const dailyIncome = depositAmount * rate;           // 1% –≤ –¥–µ–Ω—å
const incomePerPeriod = dailyIncome / 288;          // –î–µ–ª–∏–º –Ω–∞ 288 –ø–µ—Ä–∏–æ–¥–æ–≤ 
const totalIncome = incomePerPeriod * effectivePeriods; // –£–º–Ω–æ–∂–∞–µ–º –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–∏–æ–¥–æ–≤
```

**–í–ï–†–î–ò–ö–¢:** ‚úÖ **–ú–ê–¢–ï–ú–ê–¢–ò–ö–ê –ö–û–†–†–ï–ö–¢–ù–ê–Ø**
- –§–æ—Ä–º—É–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è: (–¥–µ–ø–æ–∑–∏—Ç √ó 1%) √∑ 288 √ó –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–ø–µ—Ä–∏–æ–¥–æ–≤
- 288 –ø–µ—Ä–∏–æ–¥–æ–≤ = 24 —á–∞—Å–∞ √ó 60 –º–∏–Ω—É—Ç √∑ 5 –º–∏–Ω—É—Ç = –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è: MAX_ALLOWED_PERIODS = 288

### 2. –ê–Ω–∞–ª–∏–∑ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–≤
**UNI Farming Scheduler:** `core/scheduler/farmingScheduler.ts`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç CRON: `*/5 * * * *` (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
- ‚úÖ Distributed lock –∑–∞—â–∏—Ç–∞: `isProcessing`
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª: 4.5 –º–∏–Ω—É—Ç—ã –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `UnifiedFarmingCalculator.calculateIncome()`

**TON Boost Scheduler:** `modules/scheduler/tonBoostIncomeScheduler.ts`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç setInterval: 5 * 60 * 1000 (5 –º–∏–Ω—É—Ç)
- ‚úÖ –§–æ—Ä–º—É–ª–∞: `dailyIncome / 288` (—Å—Ç—Ä–æ–∫–∞ 134)

### 3. –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
```
[DEBUG] –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–ø–æ–∑–∏—Ç–æ–≤: {"localCount":0,"finalCount":0}
[DEBUG] –ß–∏—Å–ª–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏: {
  "uni_farming_rate": 0.01,
  "calculatedRatePerSecond": "2.777777777778e-8",  // –ü—Ä–∞–≤–∏–ª—å–Ω–æ!
  "dailyRate": "0.24"
}
```

**–ê–ù–û–ú–ê–õ–ò–Ø:** `dailyRate: "0.24"` –≤–º–µ—Å—Ç–æ `0.01`  
**–ü–û–î–û–ó–†–ï–ù–ò–ï:** Frontend –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## üéØ –ì–ò–ü–û–¢–ï–ó–´ –ü–†–ò–ß–ò–ù –ü–†–û–ë–õ–ï–ú–´

### –ì–ò–ü–û–¢–ï–ó–ê #1: –ü—Ä–æ–±–ª–µ–º–∞ –≤–æ Frontend —Ä–∞—Å—á–µ—Ç–∞—Ö
**–§–∞–π–ª:** `client/src/components/farming/UniFarmingCard.tsx`  
**–ü–æ–¥–æ–∑—Ä–µ–Ω–∏–µ:** Frontend –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é —Ñ–æ—Ä–º—É–ª—É –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

### –ì–ò–ü–û–¢–ï–ó–ê #2: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
**–ü—Ä–∏—á–∏–Ω–∞:** –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏ –º–æ–≥—É—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å—Å—è
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –ª–æ–≥–æ–≤

### –ì–ò–ü–û–¢–ï–ó–ê #3: –û—à–∏–±–∫–∞ –≤ –ª–æ–≥–∏–∫–µ –ø–µ—Ä–∏–æ–¥–æ–≤
**–ü—Ä–∏—á–∏–Ω–∞:** `effectivePeriods` –º–æ–∂–µ—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ù—É–∂–Ω—ã –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ —Ä–∞—Å—á–µ—Ç–æ–≤

---

## üîß –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –≠–¢–ê–ü 1: –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–°–µ–π—á–∞—Å)
- [x] –ê–Ω–∞–ª–∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–≤
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–æ—Ä–º—É–ª
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- [ ] –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞
- [ ] SQL-–∑–∞–ø—Ä–æ—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –≠–¢–ê–ü 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ (10 –º–∏–Ω—É—Ç)
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞—Å—á–µ—Ç–æ–≤
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –°—Ä–∞–≤–Ω–∏—Ç—å –æ–∂–∏–¥–∞–µ–º—ã–µ –∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è

### –≠–¢–ê–ü 3: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (20 –º–∏–Ω—É—Ç)
- [ ] –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–∞ –æ—à–∏–±–∫–∞ - –∏—Å–ø—Ä–∞–≤–∏—Ç—å
- [ ] –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥—É–±–ª–∏
- [ ] –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤–æ frontend - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

### –≠–¢–ê–ü 4: –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ—Ç—á–µ—Ç (15 –º–∏–Ω—É—Ç)
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –æ—Ç—á–µ—Ç –æ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

---

## üìä –ó–ê–ü–†–û–° –ù–ê SQL-–î–ê–ù–ù–´–ï

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
SELECT 
  user_id,
  amount_uni,
  created_at,
  description,
  type
FROM transactions 
WHERE type = 'FARMING_REWARD' 
  AND created_at >= NOW() - INTERVAL '1 hour'
ORDER BY created_at DESC 
LIMIT 20;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∞—Ä–º–µ—Ä–æ–≤
SELECT 
  id,
  balance_uni,
  uni_deposit_amount,
  uni_farming_rate,
  uni_farming_active,
  uni_farming_last_update
FROM users 
WHERE uni_farming_active = true
LIMIT 10;
```

---

## üö® –°–¢–ê–¢–£–° –û–ë–ù–û–í–õ–ï–ù–ò–ô

**07:24 UTC** - –ù–∞—á–∞–ªo —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ  
**07:25 UTC** - –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –∑–∞–≤–µ—Ä—à–µ–Ω, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è  
**07:26 UTC** - –ü–æ–¥–æ–∑—Ä–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–±–ª–µ–º—É –≤ frontend –∏–ª–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö  

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –∞–Ω–∞–ª–∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π