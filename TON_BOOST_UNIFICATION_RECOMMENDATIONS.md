# üí° –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è TON Boost —Å UNI Farming

**–î–∞—Ç–∞:** 14 –∏—é–ª—è 2025  
**–ê–≤—Ç–æ—Ä:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞—É–¥–∏—Ç–æ—Ä UniFarm  
**–û—Å–Ω–æ–≤–∞–Ω–∏–µ:** –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞—É–¥–∏—Ç–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–µ–ø–æ–∑–∏—Ç–æ–≤  

---

## üìä –ê–Ω–∞–ª–∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–∞—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Å UNI Farming - **–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ** —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è:
- ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–µ—Ä—å —Å—Ä–µ–¥—Å—Ç–≤
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ** (~20-30 —Å—Ç—Ä–æ–∫)

```typescript
// modules/boost/service.ts - purchaseWithInternalWallet()
// –°—Ç—Ä–æ–∫–∞ ~360
const result = await TonFarmingRepository.activateBoost(
  user.id,
  requiredAmount,  // –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä —Å—É–º–º—ã
  boost_package_id
);

// modules/boost/TonFarmingRepository.ts - activateBoost()
// –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ –∑–∞–º–µ–Ω—ã
async activateBoost(userId: number, amount: number, packageId: number) {
  const existing = await this.getByUserId(userId);
  
  const newBalance = existing 
    ? existing.farming_balance + amount  // –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ
    : amount;                            // –ü–µ—Ä–≤—ã–π –¥–µ–ø–æ–∑–∏—Ç
    
  // –û–±–Ω–æ–≤–∏—Ç—å farming_balance —Å —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º
}
```

### 2. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏ –≤–Ω–∏–º–∞–Ω–∏—è**

#### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Å–º–µ—à–∏–≤–∞–Ω–∏—è —Å—Ç–∞–≤–æ–∫
- UNI Farming: –µ–¥–∏–Ω–∞—è —Å—Ç–∞–≤–∫–∞ 1% –¥–ª—è –≤—Å–µ—Ö
- TON Boost: —Ä–∞–∑–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ —Å—Ç–∞–≤–∫–∏ (0.5%, 1%, 1.5%, 2%)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∑–≤–µ—à–µ–Ω–Ω—É—é —Å—Ä–µ–¥–Ω—é—é —Å—Ç–∞–≤–∫—É:
```typescript
// –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞ —Å—Ä–µ–¥–Ω–µ–≤–∑–≤–µ—à–µ–Ω–Ω–æ–π —Å—Ç–∞–≤–∫–∏
const weightedRate = (oldBalance * oldRate + newAmount * newRate) / 
                    (oldBalance + newAmount);
```

#### ‚ö†Ô∏è –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- 64 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –∏–º–µ—é—Ç –ø–∞–∫–µ—Ç—ã
- –ù—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö —Ç–µ–∫—É—â–∏–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –±–∞–ª–∞–Ω—Å–æ–≤:
```sql
-- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞
UPDATE ton_farming_data tfd
SET farming_balance = (
  SELECT SUM(amount) 
  FROM transactions 
  WHERE user_id = tfd.user_id 
  AND type = 'BOOST_PURCHASE'
)
WHERE EXISTS (
  SELECT 1 FROM transactions 
  WHERE user_id = tfd.user_id 
  AND type = 'BOOST_PURCHASE'
);
```

### 3. **–£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –ø–æ–ª–Ω–æ–π —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏**

#### üìå –ï–¥–∏–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–µ–ø–æ–∑–∏—Ç–æ–≤
```sql
-- –í–∞—Ä–∏–∞–Ω—Ç: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω—É —Ç–∞–±–ª–∏—Ü—É –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ñ–∞—Ä–º–∏–Ω–≥–∞
CREATE TABLE farming_deposits (
  id UUID PRIMARY KEY,
  user_id INTEGER,
  farming_type ENUM('UNI', 'TON'),
  amount DECIMAL(20,9),
  rate DECIMAL(10,9),
  created_at TIMESTAMP
);
```

#### üìå Metadata –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
```typescript
// –î–æ–±–∞–≤–∏—Ç—å –≤ metadata –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–∞–∫–µ—Ç–µ
metadata: {
  original_type: 'TON_BOOST_PURCHASE',
  boost_package_id: packageId,
  package_name: packageName,
  rate: packageRate,
  cumulative_balance: newBalance  // –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
}
```

### 4. **–ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è**

| –≠—Ç–∞–ø | –î–µ–π—Å—Ç–≤–∏–µ | –í—Ä–µ–º—è |
|------|----------|-------|
| 1 | –ë—ç–∫–∞–ø ton_farming_data | 5 –º–∏–Ω |
| 2 | –ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É activateBoost() | 15 –º–∏–Ω |
| 3 | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ dev | 30 –º–∏–Ω |
| 4 | –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –±–∞–ª–∞–Ω—Å–æ–≤ | 10 –º–∏–Ω |
| 5 | –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ production | 5 –º–∏–Ω |

### 5. **–¢–µ—Å—Ç–æ–≤—ã–µ –∫–µ–π—Å—ã**

```typescript
// Test 1: –ü–µ—Ä–≤–∞—è –ø–æ–∫—É–ø–∫–∞
user.balance = 100 TON
purchase(5 TON) ‚Üí farming_balance = 5 TON

// Test 2: –í—Ç–æ—Ä–∞—è –ø–æ–∫—É–ø–∫–∞
purchase(10 TON) ‚Üí farming_balance = 15 TON

// Test 3: –ù–∞—á–∏—Å–ª–µ–Ω–∏—è
expectedIncome = 15 * 0.015 / 288 = 0.00078125 TON/—Ü–∏–∫–ª
```

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –†–∏—Å–∫ 1: –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –≤—ã—Å–æ–∫–∏–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –±–æ–ª—å—à–∏–º–∏ –±–∞–ª–∞–Ω—Å–∞–º–∏ –ø–æ–ª—É—á–∞—Ç –±–æ–ª—å—à–µ
- **–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–æ–≥–∏–∫–µ UNI

### –†–∏—Å–∫ 2: –ü—É—Ç–∞–Ω–∏—Ü–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–∞–≤–∫–∞–º–∏
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞–∫ —Å—á–∏—Ç–∞—Ç—å –¥–æ—Ö–æ–¥ –ø—Ä–∏ —Ä–∞–∑–Ω—ã—Ö –ø–∞–∫–µ—Ç–∞—Ö?
- **–†–µ—à–µ–Ω–∏–µ 1:** –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞–≤–∫–∞ (–∫–∞–∫ UNI)
- **–†–µ—à–µ–Ω–∏–µ 2:** –°—Ä–µ–¥–Ω–µ–≤–∑–≤–µ—à–µ–Ω–Ω–∞—è —Å—Ç–∞–≤–∫–∞
- **–†–µ—à–µ–Ω–∏–µ 3:** –ü–æ—Å–ª–µ–¥–Ω—è—è –∫—É–ø–ª–µ–Ω–Ω–∞—è —Å—Ç–∞–≤–∫–∞

### –†–∏—Å–∫ 3: –û–±—Ä–∞—Ç–Ω–∞—è –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–†–µ—à–µ–Ω–∏–µ:** –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

---

## üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —ç—Ñ—Ñ–µ–∫—Ç

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- User 74: –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ 38 TON (60.3% –æ—Ç –ø–æ—Ç–µ—Ä—å)
- –û–±—â–∏–π —ç—Ñ—Ñ–µ–∫—Ç: ~500-1000 TON –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

### –î–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:
- ‚úÖ –ü–æ–≤—ã—à–µ–Ω–∏–µ –¥–æ–≤–µ—Ä–∏—è
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–µ–ø–æ–∑–∏—Ç–æ–≤ (–Ω–µ—Ç —Å—Ç—Ä–∞—Ö–∞ –ø–æ—Ç–µ—Ä—å)
- ‚úÖ –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è –º–æ–¥–µ–ª—å

---

## üéØ –§–∏–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–†–ï–ö–û–ú–ï–ù–î–£–Æ –†–ï–ê–õ–ò–ó–û–í–ê–¢–¨** –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–µ –¢–ó —Å —É—á–µ—Ç–æ–º:

1. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:** –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ —Ç–µ–∫—É—â–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
2. **–í–∞–∂–Ω–æ:** –†–µ—à–∏—Ç—å –≤–æ–ø—Ä–æ—Å —Å–æ —Å—Ç–∞–≤–∫–∞–º–∏ (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è vs —Å—Ä–µ–¥–Ω–µ–≤–∑–≤–µ—à–µ–Ω–Ω–∞—è)
3. **–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ:** –î–æ–±–∞–≤–∏—Ç—å UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞
4. **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:** –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –µ–¥–∏–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –¥–µ–ø–æ–∑–∏—Ç–æ–≤

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –≥–∏–±–∫–æ—Å—Ç—å):
–°–æ–∑–¥–∞—Ç—å —Ä–µ–∂–∏–º –≤—ã–±–æ—Ä–∞ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ:
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –±–∞–ª–∞–Ω—Å—É (–Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ)
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø–∞–∫–µ—Ç (—Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º –æ—Å—Ç–∞—Ç–∫–∞)

–≠—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –≥–∏–±–∫–æ—Å—Ç—å –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

**–í—Ä–µ–º—è –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é:** 1-2 —á–∞—Å–∞  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è  
**–†–∏—Å–∫–∏:** –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏  
**–≠—Ñ—Ñ–µ–∫—Ç:** –í—ã—Å–æ–∫–∏–π (–≤–æ–∑–≤—Ä–∞—Ç –¥–æ–≤–µ—Ä–∏—è + —Å—Ä–µ–¥—Å—Ç–≤)