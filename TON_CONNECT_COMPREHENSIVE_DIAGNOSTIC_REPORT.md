# üîç –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ò–ô –û–¢–ß–Å–¢: –ü–†–û–ë–õ–ï–ú–ê –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø TON –ö–û–®–ï–õ–¨–ö–ê

**–î–∞—Ç–∞**: 19 —è–Ω–≤–∞—Ä—è 2025  
**–í—Ä–µ–º—è**: 9:20 UTC  
**–°—Ç–∞—Ç—É—Å**: üö® –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê  
**–ü—Ä–æ–±–ª–µ–º–∞**: "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—é –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ TON –ö–æ—à–µ–ª—å–∫—É"

---

## üì∏ **–ê–ù–ê–õ–ò–ó –°–ö–†–ò–ù–®–û–¢–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø**

### **‚ùå –û—à–∏–±–∫–∞ –≤ Telegram Mini App:**
```
–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—é –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è 
–∫ TON –ö–æ—à–µ–ª—å–∫—É. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ —Å–ª—É–∂–±—É 
–ø–æ–¥–¥–µ—Ä–∂–∫–∏ —ç—Ç–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
```

**–ö–æ–Ω—Ç–µ–∫—Å—Ç**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫ –≤ —Ä–∞–∑–¥–µ–ª–µ "Wallet" –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è UniFarm.

---

## üîß **–¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –°–ò–°–¢–ï–ú–´**

### **‚úÖ 1. –°–ï–†–í–ï–† –ò BACKEND**

```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
‚úÖ Server Health: {"status":"ok","timestamp":"2025-07-19T09:07:39.222Z"}
‚úÖ Port 3000: –ê–∫—Ç–∏–≤–µ–Ω –∏ –æ—Ç–≤–µ—á–∞–µ—Ç
‚úÖ API Endpoints: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã
```

### **‚úÖ 2. TON CONNECT –ú–ê–ù–ò–§–ï–°–¢**

```json
// client/public/tonconnect-manifest.json
{
  "url": "https://uni-farm-connect-aab49267.replit.app",
  "name": "UniFarm", 
  "iconUrl": "https://uni-farm-connect-aab49267.replit.app/assets/unifarm-icon.svg",
  "termsOfUseUrl": "https://uni-farm-connect-aab49267.replit.app/terms",
  "privacyPolicyUrl": "https://uni-farm-connect-aab49267.replit.app/privacy"
}
```

**‚úÖ –ú–∞–Ω–∏—Ñ–µ—Å—Ç –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω**

### **‚úÖ 3. –ê–î–ú–ò–ù–°–ö–ò–ô –ö–û–®–ï–õ–Å–ö**

```typescript
// config/tonBoostPayment.ts
TON_BOOST_RECEIVER_ADDRESS = 'UQBlrUfJMIlAcyYzttyxV2xrrvaHHIKEKeetGZbDoitTRWT8'

// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
VITE_TON_BOOST_RECEIVER_ADDRESS=UQBlrUfJMIlAcyYzttyxV2xrrvaHHIKEKeetGZbDoitTRWT8
TON_BOOST_RECEIVER_ADDRESS=UQBlrUfJMIlAcyYzttyxV2xrrvaHHIKEKeetGZbDoitTRWT8
```

**‚úÖ –ê–¥–º–∏–Ω—Å–∫–∏–π –∞–¥—Ä–µ—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**

---

## üêõ **–û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´**

### **‚ùå 1. –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø REACT –û–®–ò–ë–ö–ê**

```javascript
// –ò–∑ WebView Console Logs:
{"message":"TypeError: null is not an object (evaluating 'U.current.useState')","type":"error"}
```

**–î–∏–∞–≥–Ω–æ–∑**: React —Ö—É–∫–∏ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, —á—Ç–æ –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å TON Connect UI.

### **‚ùå 2. VITE WEBSOCKET –ü–†–û–ë–õ–ï–ú–´**

```javascript
["[vite] failed to connect to websocket (Error: WebSocket closed without opened.)"]
```

**–î–∏–∞–≥–Ω–æ–∑**: –ü—Ä–æ–±–ª–µ–º—ã —Å hot-reload –º–æ–≥—É—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é TonConnectUIProvider.

### **‚ùå 3. –ù–ï–°–û–û–¢–í–ï–¢–°–¢–í–ò–ï –î–û–ú–ï–ù–ê**

```typescript
// App.tsx (—Å—Ç—Ä–æ–∫–∞ 290)
manifestUrl="https://uni-farm-connect-aab49267.replit.app/tonconnect-manifest.json"

// vs —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ
"url": "https://uni-farm-connect-aab49267.replit.app"
```

**‚úÖ –î–æ–º–µ–Ω—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç** - —ç—Ç–æ –ù–ï –ø—Ä–æ–±–ª–µ–º–∞.

---

## üîç **–ö–û–†–ù–ï–í–´–ï –ü–†–ò–ß–ò–ù–´ –ü–†–û–ë–õ–ï–ú–´**

### **üéØ –ì–õ–ê–í–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: React useState Error**

```javascript
TypeError: null is not an object (evaluating 'U.current.useState')
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ**:
1. **React Context –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω** –¥–æ–ª–∂–Ω—ã–º –æ–±—Ä–∞–∑–æ–º
2. **TonConnectUIProvider** –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
3. **useTonConnectUI hook** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null
4. **TON Connect –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ** –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

### **üîÑ –¶–µ–ø–æ—á–∫–∞ –æ—à–∏–±–æ–∫:**

```
1. React useState –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
   ‚Üì
2. TonConnectUIProvider –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
   ‚Üì  
3. tonConnectUI === null –≤ UserContext
   ‚Üì
4. connectTonWallet() –ø–æ–ª—É—á–∞–µ—Ç null –æ–±—ä–µ–∫—Ç
   ‚Üì
5. openModal() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ null
   ‚Üì
6. Telegram –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç generic –æ—à–∏–±–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```

---

## üìä **–ê–ù–ê–õ–ò–ó –õ–û–ì–û–í –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø**

### **‚úÖ –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã:**
```javascript
["[telegramService] Telegram WebApp —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω"]
["[UniFarm] –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."]  
["[UniFarm] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–æ"]
["[UserContext] refreshBalance —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–∏–ª –±–∞–ª–∞–Ω—Å"]
```

### **‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏:**
```javascript
// React –æ—à–∏–±–∫–∏
{"message":"TypeError: null is not an object (evaluating 'U.current.useState')","type":"error"}

// WebSocket –ø—Ä–æ–±–ª–µ–º—ã  
["[vite] failed to connect to websocket"]

// Unhandled Promise Rejections
{"type":"unhandledrejection"}
```

---

## üõ†Ô∏è **–†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ï –†–ï–®–ï–ù–ò–Ø**

### **üöÄ –í–∞—Ä–∏–∞–Ω—Ç 1: React Component Cleanup (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)**

**–ü—Ä–æ–±–ª–µ–º–∞**: React —Ö—É–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç –∏–ª–∏ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è.

**–†–µ—à–µ–Ω–∏–µ**:
```typescript
// –û—á–∏—Å—Ç–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ React –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
// –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ TonConnectUIProvider –Ω–µ –≤–ª–æ–∂–µ–Ω –≤ –¥—Ä—É–≥–æ–π Provider
```

### **üîÑ –í–∞—Ä–∏–∞–Ω—Ç 2: TonConnect Reinitialization**

**–ü—Ä–æ–±–ª–µ–º–∞**: TonConnectUI –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ.

**–†–µ—à–µ–Ω–∏–µ**:
```typescript
// –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ TonConnect
// –†–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–µ
// –î–æ–±–∞–≤–∏—Ç—å fallback –º–µ—Ö–∞–Ω–∏–∑–º
```

### **üì° –í–∞—Ä–∏–∞–Ω—Ç 3: Manifest URL Update**

**–ü—Ä–æ–±–ª–µ–º–∞**: –í–æ–∑–º–æ–∂–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞.

**–†–µ—à–µ–Ω–∏–µ**:
```typescript
// –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞
// –û–±–Ω–æ–≤–∏—Ç—å –∫—ç—à-–∑–∞–≥–æ–ª–æ–≤–∫–∏
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

---

## üéØ **–ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø**

### **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –£–†–û–í–ï–ù–¨:**
1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å React useState –æ—à–∏–±–∫—É** - –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å TonConnectUIProvider** - –æ—Å–Ω–æ–≤–∞ TON Connect
3. **–£–±–µ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ React Context** - –≤–ª–∏—è–µ—Ç –Ω–∞ –≤—Å–µ —Ö—É–∫–∏

### **–í–´–°–û–ö–ò–ô –£–†–û–í–ï–ù–¨:**
4. –î–æ–±–∞–≤–∏—Ç—å error boundaries –¥–ª—è TON Connect
5. –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
6. –î–æ–±–∞–≤–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –ª–æ–≥–∏

---

## üìà **–ü–†–û–ì–ù–û–ó –†–ï–®–ï–ù–ò–Ø**

### **–ü—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ React –æ—à–∏–±–∫–∏:**
- **90% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å** - –ü–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ TON Connect
- **85% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å** - –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ Telegram –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **80% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å** - –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∫–æ—à–µ–ª—å–∫–∞

### **–í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- **React useState fix**: 30-60 –º–∏–Ω—É—Ç
- **TON Connect validation**: 15-30 –º–∏–Ω—É—Ç  
- **–ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: 30 –º–∏–Ω—É—Ç

---

## üîç **–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ù–ê–•–û–î–ö–ò**

### **‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**
- Backend API endpoints
- –ê–¥–º–∏–Ω—Å–∫–∏–π –∫–æ—à–µ–ª—ë–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- TON Connect –º–∞–Ω–∏—Ñ–µ—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω
- Telegram Mini App –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- User authentication –∏ –±–∞–ª–∞–Ω—Å—ã

### **‚ùå –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- React —Ö—É–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è  
- TonConnectUI —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- Error handling –¥–ª—è TON Connect

---

## ‚úÖ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

**–ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê**: React useState –æ—à–∏–±–∫–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é TonConnectUIProvider, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞.

**–ù–ï –°–í–Ø–ó–ê–ù–û –°**:
- –ê–¥–º–∏–Ω—Å–∫–∏–º –∫–æ—à–µ–ª—å–∫–æ–º (–Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)
- TON Connect –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–º (–¥–æ—Å—Ç—É–ø–µ–Ω –∏ –≤–∞–ª–∏–¥–µ–Ω)
- Backend —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é (—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é)

**–°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ TonConnect –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

---

*–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∞ –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.*