# –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢ - –ú–ò–ì–†–ê–¶–ò–Ø –ù–ê SUPABASE API –ó–ê–í–ï–†–®–ï–ù–ê

**–î–∞—Ç–∞:** 15 –∏—é–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ú–ò–ì–†–ê–¶–ò–Ø 100% –ó–ê–í–ï–†–®–ï–ù–ê

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢ –ú–ò–ì–†–ê–¶–ò–ò

**–ü–û–õ–ù–ê–Ø –ú–ò–ì–†–ê–¶–ò–Ø –° POSTGRESQL –ù–ê SUPABASE API –í–´–ü–û–õ–ù–ï–ù–ê –£–°–ü–ï–®–ù–û**

### ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã:
- **core/supabase.ts** - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç Supabase
- **modules/auth/service.ts** - –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **modules/users/repository.ts** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏  
- **modules/farming/service.ts** - –§–∞—Ä–º–∏–Ω–≥ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **modules/referral/service.ts** - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- **modules/airdrop/service.ts** - Airdrop —Å–∏—Å—Ç–µ–º–∞
- **modules/dailyBonus/service.ts** - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã
- **modules/admin/service.ts** - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- **modules/wallet/service.ts** - –ö–æ—à–µ–ª–µ–∫ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

### ‚úÖ –û–∫—Ä—É–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–µ–Ω–æ:
- **–£–¥–∞–ª–µ–Ω–æ 8 —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö PostgreSQL –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö** –∏–∑ process.env
- **–°–æ–∑–¥–∞–Ω —á–∏—Å—Ç—ã–π .env —Ñ–∞–π–ª** —Ç–æ–ª—å–∫–æ —Å Supabase –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- **–í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã** –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Supabase API
- **–£–¥–∞–ª–µ–Ω—ã –ø–∞–∫–µ—Ç—ã** @neondatabase/serverless, pg, drizzle-orm

### ‚úÖ –°–µ—Ä–≤–µ—Ä —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω:
```
‚úÖ UniFarm —Å–µ—Ä–≤–µ—Ä —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω
üöÄ API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://0.0.0.0:3000
üì° API –¥–æ—Å—Ç—É–ø–µ–Ω: http://0.0.0.0:3000/api/v2/
üîå WebSocket —Å–µ—Ä–≤–µ—Ä –∞–∫—Ç–∏–≤–µ–Ω –Ω–∞ ws://0.0.0.0:3000/ws
‚úÖ Supabase database connection active
‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ñ–∞—Ä–º–∏–Ω–≥ –¥–æ—Ö–æ–¥–∞ –∞–∫—Ç–∏–≤–µ–Ω (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
```

## üìä –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
- **–°–¢–ê–†–ê–Ø:** PostgreSQL + Drizzle ORM + db.select()/insert()
- **–ù–û–í–ê–Ø:** Supabase API + @supabase/supabase-js + supabase.from()

### –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
```typescript
// core/supabase.ts
import { createClient } from '@supabase/supabase-js';
export const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);
```

### –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Supabase API:
```typescript
// –°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± (—É–¥–∞–ª–µ–Ω):
const users = await db.select().from(usersTable);

// –ù–æ–≤—ã–π —Å–ø–æ—Å–æ–± (—Ä–∞–±–æ—Ç–∞–µ—Ç):
const { data: users } = await supabase.from('users').select('*');
```

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. –ò–º–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
- **–ü—Ä–æ–±–ª–µ–º–∞:** `import { databaseConfig }` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- **–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ `import { supabaseConfig }`

### 2. –≠–∫—Å–ø–æ—Ä—Ç —Å–µ—Ä–≤–∏—Å–æ–≤:
- **–ü—Ä–æ–±–ª–µ–º–∞:** `MissionsService` vs `MissionService` 
- **–†–µ—à–µ–Ω–∏–µ:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞–∑–≤–∞–Ω–∏—è —ç–∫—Å–ø–æ—Ä—Ç–æ–≤

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É PostgreSQL –∏ Supabase –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- **–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞, —Ç–æ–ª—å–∫–æ SUPABASE_URL/SUPABASE_KEY

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase:
```bash
[SUCCESS] Supabase –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
[SUCCESS] –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω, –ø–æ–ª—É—á–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π: 1
[SUCCESS] –°—Ç–∞—Ä—ã–µ PostgreSQL –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω—ã
```

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞:
- ‚úÖ –°–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ä—Ç—É–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ API endpoints –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ
- ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ñ–∞—Ä–º–∏–Ω–≥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Supabase –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ

## üìã –ê–ö–¢–£–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï –û–ö–†–£–ñ–ï–ù–ò–Ø

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:
```env
SUPABASE_URL=https://wunnsvicbebssrjqedor.supabase.co
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
TELEGRAM_BOT_TOKEN=7980427501:AAHdia3LusU9dk2aRvhXgmj9Ozo08nR0Gug
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:
```env
NODE_ENV=production
PORT=3000
```

## ‚ö†Ô∏è –§–ò–ù–ê–õ–¨–ù–´–ï –ò–ù–°–¢–†–£–ö–¶–ò–ò

### –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—á–∏—Å—Ç–∫–∏ —É–¥–∞–ª–∏—Ç—å –∏–∑ Replit Secrets:
- DATABASE_URL
- PGHOST, PGUSER, PGPASSWORD, PGPORT, PGDATABASE
- DATABASE_PROVIDER, USE_NEON_DB

### –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ production:
```bash
node stable-server.js
```

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ú–ò–ì–†–ê–¶–ò–Ø –ù–ê SUPABASE API –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–ê**

### –î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ:
- ‚úÖ **100% Supabase API compliance** - –Ω–µ—Ç PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –≤—Å–µ —á–µ—Ä–µ–∑ core/supabase.ts
- ‚úÖ **–ß–∏—Å—Ç–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ** - —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- ‚úÖ **–ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –≤—Å–µ –º–æ–¥—É–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å Supabase

### –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫:
- Production deployment
- –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é —á–µ—Ä–µ–∑ Supabase
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π UniFarm

**–†–ï–ó–£–õ–¨–¢–ê–¢: –ú–ò–ì–†–ê–¶–ò–Ø –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–ê** üöÄ