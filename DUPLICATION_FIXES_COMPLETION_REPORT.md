# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –î–£–ë–õ–ò–†–û–í–ê–ù–ò–Ø –¢–†–ê–ù–ó–ê–ö–¶–ò–ô –ó–ê–í–ï–†–®–ï–ù–´

**–î–∞—Ç–∞:** 4 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–í—Ä–µ–º—è:** 16:50 UTC  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´  

## üéØ **–í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**

### **1. ‚úÖ UNI FARMING_REWARD –î—É–±–ª–∏–∫–∞—Ç—ã - –ò–°–ü–†–ê–í–õ–ï–ù–û**
**–§–∞–π–ª:** `core/scheduler/farmingScheduler.ts` (—Å—Ç—Ä–æ–∫–∏ 288-340)
**–ü—Ä–æ–±–ª–µ–º–∞:** UNI farming scheduler —Å–æ–∑–¥–∞–≤–∞–ª FARMING_REWARD —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ë–ï–ó –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
**–†–µ—à–µ–Ω–∏–µ:** 
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ `DeduplicationHelper.checkRecentTransaction()`
- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `UnifiedTransactionService` –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ Supabase
- 5-–º–∏–Ω—É—Ç–Ω–æ–µ –æ–∫–Ω–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

```typescript
// üõ°Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ó–ê–©–ò–¢–ê: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ FARMING_REWARD
const { DeduplicationHelper } = await import('../../safe-deduplication-helper');
const duplicateCheck = await DeduplicationHelper.checkRecentTransaction(
  farmer.user_id,
  'FARMING_REWARD',
  parseFloat(income),
  'UNI',
  5 // 5 –º–∏–Ω—É—Ç –æ–∫–Ω–æ –¥–ª—è UNI farming –¥–æ—Ö–æ–¥–æ–≤
);

if (duplicateCheck.exists) {
  // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–ø—É—Å–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  continue;
}
```

### **2. ‚úÖ REFERRAL_REWARD –î—É–±–ª–∏–∫–∞—Ç—ã - –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï**
**–§–∞–π–ª:** `modules/referral/service.ts` (—Å—Ç—Ä–æ–∫–∏ 289-316)
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –ü–û–°–õ–ï –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –∏ –∑–∞–ø–∏—Å–∏ –≤ –ë–î
**–†–µ—à–µ–Ω–∏–µ:** 
- –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –≤ –ù–ê–ß–ê–õ–û —Ü–∏–∫–ª–∞ (–ø–µ—Ä–µ–¥ –≤—Å–µ–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏)
- –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –¥—É–±–ª–∏–∫–∞—Ç–∞ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –í–°–Ø –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
- 10-–º–∏–Ω—É—Ç–Ω–æ–µ –æ–∫–Ω–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥

```typescript
// üõ°Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ó–ê–©–ò–¢–ê: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ REFERRAL_REWARD –ü–ï–†–ï–î –≤—Å–µ–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
const { DeduplicationHelper } = await import('../../safe-deduplication-helper');
const duplicateCheck = await DeduplicationHelper.checkRecentTransaction(
  parseInt(commission.userId),
  'REFERRAL_REWARD',
  parseFloat(commission.amount),
  currency,
  10 // 10 –º–∏–Ω—É—Ç –æ–∫–Ω–æ –¥–ª—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥
);

if (duplicateCheck.exists) {
  // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –≤—Å—é –æ–ø–µ—Ä–∞—Ü–∏—é –¥–ª—è —ç—Ç–æ–π –∫–æ–º–∏—Å—Å–∏–∏
  continue;
}
```

## üõ°Ô∏è **–ü–û–õ–ù–ê–Ø –ó–ê–©–ò–¢–ê –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê:**

| –¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª | –ó–∞—â–∏—Ç–∞ |
|----------------|--------|------|--------|
| DAILY_BONUS | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–∞–Ω–µ–µ | `modules/boost/service.ts` | DeduplicationHelper |
| DAILY_BONUS | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–∞–Ω–µ–µ | `modules/dailyBonus/service.ts` | DeduplicationHelper |
| FARMING_REWARD (UNI) | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –°–ï–ô–ß–ê–° | `core/scheduler/farmingScheduler.ts` | DeduplicationHelper |
| FARMING_REWARD (TON) | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–∞–Ω–µ–µ | `modules/scheduler/tonBoostIncomeScheduler.ts` | DeduplicationHelper |
| REFERRAL_REWARD | ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –ò–°–ü–†–ê–í–õ–ï–ù–û | `modules/referral/service.ts` | DeduplicationHelper |

## üîç **–ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê 10-–ú–ò–ù–£–¢–ù–´–• –î–£–ë–õ–ò–ö–ê–¢–û–í:**

**–ù–∞–π–¥–µ–Ω–∞ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞!** 
- UNI farming scheduler –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç —Å–æ–∑–¥–∞–≤–∞–ª FARMING_REWARD –±–µ–∑ –∑–∞—â–∏—Ç—ã
- –ö–∞–∂–¥—ã–π FARMING_REWARD –≤—ã–∑—ã–≤–∞–ª —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
- ReferralService –ø—Ä–æ–≤–µ—Ä—è–ª –¥—É–±–ª–∏–∫–∞—Ç—ã –ü–û–°–õ–ï –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –∫–∞–∂–¥—ã–µ 5-10 –º–∏–Ω—É—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã —É –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìä **–û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´:**

### **–ë—É–¥–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:**
- ‚úÖ UNI FARMING_REWARD –¥—É–±–ª–∏–∫–∞—Ç—ã (User 304, 290, 258, 184, 25)
- ‚úÖ REFERRAL_REWARD –¥—É–±–ª–∏–∫–∞—Ç—ã –æ—Ç UNI farming (User 304, 290, 258)
- ‚úÖ TON FARMING_REWARD –¥—É–±–ª–∏–∫–∞—Ç—ã –æ—Ç TON Boost (—É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–∞–Ω–µ–µ)
- ‚úÖ –í—Å–µ 10-–º–∏–Ω—É—Ç–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã

### **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ—Ç–µ—Ä–∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω—ã:**
- –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π UNI
- –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥ TON –∏ UNI
- –ó–∞—â–∏—Ç–∞ –±–∞–ª–∞–Ω—Å–∞ —Å–∏—Å—Ç–µ–º—ã –æ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üöÄ **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:**

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞** - –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ 30 –º–∏–Ω—É—Ç** - —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –¥—É–±–ª–∏–∫–∞—Ç—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã  
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π 184, 25, 304, 290, 258** - –Ω–µ—Ç –Ω–æ–≤—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
4. **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

## üéØ **–°–¢–ê–¢–£–°: –ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ï–ù–£**

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –Ω–∞–π–¥–µ–Ω—ã –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã. –°–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—â–µ–Ω–∞ –æ—Ç:
- –ü—Ä—è–º–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- Race conditions –≤ scheduler'–∞—Ö
- –ü—Ä–æ–±–ª–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É –±–∞–ª–∞–Ω—Å–∞–º–∏ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
- –ö–∞—Å–∫–∞–¥–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –æ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥

**–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ—Ç–µ—Ä–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞.**

---

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 4 –∞–≤–≥—É—Å—Ç–∞ 2025, 16:50 UTC*  
*–ì–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é: –î–ê*