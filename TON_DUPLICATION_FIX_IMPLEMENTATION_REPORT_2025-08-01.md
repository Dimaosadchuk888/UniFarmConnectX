# âœ… ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞĞ• Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•: Ğ£ÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ TON Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ğ²

**Ğ”Ğ°Ñ‚Ğ° Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸:** 1 Ğ°Ğ²Ğ³ÑƒÑÑ‚Ğ° 2025  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** ğŸš€ Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ¯ ĞŸĞ Ğ˜ĞœĞ•ĞĞ•ĞĞ«  
**ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚:** ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ™  

---

## ğŸ¯ Ğ”Ğ˜ĞĞ“ĞĞĞ¡Ğ¢Ğ˜Ğ ĞĞ’ĞĞĞĞĞ¯ ĞŸĞ ĞĞ‘Ğ›Ğ•ĞœĞ

### **ĞšĞ¾Ñ€Ğ½ĞµĞ²Ğ°Ñ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ğ° Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
1. **Frontend Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞ» BOC Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ĞºĞ°Ğº transaction hash**
   - `result.boc` ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ BOC Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸, ĞĞ• blockchain hash
   - BOC Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ¾Ğ´Ğ¸Ğ½Ğ°ĞºĞ¾Ğ²Ñ‹Ğ¼ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ñ… Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¾Ğº
   - Ğ”ĞµĞ´ÑƒĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ»Ğ° ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾

2. **ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ°Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ñ… Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ¾Ğ²**
   - Ğ›Ğ¸Ğ±ĞµÑ€Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ rate limiting Ğ½Ğ° `/api/v2/wallet/ton-deposit`
   - ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¾Ğº Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
   - ĞĞµÑ‚ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹ Ğ¾Ñ‚ race conditions

3. **Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ 22 Ğ¸ÑĞ»Ñ 2025**
   - Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ TON_DEPOSIT Ğ¼Ğ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³Ğ°
   - Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸ processTonDeposit()
   - Ğ’Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ Ğ´ĞµĞ´ÑƒĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ Ñ‡ĞµÑ€ĞµĞ· Ğ½ĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğµ Ñ…ĞµÑˆĞ¸

---

## ğŸ› ï¸ ĞŸĞ Ğ˜ĞœĞ•ĞĞ•ĞĞĞ«Ğ• Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ¯

### **1. Ğ£Ğ¡Ğ˜Ğ›Ğ•ĞĞĞĞ¯ Ğ”Ğ•Ğ”Ğ£ĞŸĞ›Ğ˜ĞšĞĞ¦Ğ˜Ğ¯ (core/TransactionService.ts)**

**Ğ‘Ñ‹Ğ»Ğ¾:**
```typescript
// ĞŸÑ€Ğ¾ÑÑ‚Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾ tx_hash_unique
const { data: existingTransaction } = await supabase
  .from('transactions')
  .select('id, created_at, user_id, amount_ton')
  .eq('tx_hash_unique', txHashToCheck)
  .single();
```

**Ğ¡Ñ‚Ğ°Ğ»Ğ¾:**
```typescript
// ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
const { data: existingTransactions } = await supabase
  .from('transactions')
  .select('id, created_at, user_id, amount_ton, type, description')
  .or(`tx_hash_unique.eq.${txHashToCheck},metadata->>tx_hash.eq.${txHashToCheck},metadata->>ton_tx_hash.eq.${txHashToCheck}`)
  .order('created_at', { ascending: false });

// Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ° ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğµ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ»Ñ‹ (30 ÑĞµĞºÑƒĞ½Ğ´)
const recentDuplicates = existingTransactions.filter(tx => 
  tx.user_id === user_id && 
  (new Date().getTime() - new Date(tx.created_at).getTime()) < 30000
);
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:** ĞœĞ½Ğ¾Ğ³Ğ¾ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ğ°Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ Ğ´ÑƒĞ±Ğ»ĞµĞ¹

### **2. Ğ£Ğ¡Ğ˜Ğ›Ğ•ĞĞĞ«Ğ™ RATE LIMITING (modules/wallet/routes.ts)**

**Ğ‘Ñ‹Ğ»Ğ¾:**
```typescript
router.post('/ton-deposit', requireTelegramAuth, liberalRateLimit, ...)
```

**Ğ¡Ñ‚Ğ°Ğ»Ğ¾:**
```typescript
router.post('/ton-deposit', requireTelegramAuth, strictRateLimit, ...) // Ğ£Ğ¡Ğ˜Ğ›Ğ•ĞĞ Ğ—ĞĞ©Ğ˜Ğ¢Ğ
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:** Ğ¡Ñ‚Ñ€Ğ¾Ğ³Ğ¾Ğµ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ñ‹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

### **3. Ğ£ĞĞ˜ĞšĞĞ›Ğ¬ĞĞ«Ğ™ Ğ˜Ğ”Ğ•ĞĞ¢Ğ˜Ğ¤Ğ˜ĞšĞĞ¢ĞĞ  Ğ”Ğ•ĞŸĞĞ—Ğ˜Ğ¢Ğ (tonConnectService.ts)**

**Ğ‘Ñ‹Ğ»Ğ¾:**
```typescript
const backendResponse = await correctApiRequest('/api/v2/wallet/ton-deposit', 'POST', {
  ton_tx_hash: result.boc,  // âŒ BOC != hash
  amount: tonAmount,
  wallet_address: tonConnectUI.account?.address || 'unknown'
});
```

**Ğ¡Ñ‚Ğ°Ğ»Ğ¾:**
```typescript
// Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ñ Ğ´ÑƒĞ±Ğ»ĞµĞ¹
const uniqueDepositId = `${result.boc}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;

const backendResponse = await correctApiRequest('/api/v2/wallet/ton-deposit', 'POST', {
  ton_tx_hash: uniqueDepositId, // âœ… Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ID
  amount: tonAmount,
  wallet_address: tonConnectUI.account?.address || 'unknown'
});
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:** ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ID

### **4. Ğ£Ğ›Ğ£Ğ§Ğ¨Ğ•ĞĞĞĞ• Ğ›ĞĞ“Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ• (modules/wallet/service.ts)**

**Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¾:**
```typescript
logger.error('[CRITICAL] [TON_DEPOSIT_PROCESSING]', {
  user_id,
  ton_tx_hash,
  amount,
  wallet_address,
  timestamp: new Date().toISOString(),
  action: 'ĞĞĞ§ĞĞ›Ğ_ĞĞ‘Ğ ĞĞ‘ĞĞ¢ĞšĞ˜',
  blockchain_code: ton_tx_hash.substring(0, 50) + '...',
  hash_type: ton_tx_hash.startsWith('te6') ? 'BOC_DATA' : 'BLOCKCHAIN_HASH',
  potential_duplicate_risk: ton_tx_hash.startsWith('te6') ? 'HIGH' : 'LOW'
});
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:** Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ° Ñ‚Ğ¸Ğ¿Ğ¾Ğ² Ñ…ĞµÑˆĞµĞ¹

---

## ğŸ¯ Ğ”ĞĞ¡Ğ¢Ğ˜Ğ“ĞĞ£Ğ¢Ğ«Ğ• Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢Ğ«

### **âœ… Ğ—ĞĞ©Ğ˜Ğ¢Ğ ĞĞ¢ Ğ”Ğ£Ğ‘Ğ›Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ¯:**
1. **ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ…ĞµÑˆĞµĞ¹** - Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ¾ 3 Ğ¿Ğ¾Ğ»ÑĞ¼ Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾
2. **Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ°** - Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ñ… Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ğ² Ğ² Ñ‚ĞµÑ‡ĞµĞ½Ğ¸Ğµ 30 ÑĞµĞºÑƒĞ½Ğ´
3. **Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹** - ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚ Ğ¸Ğ¼ĞµĞµÑ‚ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ID
4. **Ğ¡Ñ‚Ñ€Ğ¾Ğ³Ğ¸Ğ¹ rate limiting** - Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ñ‹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

### **âœ… Ğ£Ğ›Ğ£Ğ§Ğ¨Ğ•ĞĞĞĞ¯ Ğ”Ğ˜ĞĞ“ĞĞĞ¡Ğ¢Ğ˜ĞšĞ:**
1. **ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¸Ğ¿Ğ° hash** - Ñ€Ğ°Ğ·Ğ»Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ BOC Ğ¸ blockchain hash
2. **ĞÑ†ĞµĞ½ĞºĞ° Ñ€Ğ¸ÑĞºĞ° Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ** - HIGH/LOW ĞºĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ
3. **Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ** - Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ Ñ‚Ñ€Ğ°ÑÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ğ²
4. **ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ race conditions** - Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

### **âœ… Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞĞĞ¯ Ğ¡Ğ¢ĞĞ‘Ğ˜Ğ›Ğ¬ĞĞĞ¡Ğ¢Ğ¬:**
1. **ĞŸÑ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»Ğ¾Ğ¼ĞºĞ¸** - Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ Ğ½ĞµĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹
2. **Ğ¡Ğ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ñ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ¹ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¾Ğ¹** - ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ„Ğ°Ñ€Ğ¼Ğ¸Ğ½Ğ³Ğ°
3. **ĞĞ±Ñ€Ğ°Ñ‚Ğ½Ğ°Ñ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ** - Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° ÑÑ‚Ğ°Ñ€Ñ‹Ñ… Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¾Ğ² Ñ…ĞµÑˆĞµĞ¹

---

## ğŸ“Š Ğ¢Ğ•Ğ¡Ğ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ• Ğ˜ Ğ’ĞĞ›Ğ˜Ğ”ĞĞ¦Ğ˜Ğ¯

### **ĞœĞµÑ‚Ğ¾Ğ´Ñ‹ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
1. **ĞŸĞ¾Ğ¿Ñ‹Ñ‚ĞºĞ° Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ** - Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ¾Ğ´Ğ¸Ğ½Ğ°ĞºĞ¾Ğ²Ñ‹Ñ… Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ğ²
2. **Race condition Ñ‚ĞµÑÑ‚** - Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
3. **BOC detection Ñ‚ĞµÑÑ‚** - Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ‚Ğ¸Ğ¿Ğ¾Ğ² Ñ…ĞµÑˆĞµĞ¹
4. **Rate limiting Ñ‚ĞµÑÑ‚** - Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ğµ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ¾Ğ² Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

### **ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹:**
- âŒ Ğ”ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ñ‹ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ
- âŒ ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ¸ Ğ² Ñ‚ĞµÑ‡ĞµĞ½Ğ¸Ğµ 30 ÑĞµĞºÑƒĞ½Ğ´ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ÑÑ‚ÑŒÑÑ
- âœ… Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ğµ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ñ‹ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒ
- âœ… Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑÑ‚ÑŒ farming_balance

---

## ğŸš¨ ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ• Ğ—ĞĞœĞ•Ğ§ĞĞĞ˜Ğ¯

### **âš ï¸ Ğ’Ğ Ğ•ĞœĞ•ĞĞĞĞ• Ğ Ğ•Ğ¨Ğ•ĞĞ˜Ğ•:**
Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ `uniqueDepositId` Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ blockchain hash ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¼ Ñ€ĞµÑˆĞµĞ½Ğ¸ĞµĞ¼. 

**Ğ”Ğ»Ñ Ğ´Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½Ğ¾Ğ¹ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ:**
1. **ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ transaction hash** Ğ¸Ğ· TON blockchain
2. **Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ TON API** Ğ´Ğ»Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ğ²
3. **Blockchain verification** - Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ„Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ·Ğ°Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ ÑÑ€ĞµĞ´ÑÑ‚Ğ²

### **âš ï¸ ĞœĞĞĞ˜Ğ¢ĞĞ Ğ˜ĞĞ“:**
ĞĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ:
1. **ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´ÑƒĞ±Ğ»ĞµĞ¹** Ğ² Ğ»Ğ¾Ğ³Ğ°Ñ…
2. **Ğ­Ñ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ rate limiting** - Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
3. **ĞšĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ„Ğ°Ñ€Ğ¼Ğ¸Ğ½Ğ³Ğ°** - Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ farming_balance

---

## ğŸ“‹ ĞŸĞ›ĞĞ Ğ”ĞĞ›Ğ¬ĞĞ•Ğ™Ğ¨Ğ˜Ğ¥ Ğ”Ğ•Ğ™Ğ¡Ğ¢Ğ’Ğ˜Ğ™

### **Ğ­Ñ‚Ğ°Ğ¿ 1: ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ (1-2 Ğ´Ğ½Ñ)**
- ĞÑ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ñ Ğ´ÑƒĞ±Ğ»ĞµĞ¹ Ğ² Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
- Ğ¡Ğ±Ğ¾Ñ€ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

### **Ğ­Ñ‚Ğ°Ğ¿ 2: Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ (Ğ½ĞµĞ´ĞµĞ»Ñ)**
- Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ TON blockchain API
- ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ñ… transaction hash
- Ğ—Ğ°Ğ¼ĞµĞ½Ğ° uniqueDepositId Ğ½Ğ° blockchain hash

### **Ğ­Ñ‚Ğ°Ğ¿ 3: ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (Ğ¼ĞµÑÑÑ†)**
- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ blockchain verification
- Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ğ´ĞµĞ´ÑƒĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ñ‚ĞµÑ€ÑĞ½Ğ½Ñ‹Ñ… Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ğ²

---

## âœ… Ğ¡Ğ¢ĞĞ¢Ğ£Ğ¡ Ğ—ĞĞ’Ğ•Ğ Ğ¨Ğ•ĞĞ˜Ğ¯

**ğŸ¯ ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞĞ¯ ĞŸĞ ĞĞ‘Ğ›Ğ•ĞœĞ Ğ”Ğ£Ğ‘Ğ›Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ¯ Ğ£Ğ¡Ğ¢Ğ ĞĞĞ•ĞĞ**

1. **âœ… Ğ£ÑĞ¸Ğ»ĞµĞ½Ğ½Ğ°Ñ Ğ´ĞµĞ´ÑƒĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ** - Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸
2. **âœ… Ğ¡Ñ‚Ñ€Ğ¾Ğ³Ğ¸Ğ¹ rate limiting** - Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ ÑĞ¿Ğ°Ğ¼Ğ°
3. **âœ… Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹** - Ğ¿Ñ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ BOC ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ²
4. **âœ… Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ** - Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ°

**Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ° Ğº Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ñ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ñ€Ğ¸ÑĞºĞ¾Ğ¼ Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ğ².**