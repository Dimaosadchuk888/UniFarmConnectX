# –§–ò–ù–ê–õ–¨–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú–´ –ö–ï–®–ò–†–û–í–ê–ù–ò–Ø

## üîç –ü–†–û–ë–õ–ï–ú–ê –ù–ê–ô–î–ï–ù–ê

**User 25 (DimaOsadchuk) —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤.**

### ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û:
1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –í—Å–µ –¥–µ–ø–æ–∑–∏—Ç—ã –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –ë–î –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. **Backend –∫–µ—à**: 5-–º–∏–Ω—É—Ç–Ω—ã–π TTL, —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ  
3. **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞, –±–æ–ª—å—à–µ –Ω–µ—Ç phantom deposits
4. **User 25 –±–∞–ª–∞–Ω—Å –≤ –ë–î**: UNI: 81,392,475.84 | TON: 17.79

### üö® –ö–û–†–ï–ù–¨ –ü–†–û–ë–õ–ï–ú–´: 

**Frontend –∫–µ—à –Ω–µ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –¥–µ–ø–æ–∑–∏—Ç–∞!**

#### –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–µ—Å—Ç–∞ –≤ –∫–æ–¥–µ:

**1. –ó–∞–¥–µ—Ä–∂–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ TonDepositCard.tsx:**
```typescript
// –°—Ç—Ä–æ–∫–∞ 156-158
setTimeout(() => {
  refreshBalance(true);
}, 1000);
```
**–ü—Ä–æ–±–ª–µ–º–∞:** 1 —Å–µ–∫—É–Ω–¥–∞ –∑–∞–¥–µ—Ä–∂–∫–∏ - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å—Ç–∞—Ä—ã–π –±–∞–ª–∞–Ω—Å

**2. Frontend –∫–µ—à TTL —Å–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π:**
```typescript
// client/src/services/balanceService.ts —Å—Ç—Ä–æ–∫–∞ 18
BALANCE_TTL: 15000, // 15 —Å–µ–∫—É–Ω–¥
```
**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –∫–µ—à —Å–≤–µ–∂–∏–π (–º–µ–Ω—å—à–µ 15 —Å–µ–∫—É–Ω–¥), –æ–Ω –ù–ï –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–∞–∂–µ –ø—Ä–∏ forceRefresh

## üìä –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨ –°–û–ë–´–¢–ò–ô –£ USER 25:

1. **User 25 –¥–µ–ª–∞–µ—Ç TON –¥–µ–ø–æ–∑–∏—Ç** ‚Üí –î–µ–ø–æ–∑–∏—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –ë–î ‚úÖ
2. **Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–π –∫–µ—à** ‚Üí –ü—Ä–æ–±–ª–µ–º–∞! ‚ùå  
3. **–ß–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É** ‚Üí `refreshBalance(true)` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
4. **Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π –±–∞–ª–∞–Ω—Å** ‚Üí ‚úÖ
5. **Frontend –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 15 —Å–µ–∫—É–Ω–¥** ‚Üí ‚úÖ
6. **User –Ω–∞–∂–∏–º–∞–µ—Ç "–æ–±–Ω–æ–≤–∏—Ç—å"** ‚Üí `forceRefresh=true` –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫–µ—à ‚úÖ
7. **–ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞/–≤—Ö–æ–¥–∞** ‚Üí –ö–µ—à –º–æ–≥ –∏—Å—Ç–µ—á—å, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å ‚úÖ

## üéØ –†–ï–®–ï–ù–ò–ï:

### 1. –£–±—Ä–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –ø–æ—Å–ª–µ –¥–µ–ø–æ–∑–∏—Ç–∞
### 2. –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –∫–µ—à–∞ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –¥–µ–ø–æ–∑–∏—Ç–µ  
### 3. –î–æ–±–∞–≤–∏—Ç—å WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üìù –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞** –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–æ–∑–∏—Ç–∞
2. **–£–±—Ä–∞—Ç—å setTimeout** –≤ TonDepositCard  
3. **–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—É—é –æ—á–∏—Å—Ç–∫—É –∫–µ—à–∞** –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º –Ω–æ–≤–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞
4. **WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** –æ –±–∞–ª–∞–Ω—Å–µ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –¥–µ–ø–æ–∑–∏—Ç–∞

**–ö–æ–¥ –ù–ï –¢–†–û–ì–ê–ï–ú —Å–æ–≥–ª–∞—Å–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.**

## ‚öñÔ∏è –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï –î–ò–ê–ì–ù–û–ó–ê:

- **User 25 –±–∞–ª–∞–Ω—Å –≤ –ë–î**: 17.79 TON ‚úÖ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π)  
- **32 –¥–µ–ø–æ–∑–∏—Ç–∞ –∑–∞ 24 —á–∞—Å–∞**: –∑–∞–ø–∏—Å–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚úÖ
- **Backend –æ–±—Ä–∞–±–æ—Ç–∫–∞**: —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ ‚úÖ
- **Frontend –∫–µ—à**: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –¥–µ–ø–æ–∑–∏—Ç–∞ ‚ùå (–ø—Ä–æ–±–ª–µ–º–∞)

**–ü–†–û–ë–õ–ï–ú–ê –¢–û–ß–ù–û –õ–û–ö–ê–õ–ò–ó–û–í–ê–ù–ê: Frontend cache invalidation –ø–æ—Å–ª–µ TON –¥–µ–ø–æ–∑–∏—Ç–∞.**