# üìä –ö–û–ú–ü–õ–ï–ö–°–ù–´–ô –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ò–ô –û–¢–ß–ï–¢ UniFarm

**–î–∞—Ç–∞:** 11 —è–Ω–≤–∞—Ä—è 2025  
**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:** ESLint, TypeScript, Madge, Dependency Cruiser  

## üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 1. ESLint –∞–Ω–∞–ª–∏–∑ (modules/farming)

#### –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- **22 –æ—à–∏–±–∫–∏** –≤ –º–æ–¥—É–ª–µ farming
- **1 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ**

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Ö–æ–¥–∫–∏:
1. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (12 —Å–ª—É—á–∞–µ–≤):
   - `user` –≤ controller.ts - –æ–±—ä—è–≤–ª—è–µ—Ç—Å—è –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   - `RewardType`, `RewardCalculationLogic` - –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
   - `requireAuth`, `strictRateLimit`, `standardRateLimit` –≤ routes.ts

2. **–ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** –≤ service.ts:
   - `telegramId` –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω (—Å—Ç—Ä–æ–∫–∏ 429, 437)
   - `user` –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω (—Å—Ç—Ä–æ–∫–∞ 431)

3. **–°—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**:
   - –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏ –ø–æ—Å–ª–µ `if` (8 —Å–ª—É—á–∞–µ–≤)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `any` —Ç–∏–ø–∞ (1 —Å–ª—É—á–∞–π)

### 2. Madge –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- ‚úÖ **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç**
- ‚úÖ –í—Å–µ –º–æ–¥—É–ª–∏ –∏–º–µ—é—Ç —á–µ—Ç–∫—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é
- ‚úÖ –ù–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (orphans)

### 3. TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è

#### –ü—Ä–æ–±–ª–µ–º—ã:
- –í—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç –∏–∑-–∑–∞ –±–æ–ª—å—à–æ–≥–æ –æ–±—ä–µ–º–∞ –∫–æ–¥–∞ (362 —Ñ–∞–π–ª–∞)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –∫–æ–º–ø–∏–ª—è—Ü–∏—é

### 4. Dependency Cruiser

#### –ë–ª–æ–∫–µ—Ä:
- Node.js 18.16.0 –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- –¢—Ä–µ–±—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º Node.js 18.17 –∏–ª–∏ –≤—ã—à–µ

## üìã –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º

### 1. –ü—Ä–æ–±–ª–µ–º–∞ —Å –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –≤ service.ts

```typescript
// –°—Ç—Ä–æ–∫–∏ 429-437 –≤ service.ts
telegramId // –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
user // –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
```

**–í–µ—Ä–æ—è—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞:** –ö–æ–¥ –±—ã–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –∏–∑ –¥—Ä—É–≥–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –±–µ–∑ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

### 2. –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã

–í routes.ts –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è middleware –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è:
- `requireAuth`
- `strictRateLimit` 
- `standardRateLimit`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –õ–∏–±–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —ç—Ç–∏ middleware, –ª–∏–±–æ —É–¥–∞–ª–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã.

### 3. –ü–∞—Ç—Ç–µ—Ä–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–í–æ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–∞—Ö controller.ts –æ–±—ä—è–≤–ª—è–µ—Ç—Å—è `const user = req.telegramUser;` –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –ª–∏–±–æ —É–¥–∞–ª–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ.

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (—Ç—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è):

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ service.ts**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `telegramId` –∏ `user`
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

2. **–û–±–Ω–æ–≤–∏—Ç—å Node.js –¥–æ –≤–µ—Ä—Å–∏–∏ 20.x**
   - –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è 18.16.0 —É—Å—Ç–∞—Ä–µ–ª–∞
   - –ú–Ω–æ–≥–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –±–æ–ª–µ–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é

### –í–∞–∂–Ω—ã–µ (—É–ª—É—á—à–∞—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞):

3. **–û—á–∏—Å—Ç–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å `eslint --fix` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - –í—Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

4. **–î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏ –∫ if-statements**
   - ESLint –º–æ–∂–µ—Ç –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å `--fix`

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º:

5. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –∫–æ–º–ø–∏–ª—è—Ü–∏—é TypeScript**
   ```json
   // tsconfig.json
   {
     "compilerOptions": {
       "incremental": true,
       "tsBuildInfoFile": ".tsbuildinfo"
     }
   }
   ```

6. **–°–æ–∑–¥–∞—Ç—å npm scripts –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞**
   ```json
   {
     "scripts": {
       "lint": "eslint . --ext .js,.jsx,.ts,.tsx",
       "lint:fix": "eslint . --ext .js,.jsx,.ts,.tsx --fix",
       "typecheck": "tsc --noEmit",
       "analyze:deps": "madge --circular modules"
     }
   }
   ```

## ‚úÖ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** - –æ—Ç–ª–∏—á–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
2. **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
3. **TypeScript –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** - —Ö–æ—Ä–æ—à–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è (–∫—Ä–æ–º–µ —Ä–µ–¥–∫–∏—Ö `any`)
4. **ESLint –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –Ω–∞—Ö–æ–¥–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º:** 0
- **–û—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:** 2 (–Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
- **–°—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º:** 20
- **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:** 0
- **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π:** 0

**–û–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–¥–∞:** –•–æ—Ä–æ—à–µ–µ, —Ç—Ä–µ–±—É—é—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üöÄ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å undefined –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ service.ts
2. **–°–µ–≥–æ–¥–Ω—è:** –ó–∞–ø—É—Å—Ç–∏—Ç—å eslint --fix –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
3. **–ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ:** –û–±–Ω–æ–≤–∏—Ç—å Node.js –¥–æ 20.x
4. **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ:** –í–Ω–µ–¥—Ä–∏—Ç—å pre-commit hooks —Å –ª–∏–Ω—Ç–µ—Ä–∞–º–∏