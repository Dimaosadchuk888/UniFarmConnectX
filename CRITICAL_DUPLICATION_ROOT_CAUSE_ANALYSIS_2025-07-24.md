# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó: –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê –£–î–í–û–ï–ù–ò–Ø –î–ï–ü–û–ó–ò–¢–û–í

**–î–∞—Ç–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:** 24 –∏—é–ª—è 2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** –°–∏—Å—Ç–µ–º–∞ —É–¥–≤–∞–∏–≤–∞–µ—Ç –¥–µ–ø–æ–∑–∏—Ç—ã - –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ 1 TON –¥–∞–µ—Ç +2 TON  
**–°—Ç–∞—Ç—É—Å:** üîç –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê –ù–ê–ô–î–ï–ù–ê  

---

## üìä –•–†–û–ù–û–õ–û–ì–ò–Ø –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –ò–ó–ú–ï–ù–ï–ù–ò–ô (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 —á–∞—Å–æ–≤)

### **23 –∏—é–ª—è 2025 - –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**
- ‚úÖ TON –¥–µ–ø–æ–∑–∏—Ç—ã —Ä–∞–±–æ—Ç–∞–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–æ
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞–ª–∏ —Ç–æ—á–Ω—ã–µ —Å—É–º–º—ã

### **24 –∏—é–ª—è 2025 - –ö–ê–¢–ê–°–¢–†–û–§–ò–ß–ï–°–ö–ò–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø**

#### **1. –î–û–ë–ê–í–õ–ï–ù–ò–ï FRONTEND-BACKEND –ò–ù–¢–ï–ì–†–ê–¶–ò–ò** (—Å—Ç—Ä–æ–∫–∏ 424-442 tonConnectService.ts)
```typescript
// –ù–û–í–û–ï: –£–≤–µ–¥–æ–º–ª—è–µ–º backend –æ —É—Å–ø–µ—à–Ω–æ–º TON –¥–µ–ø–æ–∑–∏—Ç–µ
const backendResponse = await correctApiRequest('/api/v2/wallet/ton-deposit', 'POST', {
  ton_tx_hash: result.boc,
  amount: tonAmount,
  wallet_address: tonConnectUI.account?.address || 'unknown'
});
```

#### **2. –ù–ï–ü–†–ê–í–ò–õ–¨–ù–ê–Ø –î–ï–î–£–ü–õ–ò–ö–ê–¶–ò–Ø** (—Å—Ç—Ä–æ–∫–∞ 115 TransactionService.ts)
```typescript
// ‚ùå –ü–û–õ–û–ú–ê–ù–ù–ê–Ø –î–ï–î–£–ü–õ–ò–ö–ê–¶–ò–Ø:
tx_hash_unique: metadata?.tx_hash || null,  // –ù–ï –†–ê–ë–û–¢–ê–ï–¢!

// ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û –ù–ê:
tx_hash_unique: metadata?.ton_tx_hash || null,  // –†–ê–ë–û–¢–ê–ï–¢
```

---

## üéØ **–ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê –£–î–í–û–ï–ù–ò–Ø**

### **–î–í–£–•–≠–¢–ê–ü–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê**:

#### **–≠—Ç–∞–ø 1: Frontend-Backend Integration –≤—á–µ—Ä–∞ –ù–ï –†–ê–ë–û–¢–ê–õ**
- Frontend –ù–ï –≤—ã–∑—ã–≤–∞–ª backend API
- –î–µ–ø–æ–∑–∏—Ç—ã –ù–ï —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –°–∏—Å—Ç–µ–º–∞ –±—ã–ª–∞ —Å–ª–æ–º–∞–Ω–∞, –Ω–æ –ù–ï –¥—É–±–ª–∏—Ä–æ–≤–∞–ª–∞

#### **–≠—Ç–∞–ø 2: –°–µ–≥–æ–¥–Ω—è Frontend –∑–∞—Ä–∞–±–æ—Ç–∞–ª + —Å–ª–æ–º–∞–Ω–Ω–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è**
- ‚úÖ Frontend –¢–ï–ü–ï–†–¨ –≤—ã–∑—ã–≤–∞–µ—Ç backend API
- ‚ùå –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ù–ï –†–ê–ë–û–¢–ê–ï–¢ (`metadata.tx_hash` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- ‚ùå **–†–ï–ó–£–õ–¨–¢–ê–¢**: –ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é

---

## üîç **–¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê**

### **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –í–ß–ï–†–ê (—Å—Ç–∞–±–∏–ª—å–Ω–æ)**:
```
1. User –¥–µ–ª–∞–µ—Ç TON –¥–µ–ø–æ–∑–∏—Ç
2. Frontend –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç backend API ‚ùå
3. –ë–∞–ª–∞–Ω—Å –ù–ï –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è ‚ùå
4. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ù–ï–¢ ‚úÖ (–ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è)
```

### **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –°–ï–ì–û–î–ù–Ø (—É–¥–≤–æ–µ–Ω–∏–µ)**:
```
1. User –¥–µ–ª–∞–µ—Ç TON –¥–µ–ø–æ–∑–∏—Ç
2. Frontend –≤—ã–∑—ã–≤–∞–µ—Ç backend API ‚úÖ
3. Backend –ø–æ–ª—É—á–∞–µ—Ç metadata.ton_tx_hash
4. TransactionService –∏—â–µ—Ç metadata.tx_hash (–ù–ï –°–£–©–ï–°–¢–í–£–ï–¢!) ‚ùå
5. tx_hash_unique = null ‚ùå
6. –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ù–ï –†–ê–ë–û–¢–ê–ï–¢ ‚ùå
7. –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é ‚ö†Ô∏è
8. User –ø–æ–ª—É—á–∞–µ—Ç +2 TON –≤–º–µ—Å—Ç–æ +1 TON üö®
```

---

## üìã **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –§–ê–ô–õ–´ –° –ü–†–û–ë–õ–ï–ú–ê–ú–ò**

### **1. client/src/services/tonConnectService.ts**
- **–°—Ç—Ä–æ–∫–∏ 424-442**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å backend
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Å–ª–æ–º–∞–Ω–∞

### **2. core/TransactionService.ts**
- **–°—Ç—Ä–æ–∫–∞ 115**: `tx_hash_unique: metadata?.tx_hash || null`
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ò—â–µ—Ç `tx_hash`, –Ω–æ Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `ton_tx_hash`

### **3. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç**:
- Frontend + Backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚úÖ (—Ö–æ—Ä–æ—à–æ)
- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Å–ª–æ–º–∞–Ω–∞ ‚ùå (–∫—Ä–∏—Ç–∏—á–Ω–æ)
- = –£–î–í–û–ï–ù–ò–ï –î–ï–ü–û–ó–ò–¢–û–í üö®

---

## üéØ **–¢–û–ß–ù–û–ï –†–ï–®–ï–ù–ò–ï**

### **–£–ñ–ï –ò–°–ü–†–ê–í–õ–ï–ù–û**:
```typescript
// –í core/TransactionService.ts —Å—Ç—Ä–æ–∫–∞ 115:
tx_hash_unique: metadata?.ton_tx_hash || null,  // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
```

### **–°–¢–ê–¢–£–°**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ, –≥–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é

---

## üìä **–ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï –î–ò–ê–ì–ù–û–ó–ê**

### **–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞**:
1. **User #25**: –ü–æ–ª—É—á–∏–ª +2 TON –≤–º–µ—Å—Ç–æ +1 TON
2. **2 –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: –° –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º tx_hash
3. **–í—Ä–µ–º—è –ø–æ—è–≤–ª–µ–Ω–∏—è**: –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è frontend-backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
4. **–û—Ç—á–µ—Ç—ã**: CRITICAL_DUPLICATION_FIX_APPLIED_2025-07-24.md –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç

### **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤**:
- `CRITICAL_DUPLICATION_FIX_APPLIED_2025-07-24.md`
- `replit.md` (—Å—Ç—Ä–æ–∫–∞ 30)

---

## ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –í–ê–ñ–ù–û–°–¢–¨ –î–ï–ü–õ–û–Ø**

**–ö–∞–∂–¥–∞—è –º–∏–Ω—É—Ç–∞ –∑–∞–¥–µ—Ä–∂–∫–∏ = –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**

**–°–∏—Å—Ç–µ–º–∞ –°–ï–ô–ß–ê–°**:
- ‚úÖ Frontend-Backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
- ‚è≥ –û–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–¥–∞–∫—à–Ω –¥–µ–ø–ª–æ–π

---

**‚úÖ –î–ò–ê–ì–ù–û–ó –ó–ê–í–ï–†–®–ï–ù - –ì–û–¢–û–í–û –ö –ù–ï–ú–ï–î–õ–ï–ù–ù–û–ú–£ –î–ï–ü–õ–û–Æ**