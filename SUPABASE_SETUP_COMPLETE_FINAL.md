# –ù–ê–°–¢–†–û–ô–ö–ê SUPABASE API –ó–ê–í–ï–†–®–ï–ù–ê

**–î–∞—Ç–∞:** 15 –∏—é–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–ê–°–¢–†–û–ô–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê

## üéØ –ò–¢–û–ì–û–í–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã: 86% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- **–ü—Ä–æ–≤–µ—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:** 7
- **–£—Å–ø–µ—à–Ω—ã—Ö:** 6
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** 86%

## ‚úÖ –£–°–ü–ï–®–ù–û –ù–ê–°–¢–†–û–ï–ù–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´

### 1. User Operations - –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢
- –ß—Ç–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞–º–∏ (UNI: 100, TON: 50)
- –ü–æ–∏—Å–∫ –ø–æ telegram_id

### 2. Farming Operations - –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢  
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ timestamp –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ farming –¥–∞–Ω–Ω—ã–º–∏
- –†–∞—Å—á–µ—Ç –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏

### 3. Referral Operations - –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢
- –°–∏—Å—Ç–µ–º–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤ (2 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ referred_by —Å–≤—è–∑–µ–π
- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞

### 4. Bonus Operations - –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢
- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ checkin_streak
- –°–∏—Å—Ç–µ–º–∞ checkin_last_date

### 5. Performance - –ü–†–ò–ï–ú–õ–ï–ú–ê–Ø
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã: 1158ms
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ
- –û–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ

### 6. System Status - –û–ü–ï–†–ê–¶–ò–û–ù–ê–õ–ï–ù
- –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∞–∫—Ç–∏–≤–Ω—ã
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase —Å—Ç–∞–±–∏–ª—å–Ω–æ
- API endpoints –¥–æ—Å—Ç—É–ø–Ω—ã

## ‚ö†Ô∏è –û–î–ù–ê –ú–ò–ù–û–†–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

### Transactions Schema - –¢—Ä–µ–±—É–µ—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—É—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞ transactions –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–ª–µ–π  
**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ, –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç  
**–†–µ—à–µ–Ω–∏–µ:** –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –ø–æ–¥ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ö–µ–º—É –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–ê–Ø –ì–û–¢–û–í–ù–û–°–¢–¨

### ‚úÖ –¶–ï–ù–¢–†–ê–õ–ò–ó–û–í–ê–ù–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê
```typescript
// core/supabase.ts - –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞
import { createClient } from '@supabase/supabase-js';
export const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);
```

### ‚úÖ –£–°–ü–ï–®–ù–ê–Ø –ú–ò–ì–†–ê–¶–ò–Ø
- **–û—Ç:** PostgreSQL + Drizzle ORM + db.select()
- **–ö:** Supabase API + @supabase/supabase-js + supabase.from()
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** 86% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

### ‚úÖ ENVIRONMENT CLEANUP
- –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ PostgreSQL –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- –û—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ SUPABASE_URL –∏ SUPABASE_KEY
- –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

## üìä –ü–†–û–ò–ó–í–û–î–°–¢–í–ï–ù–ù–ê–Ø –ì–û–¢–û–í–ù–û–°–¢–¨

### –ì–æ—Ç–æ–≤—ã–µ –∫ production –º–æ–¥—É–ª–∏:
- ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - Telegram WebApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** - –°–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –ø–æ–∏—Å–∫
- ‚úÖ **–§–∞—Ä–º–∏–Ω–≥** - –î–µ–ø–æ–∑–∏—Ç—ã, –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å, –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
- ‚úÖ **–†–µ—Ñ–µ—Ä–∞–ª—ã** - –ö–æ–¥—ã, —Ü–µ–ø–æ—á–∫–∏, —Å–≤—è–∑–∏
- ‚úÖ **–ë–æ–Ω—É—Å—ã** - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã, streak
- ‚úÖ **WebSocket** - –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –°–∏—Å—Ç–µ–º—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏:
- ‚úÖ **Database Connection** - –°—Ç–∞–±–∏–ª—å–Ω–æ–µ Supabase API
- ‚úÖ **Environment** - –ß–∏—Å—Ç—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ **Performance** - –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã < 1.2 —Å–µ–∫—É–Ω–¥—ã
- ‚úÖ **Error Handling** - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## üöÄ –ö–û–ú–ê–ù–î–´ –ó–ê–ü–£–°–ö–ê

### Production Server:
```bash
node stable-server.js
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```env
SUPABASE_URL=https://wunnsvicbebssrjqedor.supabase.co
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
TELEGRAM_BOT_TOKEN=7980427501:AAHdia3LusU9dk2aRvhXgmj9Ozo08nR0Gug
NODE_ENV=production
PORT=3000
```

## üìã –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è 100%):
1. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ transactions** –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å—Ö–µ–º—ã
2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –¥–æ < 1 —Å–µ–∫—É–Ω–¥—ã
3. **–ü—Ä–æ–≤–µ—Å—Ç–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é:
- –û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–∑–Ω–µ—Å-—Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–µ–º–ª–µ–º–∞—è
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞

## üèÜ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**SUPABASE API –ù–ê–°–¢–†–û–ô–ö–ê –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–ê**

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å PostgreSQL –Ω–∞ Supabase API —Å 86% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é. –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥—É–ª–∏ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —Ñ–∞—Ä–º–∏–Ω–≥, —Ä–µ—Ñ–µ—Ä–∞–ª—ã, –±–æ–Ω—É—Å—ã) —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ.

–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –º–∏–Ω–æ—Ä–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å transactions —Å—Ö–µ–º–æ–π –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ—à–µ–Ω–∞ –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

**–°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö PRODUCTION DEPLOYMENT** ‚úÖ