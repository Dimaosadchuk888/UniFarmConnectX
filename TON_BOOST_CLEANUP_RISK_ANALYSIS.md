# ‚ö†Ô∏è –ê–ù–ê–õ–ò–ó –†–ò–°–ö–û–í –û–ß–ò–°–¢–ö–ò –î–£–ë–õ–ò–ö–ê–¢–û–í TON BOOST

## –î–∞—Ç–∞: 06.08.2025
## –í–æ–ø—Ä–æ—Å: –ë–µ–∑–æ–ø–∞—Å–Ω–æ –ª–∏ —É–¥–∞–ª—è—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –∏–∑ ton_boost_purchases?

---

## üîç **–ê–ù–ê–õ–ò–ó –°–ò–¢–£–ê–¶–ò–ò**

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (User 184):
- **68 –∑–∞–ø–∏—Å–µ–π** –≤ —Ç–∞–±–ª–∏—Ü–µ ton_boost_purchases
- **20 –¥—É–±–ª–∏–∫–∞—Ç–æ–≤** (–∑–∞–ø–∏—Å–∏ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º purchased_at)
- **48 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö** –ø–æ–∫—É–ø–æ–∫
- –û–±—â–∞—è —Å—É–º–º–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π: **190 TON**
- –î–Ω–µ–≤–Ω–æ–π –¥–æ—Ö–æ–¥: **2.375 TON** (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç)

---

## ‚ö†Ô∏è **–†–ò–°–ö–ò –£–î–ê–õ–ï–ù–ò–Ø –î–£–ë–õ–ò–ö–ê–¢–û–í**

### üü¢ **–ù–ò–ó–ö–ò–ô –†–ò–°–ö:**

1. **–í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**
   - –°–µ–π—á–∞—Å: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 68 –ø–∞–∫–µ—Ç–æ–≤
   - –ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏: –ø–æ–∫–∞–∂–µ—Ç 48 –ø–∞–∫–µ—Ç–æ–≤
   - **–†–∏—Å–∫:** –ù–∏–∫–∞–∫–æ–≥–æ, —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç –ø—Ä–æ–±–ª–µ–º—É

2. **–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**
   - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü–µ `transactions`
   - –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ ton_boost_purchases –ù–ï –∑–∞—Ç—Ä–æ–Ω–µ—Ç –∏—Å—Ç–æ—Ä–∏—é
   - **–†–∏—Å–∫:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

### üü° **–°–†–ï–î–ù–ò–ô –†–ò–°–ö:**

3. **–†–∞—Å—á–µ—Ç –¥–æ—Ö–æ–¥–∞**
   - –°–∏—Å—Ç–µ–º–∞ —Å—É–º–º–∏—Ä—É–µ—Ç –í–°–ï –∑–∞–ø–∏—Å–∏ —Å status='active'
   - –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Å—É–º–º–∞ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è
   - **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω—É–∂–Ω–∞:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ rate –∏ amount –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —É –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

4. **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏**
   - –ï—Å–ª–∏ –∫–æ–º–∏—Å—Å–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª–∏—Å—å –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π
   - –ú–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ä–∞—Å—á–µ—Ç—ã
   - **–†–∏—Å–∫:** –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π, —Ç.–∫. –∫–æ–º–∏—Å—Å–∏–∏ –æ—Ç —Å—É–º–º—ã, –Ω–µ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞

### üî¥ **–ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–û –í–´–°–û–ö–ò–ô –†–ò–°–ö:**

5. **ID —Å–≤—è–∑–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏**
   - –ï—Å–ª–∏ –≥–¥–µ-—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è ID —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
   - –ú–æ–≥—É—Ç –±—ã—Ç—å "–±–∏—Ç—ã–µ" —Å—Å—ã–ª–∫–∏
   - **–ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ï—Å—Ç—å –ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ —ç—Ç–∏ ID

6. **–ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã**
   - –ï—Å–ª–∏ scheduler –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ –∑–∞–ø–∏—Å–∏ –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π
   - –ú–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∏—Ç—å—Å—è –ª–æ–≥–∏–∫–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π
   - **–ö—Ä–∏—Ç–∏—á–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ö–∞–∫ scheduler –≤—ã–±–∏—Ä–∞–µ—Ç –∑–∞–ø–∏—Å–∏

---

## üõ°Ô∏è **–ë–ï–ó–û–ü–ê–°–ù–´–ô –ü–û–î–•–û–î**

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –ú–Ø–ì–ö–ê–Ø –î–ï–ê–ö–¢–ò–í–ê–¶–ò–Ø** ‚úÖ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```sql
-- –ù–µ —É–¥–∞–ª—è–µ–º, –∞ –ø–æ–º–µ—á–∞–µ–º –∫–∞–∫ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ
UPDATE ton_boost_purchases 
SET status = 'duplicate_inactive'
WHERE id IN (—Å–ø–∏—Å–æ–∫_–¥—É–±–ª–∏–∫–∞—Ç–æ–≤)
AND user_id = 184;
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- ‚úÖ –ù–µ—Ç —Ä–∏—Å–∫–∞ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –õ–µ–≥–∫–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–¥ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ status != 'duplicate_inactive'

---

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ñ–ï–°–¢–ö–û–ï –£–î–ê–õ–ï–ù–ò–ï** ‚ùå (–ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```sql
DELETE FROM ton_boost_purchases 
WHERE id IN (—Å–ø–∏—Å–æ–∫_–¥—É–±–ª–∏–∫–∞—Ç–æ–≤)
AND user_id = 184;
```

**–†–∏—Å–∫–∏:**
- üî¥ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å
- üî¥ –ú–æ–≥—É—Ç —Å–ª–æ–º–∞—Ç—å—Å—è —Å–≤—è–∑–∏
- üî¥ –ü–æ—Ç–µ—Ä—è –∏—Å—Ç–æ—Ä–∏–∏
- üî¥ –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –≤ –≤—ã–±–æ—Ä–µ - –¥–∞–Ω–Ω—ã–µ –ø–æ—Ç–µ—Ä—è–Ω—ã

---

### **–í–∞—Ä–∏–∞–Ω—Ç 3: –°–û–ó–î–ê–ù–ò–ï –ê–†–•–ò–í–ù–û–ô –¢–ê–ë–õ–ò–¶–´** ‚úÖ
```sql
-- 1. –°–æ–∑–¥–∞–µ–º –∞—Ä—Ö–∏–≤–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
CREATE TABLE ton_boost_purchases_archive AS 
SELECT * FROM ton_boost_purchases WHERE user_id = 184;

-- 2. –£–¥–∞–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã
DELETE FROM ton_boost_purchases 
WHERE id IN (—Å–ø–∏—Å–æ–∫_–¥—É–±–ª–∏–∫–∞—Ç–æ–≤);
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ï—Å—Ç—å –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø
- ‚úÖ –ú–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
- ‚úÖ –ß–∏—Å—Ç–∞—è –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

---

## üìä **–ß–¢–û –ù–£–ñ–ù–û –ü–†–û–í–ï–†–ò–¢–¨ –ü–ï–†–ï–î –û–ß–ò–°–¢–ö–û–ô**

### 1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ID:**
```sql
-- –ï—Å—Ç—å –ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ —ç—Ç–∏ –∑–∞–ø–∏—Å–∏?
SELECT * FROM transactions 
WHERE data::json->>'boost_purchase_id' IN (—Å–ø–∏—Å–æ–∫_ID_–¥—É–±–ª–∏–∫–∞—Ç–æ–≤);
```

### 2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤:**
```sql
-- –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—Å—è —Å—É–º–º–∞ –¥–æ—Ö–æ–¥–∞?
SELECT 
  COUNT(*) as total_records,
  COUNT(DISTINCT purchased_at) as unique_records,
  SUM(daily_income) as total_daily_before,
  SUM(DISTINCT daily_income) as total_daily_after
FROM ton_boost_purchases 
WHERE user_id = 184 AND status = 'active';
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ scheduler:**
- –ö–∞–∫ –≤—ã–±–∏—Ä–∞—é—Ç—Å—è –∑–∞–ø–∏—Å–∏ –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π?
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ ID –∑–∞–ø–∏—Å–∏ –≥–¥–µ-–ª–∏–±–æ?

---

## üéØ **–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò**

### **–ë–ï–ó–û–ü–ê–°–ù–´–ô –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô:**

1. **–°–Ω–∞—á–∞–ª–∞ - –∞–Ω–∞–ª–∏–∑:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å–≤—è–∑–∏
   - –£–±–µ–¥–∏—Ç—å—Å—è –≤ –æ–¥–∏–Ω–∞–∫–æ–≤–æ—Å—Ç–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É scheduler

2. **–ó–∞—Ç–µ–º - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –Ω–∞ –æ–¥–Ω–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–æ—Ö–æ–¥—ã —Å—á–∏—Ç–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

3. **–í—ã–±—Ä–∞—Ç—å –º–µ—Ç–æ–¥:**
   - **–†–µ–∫–æ–º–µ–Ω–¥—É—é: –ú—è–≥–∫–∞—è –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è (status = 'duplicate_inactive')**
   - –≠—Ç–æ —Å–∞–º—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
   - –ú–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç

4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å

---

## ‚ùì **–û–¢–í–ï–¢ –ù–ê –í–û–ü–†–û–°**

**–û–ø–∞—Å–Ω–∞ –ª–∏ –æ—á–∏—Å—Ç–∫–∞?**
- **–î–ê**, –µ—Å–ª–∏ –¥–µ–ª–∞—Ç—å –∂–µ—Å—Ç–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –±–µ–∑ –∞–Ω–∞–ª–∏–∑–∞
- **–ù–ï–¢**, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º—è–≥–∫—É—é –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—é
- **–ú–ò–ù–ò–ú–ê–õ–¨–ù–´–ô –†–ò–°–ö**, –µ—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤—è–∑–∏

**–ú–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –±–∞–≥–∏?**
- **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –±–∞–≥–∏:** –ù–µ—Ç, –Ω–∞–æ–±–æ—Ä–æ—Ç –∏—Å–ø—Ä–∞–≤–∏—Ç
- **–†–∞—Å—á–µ—Ç–Ω—ã–µ –±–∞–≥–∏:** –í–æ–∑–º–æ–∂–Ω—ã, –µ—Å–ª–∏ –Ω–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ –±–∞–≥–∏:** –ú–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ–¥—Ö–æ–¥–µ

---

## ‚úÖ **–ò–¢–û–ì–û–í–ê–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø**

### **–°–∞–º—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:**

1. **–ù–ï –£–î–ê–õ–Ø–¢–¨ —Ñ–∏–∑–∏—á–µ—Å–∫–∏**
2. **–ü–æ–º–µ—Ç–∏—Ç—å status = 'duplicate_inactive'**
3. **–ò–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –≤ –∫–æ–¥–µ:** –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä `WHERE status = 'active'`
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ User 184**
5. **–ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø—Ä–∏–º–µ–Ω–∏—Ç—å –¥–ª—è –¥—Ä—É–≥–∏—Ö**

–≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ:
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ (–º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é
- ‚úÖ –ù–µ –ª–æ–º–∞–µ—Ç —Å–≤—è–∑–∏
- ‚úÖ –õ–µ–≥–∫–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫ –±–∞–≥–æ–≤

---

**–í—ã–≤–æ–¥:** –û—á–∏—Å—Ç–∫–∞ –ù–ï –æ–ø–∞—Å–Ω–∞, –µ—Å–ª–∏ –¥–µ–ª–∞—Ç—å –µ—ë –ø—Ä–∞–≤–∏–ª—å–Ω–æ —á–µ—Ä–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞, –∞ –Ω–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ.