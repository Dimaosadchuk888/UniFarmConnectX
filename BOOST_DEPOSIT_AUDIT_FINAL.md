# üìä –§–ò–ù–ê–õ–¨–ù–´–ô –ê–£–î–ò–¢: TON BOOST –î–ï–ü–û–ó–ò–¢–´

## üîç –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï –ë–î (2 –∞–≤–≥—É—Å—Ç–∞ 2025)

### –¢–∞–±–ª–∏—Ü–∞ `users` - –æ—Å–Ω–æ–≤–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã:
```
‚îú‚îÄ‚îÄ balance_ton: 82.08 TON (–¥–æ—Å—Ç—É–ø–Ω—ã–π –±–∞–ª–∞–Ω—Å)
‚îú‚îÄ‚îÄ balance_uni: 924,977 UNI 
‚îú‚îÄ‚îÄ ton_farming_balance: 115 TON (–ó–ê–°–¢–†–Ø–õ - –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è!)
‚îú‚îÄ‚îÄ ton_boost_package: 2 (–∞–∫—Ç–∏–≤–Ω—ã–π –ø–∞–∫–µ—Ç)
‚îî‚îÄ‚îÄ ton_boost_active: true
```

### –¢–∞–±–ª–∏—Ü–∞ `ton_farming_data`:
```
‚îú‚îÄ‚îÄ farming_balance: 115 TON (–¥—É–±–ª–∏—Ä—É–µ—Ç users.ton_farming_balance)
‚îú‚îÄ‚îÄ boost_active: true
‚îî‚îÄ‚îÄ boost_package_id: 2
```

### –¢–∞–±–ª–∏—Ü–∞ `transactions`:
```
–ù–∞–π–¥–µ–Ω–æ 5 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π BOOST_PURCHASE (28 –∏—é–ª—è):
‚îú‚îÄ‚îÄ -1 TON
‚îú‚îÄ‚îÄ -1 TON  
‚îú‚îÄ‚îÄ -1 TON
‚îú‚îÄ‚îÄ -10 TON
‚îú‚îÄ‚îÄ -5 TON
‚îî‚îÄ‚îÄ –ò–¢–û–ì–û: -18 TON —Å–ø–∏—Å–∞–Ω–æ
```

## üìç –ö–£–î–ê –°–ò–°–¢–ï–ú–ê –•–û–ß–ï–¢ –ü–ò–°–ê–¢–¨ –î–ï–ü–û–ó–ò–¢–´

### –ü–æ—Ç–æ–∫ –ø–æ–∫—É–ø–∫–∏ TON Boost:
1. **BalanceManager.subtractBalance()** ‚Üí —Å–ø–∏—Å—ã–≤–∞–µ—Ç –∏–∑ `balance_ton` ‚úÖ
2. **–û–±–Ω–æ–≤–ª—è–µ—Ç –≤ users**: `ton_boost_package`, `ton_boost_rate`, `ton_boost_active` ‚úÖ
3. **TonFarmingRepository.activateBoost()** ‚Üí –¥–æ–ª–∂–µ–Ω –¥–æ–±–∞–≤–∏—Ç—å –≤ `ton_farming_balance` ‚ùå
4. **–°–æ–∑–¥–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é** —Ç–∏–ø–∞ `BOOST_PURCHASE` ‚úÖ

### –ì–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–±–æ–π:
```
TonFarmingRepository.activateBoost():
‚îú‚îÄ‚îÄ –ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π farming_balance (115 TON)
‚îú‚îÄ‚îÄ –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π –¥–µ–ø–æ–∑–∏—Ç (+18 TON)
‚îú‚îÄ‚îÄ –î–æ–ª–∂–Ω–æ —Å—Ç–∞—Ç—å: 115 + 18 = 133 TON
‚îú‚îÄ‚îÄ –ü—ã—Ç–∞–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ ton_farming_data
‚îú‚îÄ‚îÄ Fallback –Ω–∞ users.ton_farming_balance
‚îî‚îÄ‚îÄ ‚ùå –ù–û –û–ë–ù–û–í–õ–ï–ù–ò–ï –ù–ï –ü–†–û–ò–°–•–û–î–ò–¢!
```

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

### –ë–∞–≥ –≤ –º–µ—Ç–æ–¥–µ `calculateUserTonDeposits()`:
```typescript
// –¢–µ–∫—É—â–∏–π –∫–æ–¥ –∏—â–µ—Ç —Ç–æ–ª—å–∫–æ —ç—Ç–∏ —Ç–∏–ø—ã:
.in('type', ['DEPOSIT', 'TON_DEPOSIT', 'FARMING_REWARD'])

// –ù–ï –≤–∫–ª—é—á–∞–µ—Ç 'BOOST_PURCHASE'!
```

–ü–æ—ç—Ç–æ–º—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ farming_balance —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ë–ï–ó —É—á–µ—Ç–∞ –ø–æ–∫—É–ø–æ–∫ boost.

## üí∞ –§–ò–ù–ê–ù–°–û–í–ê–Ø –ö–ê–†–¢–ò–ù–ê

```
–ë–´–õ–û (–Ω–∞—á–∞–ª–æ):
‚îú‚îÄ‚îÄ balance_ton: 100.02 TON
‚îú‚îÄ‚îÄ ton_farming_balance: 115 TON
‚îî‚îÄ‚îÄ –ò–¢–û–ì–û: 215.02 TON

–ö–£–ü–ò–õ–ò BOOST: -18 TON

–°–¢–ê–õ–û (—Å–µ–π—á–∞—Å):
‚îú‚îÄ‚îÄ balance_ton: 82.08 TON (-18 ‚úÖ)
‚îú‚îÄ‚îÄ ton_farming_balance: 115 TON (–Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è ‚ùå)
‚îî‚îÄ‚îÄ –ò–¢–û–ì–û: 197.08 TON

–ü–û–¢–ï–†–Ø–ù–û: 18 TON (–∑–∞–≤–∏—Å–ª–∏ –º–µ–∂–¥—É –±–∞–ª–∞–Ω—Å–∞–º–∏)
```

## üéØ –°–•–ï–ú–ê –•–†–ê–ù–ï–ù–ò–Ø –î–ï–ü–û–ó–ò–¢–û–í

### –¢–µ–∫—É—â–∞—è –º–æ–¥–µ–ª—å –ë–î –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:

```
USERS (–æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞):
‚îú‚îÄ‚îÄ balance_ton ‚Üí –¥–æ—Å—Ç—É–ø–Ω—ã–π –±–∞–ª–∞–Ω—Å –¥–ª—è –≤—ã–≤–æ–¥–∞
‚îú‚îÄ‚îÄ balance_uni ‚Üí –¥–æ—Å—Ç—É–ø–Ω—ã–π –±–∞–ª–∞–Ω—Å UNI
‚îú‚îÄ‚îÄ ton_farming_balance ‚Üí TON –≤ farming (–æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
‚îú‚îÄ‚îÄ uni_deposit_amount ‚Üí UNI –≤ farming
‚îú‚îÄ‚îÄ ton_boost_package ‚Üí ID –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞
‚îî‚îÄ‚îÄ ton_boost_active ‚Üí —Ñ–ª–∞–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

TON_FARMING_DATA (–¥—É–±–ª–∏—Ä—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞):
‚îú‚îÄ‚îÄ farming_balance ‚Üí –¥—É–±–ª–∏—Ä—É–µ—Ç users.ton_farming_balance
‚îú‚îÄ‚îÄ boost_package_id ‚Üí –¥—É–±–ª–∏—Ä—É–µ—Ç users.ton_boost_package
‚îî‚îÄ‚îÄ boost_active ‚Üí –¥—É–±–ª–∏—Ä—É–µ—Ç users.ton_boost_active

TRANSACTIONS (–∏—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π):
‚îî‚îÄ‚îÄ –í—Å–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç–∏–ø–æ–º –∏ —Å—É–º–º–æ–π
```

## ‚úÖ –ß–¢–û –ù–£–ñ–ù–û –°–û–ï–î–ò–ù–ò–¢–¨

1. **–ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ boost** –¥–µ–Ω—å–≥–∏ –¥–æ–ª–∂–Ω—ã:
   - –°–ø–∏—Å–∞—Ç—å—Å—è –∏–∑ `balance_ton` ‚úÖ (—Ä–∞–±–æ—Ç–∞–µ—Ç)
   - –î–æ–±–∞–≤–∏—Ç—å—Å—è –≤ `ton_farming_balance` ‚ùå (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å `ton_farming_data` ‚ö†Ô∏è (—á–∞—Å—Ç–∏—á–Ω–æ)

2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥–∏**:
   - –î–æ–±–∞–≤–∏—Ç—å `BOOST_PURCHASE` –≤ `calculateUserTonDeposits()`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å fallback –ª–æ–≥–∏–∫—É –≤ `activateBoost()`
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `ton_farming_balance` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

3. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ 18 TON**:
   - –î–æ–±–∞–≤–∏—Ç—å –∏—Ö –∫ `ton_farming_balance` (115 + 18 = 133 TON)
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å `ton_farming_data`

## üìù –†–ï–ó–Æ–ú–ï

–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –ë–î —Å–∏—Å—Ç–µ–º–∞ —á–∞—Å—Ç–∏—á–Ω–æ —Å–ª–æ–º–∞–ª–∞—Å—å:
- –î–µ–Ω—å–≥–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ
- –ù–û –Ω–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ farming –±–∞–ª–∞–Ω—Å
- –ü—Ä–∏—á–∏–Ω–∞: –±–∞–≥ –≤ –∫–æ–¥–µ, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å