# üéØ ACTION PLAN: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º UniFarming

**–î–∞—Ç–∞:** 14 —è–Ω–≤–∞—Ä—è 2025  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–¢–∏–ø:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

## üìã –ö–†–ê–¢–ö–û–ï –û–ü–ò–°–ê–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´

–°–∏—Å—Ç–µ–º–∞ UniFarming –∏–º–µ–µ—Ç **–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—É—Ç–∏ —Ä–∞—Å—á–µ—Ç–∞ –¥–æ—Ö–æ–¥–∞**, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∏ –Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ:
- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `deposit_amount`)
- –°—É—â–µ—Å—Ç–≤—É–µ—Ç fallback –ª–æ–≥–∏–∫–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `balance_uni`)
- –í–æ–∑–º–æ–∂–Ω—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏–ª–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã

**–ë–∏–∑–Ω–µ—Å-—Ä–∏—Å–∫:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è, —á—Ç–æ –ø–æ–¥—Ä—ã–≤–∞–µ—Ç –¥–æ–≤–µ—Ä–∏–µ –∫ —Å–∏—Å—Ç–µ–º–µ.

## üîß –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –§–ê–ó–ê 1: –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê (1-2 –¥–Ω—è)
**–¶–µ–ª—å:** –ù–∞–π—Ç–∏ –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è farming income

#### 1.1 –ê—É–¥–∏—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–≤
- [x] –ù–∞–π—Ç–∏ –í–°–ï —Ñ–∞–π–ª—ã —Å —Ç–µ–∫—Å—Ç–æ–º `FARMING_REWARD` –∏–ª–∏ `farming income`
  - ‚úÖ –ù–∞–π–¥–µ–Ω–æ 8 —Ñ–∞–π–ª–æ–≤: farmingScheduler.ts, fix-farming-scheduler.ts, test-farming-*.ts
  - ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫: core/scheduler/farmingScheduler.ts
  - ‚úÖ –ï—Å—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (fix-farming-scheduler.ts)
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å crontab/systemd –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
  - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ node-cron –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ Node.js
  - ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `*/5 * * * *` (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç) 
  - ‚úÖ –ù–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö cron/systemd –∑–∞–¥–∞—á
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π –Ω–∞ –∞–Ω–æ–º–∞–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
  - ‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω BatchBalanceProcessor timeout (30 —Å–µ–∫—É–Ω–¥)
  - ‚úÖ –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω batch update (—Å—Ç—Ä–æ–∫–∞ 117 farmingScheduler.ts)
  - ‚úÖ –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤ —Å–≤—è–∑–∞–Ω–æ —Å –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–º–∏ –∑–∞–ø—É—Å–∫–∞–º–∏

#### 1.2 –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- [x] –í–∑—è—Ç—å 5 –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π User 74 (>2000 UNI)
  - ‚úÖ ID 665177: 4876.22 UNI (22 –ø–µ—Ä–∏–æ–¥–∞ = 110 –º–∏–Ω—É—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è)
  - ‚úÖ ID 664978: 4652.77 UNI (21 –ø–µ—Ä–∏–æ–¥ = 105 –º–∏–Ω—É—Ç)
  - ‚úÖ ID 664779: 4428.81 UNI (20 –ø–µ—Ä–∏–æ–¥–æ–≤ = 100 –º–∏–Ω—É—Ç)
  - ‚úÖ ID 664580: 4205.12 UNI (19 –ø–µ—Ä–∏–æ–¥–æ–≤ = 95 –º–∏–Ω—É—Ç)
  - ‚úÖ ID 664381: 3981.35 UNI (18 –ø–µ—Ä–∏–æ–¥–æ–≤ = 90 –º–∏–Ω—É—Ç)
- [x] –ù–∞–π—Ç–∏ —Ç–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫ –ø–æ logs
  - ‚úÖ –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ farmingScheduler.ts
  - ‚úÖ –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ –ø—Ä–æ–ø—É—Å–∫–∞ –∑–∞–ø—É—Å–∫–æ–≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
- [x] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å call stack –¥–ª—è –∫–∞–∂–¥–æ–π
  - ‚úÖ server/index.ts ‚Üí farmingScheduler.start()
  - ‚úÖ cron –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç ‚Üí processUniFarmingIncome()
  - ‚úÖ calculateUniFarmingIncome() –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç –ø–µ—Ä–∏–æ–¥—ã —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

#### 1.3 –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö
- [x] SQL –∑–∞–ø—Ä–æ—Å: –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å `uni_deposit_amount IS NULL`
  - ‚úÖ –ù–∞–π–¥–µ–Ω–æ 0 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å NULL –¥–µ–ø–æ–∑–∏—Ç–æ–º
  - ‚úÖ –í–°–ï –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–º–µ—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π uni_deposit_amount
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞—Ç—ã –∏—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫
  - ‚úÖ –ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ - –Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å NULL
- [x] –ù–∞–π—Ç–∏ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é —Å –ø—Ä–æ–±–ª–µ–º–Ω—ã–º–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è–º–∏
  - ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –Ω–µ –≤ fallback –ª–æ–≥–∏–∫–µ, –∞ –≤ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–∏ –ø–µ—Ä–∏–æ–¥–æ–≤
  - ‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞: –ø—Ä–æ–ø—É—Å–∫–∏ –∑–∞–ø—É—Å–∫–æ–≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞

### –§–ê–ó–ê 2: –ò–ó–û–õ–Ø–¶–ò–Ø (2-3 –¥–Ω—è)
**–¶–µ–ª—å:** –û—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã

#### 2.1 –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞
- [x] –°–æ–∑–¥–∞–Ω UnifiedFarmingCalculator.ts
  - ‚úÖ –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç–æ—á–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ farming income
  - ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤—ã–∑–æ–≤–æ–≤ —Å call stack
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è deposit_amount !== null
  - ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è: –º–∞–∫—Å–∏–º—É–º 288 –ø–µ—Ä–∏–æ–¥–æ–≤ (24 —á–∞—Å–∞)
  - ‚úÖ –õ–∏–º–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: –º–∞–∫—Å–∏–º—É–º 10k UNI
  - ‚úÖ –ú–µ—Ç–æ–¥ validateCalculation –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- [x] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ farmingScheduler.ts
  - ‚úÖ –ó–∞–º–µ–Ω–µ–Ω —Å—Ç–∞—Ä—ã–π calculateUniFarmingIncome
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≤ farmerIncomes

#### 2.2 –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ä—ã
- [x] –î–æ–±–∞–≤–∏—Ç—å –≤ `farmingScheduler.ts`:
  ```typescript
  if (!farmer.deposit_amount || farmer.deposit_amount === '0') {
    logger.warn(`SKIP: User ${farmer.user_id} has no deposit`);
    continue;
  }
  ```
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Å—Ç—Ä–æ–∫–∏ 101-105
- [x] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –∞–ª–µ—Ä—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π >1000 UNI
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∞–ª–µ—Ä—Ç –≤ —Å—Ç—Ä–æ–∫–∏ 111-118
  - ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ userId, amount, depositAmount, lastUpdate

#### 2.3 –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- [x] –ù–∞–π—Ç–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ cron/schedulers:
  - ‚úÖ fix-farming-scheduler.ts - –ø—Ä—è–º–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –º–∏–Ω—É—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (—Å—Ç—Ä–æ–∫–∏ 38-75)
  - ‚úÖ test-farming-scheduler-once.ts - —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
  - ‚úÖ –ü—Ä—è–º—ã–µ SQL –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–≤ –≤ fix-farming-scheduler.ts (—Å—Ç—Ä–æ–∫–∏ 59-66)
- [x] –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª–∏—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
  - ‚úÖ fix-farming-scheduler.ts ‚Üí fix-farming-scheduler.ts.disabled
  - ‚úÖ test-farming-scheduler-once.ts ‚Üí test-farming-scheduler-once.ts.disabled
- [x] –î–æ–±–∞–≤–∏—Ç—å distributed lock –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ isProcessing –≤ FarmingScheduler
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ 4.5 –º–∏–Ω—É—Ç—ã –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏
  - ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–ø—É—Å–∫–æ–≤ —Å –ø—Ä–∏—á–∏–Ω–∞–º–∏
  - ‚úÖ Finally –±–ª–æ–∫ –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–Ω—è—Ç–∏—è lock

### –§–ê–ó–ê 3: –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –î–ê–ù–ù–´–• (3-4 –¥–Ω—è)
**–¶–µ–ª—å:** –ü—Ä–∏–≤–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

#### 3.1 –ú–∏–≥—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [x] –î–ª—è –≤—Å–µ—Ö —Å `uni_deposit_amount = NULL`:
  - –ï—Å–ª–∏ –µ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ `FARMING_DEPOSIT` ‚Üí –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—É–º–º—É
  - –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `uni_deposit_amount = 0`
  - ‚úÖ –°–æ–∑–¥–∞–Ω –∏ –∑–∞–ø—É—â–µ–Ω phase3-migrate-null-deposits.ts
  - ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: 0 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å NULL –¥–µ–ø–æ–∑–∏—Ç–∞–º–∏ –Ω–∞–π–¥–µ–Ω–æ
  
#### 3.2 –ü–µ—Ä–µ—Ä–∞—Å—á–µ—Ç –±–∞–ª–∞–Ω—Å–æ–≤
- [x] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç `scripts/recalculate-farming-balances.ts`
- [x] –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
  1. –°—É–º–º–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ `FARMING_DEPOSIT` —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  2. –°—É–º–º–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ `FARMING_REWARD` —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–µ–∫—É—â–µ–º—É –±–∞–ª–∞–Ω—Å—É
  4. –°–æ–∑–¥–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—â–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
  - ‚úÖ –°–æ–∑–¥–∞–Ω phase3-recalculate-farming-balances.ts
  - ‚úÖ User 74: –¥–µ–ø–æ–∑–∏—Ç—ã 6,293,682 UNI, –Ω–∞–≥—Ä–∞–¥—ã 740,942 UNI
  - ‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∞–Ω–æ–º–∞–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ >5000 UNI

#### 3.3 –û—á–∏—Å—Ç–∫–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π
- [x] –°–±—Ä–æ—Å–∏—Ç—å `uni_farming_last_update` –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∞—Ä–º–µ—Ä–æ–≤
- [x] –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞
  - ‚úÖ –°–æ–∑–¥–∞–Ω phase3-reset-farming-timestamps.ts
  - ‚úÖ –°–±—Ä–æ—à–µ–Ω—ã timestamps –¥–ª—è 36 –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∞—Ä–º–µ—Ä–æ–≤
  - ‚úÖ –ù–æ–≤—ã–π timestamp: 2025-07-14T13:52:30.530Z

### –§–ê–ó–ê 4: –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ô –†–ï–§–ê–ö–¢–û–†–ò–ù–ì (5-7 –¥–Ω–µ–π)
**–¶–µ–ª—å:** –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 4.1 –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Scheduler      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ UnifiedFarming  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ AuditLogger  ‚îÇ
‚îÇ Calculator      ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ TransactionSvc  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Database    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### 4.2 –ó–∞—â–∏—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã
- [ ] **Idempotency keys**: –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- [ ] **Rate limiting**: –º–∞–∫—Å–∏–º—É–º 1 –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞ 5 –º–∏–Ω—É—Ç –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] **Validation layer**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ä–∞—Å—á–µ—Ç–æ–≤ –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é
- [ ] **Audit trail**: –ø–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

#### 4.3 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [ ] Dashboard —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏:
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É
  - –°—Ä–µ–¥–Ω—è—è/–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –∞–Ω–æ–º–∞–ª–∏—è–º–∏
- [ ] –ê–ª–µ—Ä—Ç—ã:
  - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è > 1000 UNI
  - –ë–æ–ª–µ–µ 2 –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π –∑–∞ 5 –º–∏–Ω—É—Ç –æ–¥–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  - –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–∏ deposit_amount = 0

### –§–ê–ó–ê 5: –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï (2-3 –¥–Ω—è)
**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã

#### 5.1 Unit —Ç–µ—Å—Ç—ã
- [ ] –¢–µ—Å—Ç —Ä–∞—Å—á–µ—Ç–∞ –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ª—É—á–∞–π)
- [ ] –¢–µ—Å—Ç —Å null –¥–µ–ø–æ–∑–∏—Ç–æ–º (–¥–æ–ª–∂–µ–Ω –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å—Å—è)
- [ ] –¢–µ—Å—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤

#### 5.2 Integration —Ç–µ—Å—Ç—ã
- [ ] –°–∏–º—É–ª—è—Ü–∏—è 48 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—É–º–º –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π

#### 5.3 Regression —Ç–µ—Å—Ç—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

## üìä –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

1. **100% —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã –æ—Ç `deposit_amount`
2. **0 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** —Å `uni_deposit_amount = NULL` –∏ –∞–∫—Ç–∏–≤–Ω—ã–º —Ñ–∞—Ä–º–∏–Ω–≥–æ–º
3. **0 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** > –æ–∂–∏–¥–∞–µ–º–æ–≥–æ –¥–Ω–µ–≤–Ω–æ–≥–æ –¥–æ—Ö–æ–¥–∞ (deposit * 0.01)
4. **–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 95%** –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–±—Ä–∞—â–µ–Ω–∏–π –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø–æ farming

## ‚è±Ô∏è TIMELINE

| –§–∞–∑–∞ | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ö–æ–º–∞–Ω–¥–∞ |
|------|--------------|---------|
| –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ | 1-2 –¥–Ω—è | Backend + DevOps |
| –ò–∑–æ–ª—è—Ü–∏—è | 2-3 –¥–Ω—è | Backend |
| –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö | 3-4 –¥–Ω—è | Backend + DBA |
| –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ | 5-7 –¥–Ω–µ–π | Backend + –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 2-3 –¥–Ω—è | QA + Backend |
| **–ò–¢–û–ì–û** | **13-19 –¥–Ω–µ–π** | |

## üö® –†–ò–°–ö–ò –ò –ú–ò–¢–ò–ì–ê–¶–ò–Ø

### –†–∏—Å–∫ 1: –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** 
- –ü–æ–ª–Ω—ã–π backup –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º
- –†–∞–±–æ—Ç–∞ –Ω–∞ –∫–æ–ø–∏–∏ –ë–î
- –ü–æ—ç—Ç–∞–ø–Ω—ã–π rollout

### –†–∏—Å–∫ 2: –ù–µ–¥–æ–≤–æ–ª—å—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö
- –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
- –ì–æ—Ä—è—á–∞—è –ª–∏–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### –†–∏—Å–∫ 3: –ù–æ–≤—ã–µ –±–∞–≥–∏ –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- Feature flags –¥–ª—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è
- A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 5% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ë—ã—Å—Ç—Ä—ã–π rollback –º–µ—Ö–∞–Ω–∏–∑–º

## üìù –ß–ï–ö–õ–ò–°–¢ –ì–û–¢–û–í–ù–û–°–¢–ò –ö PRODUCTION

- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (unit, integration, regression)
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –≤ –Ω–æ—Ä–º–µ –Ω–∞ staging –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] Runbook –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω
- [ ] –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

## üéØ –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –£–°–ü–ï–•–ê

–°–∏—Å—Ç–µ–º–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –∫–æ–≥–¥–∞:
1. –ó–∞ 7 –¥–Ω–µ–π —Ä–∞–±–æ—Ç—ã –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –Ω–∏ –æ–¥–Ω–æ–π –∞–Ω–æ–º–∞–ª—å–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2. –í—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∞—Ä–º–µ—Ä—ã –ø–æ–ª—É—á–∞—é—Ç –¥–æ—Ö–æ–¥ —Å—Ç—Ä–æ–≥–æ –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞
3. –ö–æ–¥ –ø—Ä–æ—à–µ–ª security audit
4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ –ø–æ–Ω—è—Ç–Ω–∞ –Ω–æ–≤—ã–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º

---

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Lead Backend Developer  
**–£—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–π:** CTO  
**–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:** –ü–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—é  
**–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è:** –ù–∞—á–∞–ª–æ + 19 –¥–Ω–µ–π

*–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å–∏—Å—Ç–µ–º—ã UniFarming.*