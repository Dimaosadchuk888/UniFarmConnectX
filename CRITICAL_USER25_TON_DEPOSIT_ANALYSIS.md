# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó: User #25 TON –¥–µ–ø–æ–∑–∏—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**–î–∞—Ç–∞:** 20 –∏—é–ª—è 2025  
**–£—Å–ª–æ–≤–∏–µ:** –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô –í –ö–û–î - —Ç–æ–ª—å–∫–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞  
**User ID:** 25  
**–°—É–º–º–∞:** 0.1 TON  
**Hash:** b30da7471672b8fc154baca674b2cc9c0829ead2a443bfa901f7b676ced2c70d  
**–†–µ—Ñ-–∫–æ–¥:** REF_1750079004411_nddfp2  

## üîç –ê–ù–ê–õ–ò–ó –û–ö–†–£–ñ–ï–ù–ò–ô

### 1. –¢–µ–∫—É—â–µ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (Replit Preview)
- **User –≤ –ª–æ–≥–∞—Ö:** ID 184 (—Ç–µ—Å—Ç–æ–≤—ã–π)
- **–†–µ—Ñ-–∫–æ–¥ –≤ –ª–æ–≥–∞—Ö:** REF_1752755835358_yjrusv (–ù–ï —Å–æ–≤–ø–∞–¥–∞–µ—Ç!)
- **TON Balance:** 1.876239 (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** Replit Preview –ë–î

### 2. Production –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–≥–¥–µ –ø—Ä–æ–∏–∑–æ—à–µ–ª –¥–µ–ø–æ–∑–∏—Ç)
- **User ID:** 25 (—Ä–µ–∞–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
- **–†–µ—Ñ-–∫–æ–¥:** REF_1750079004411_nddfp2 (–∏–∑ –∑–∞–¥–∞—á–∏)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** Production –ë–î (Supabase/Neon)
- **–°—Ç–∞—Ç—É—Å:** User #25 –ù–ï –ù–ê–ô–î–ï–ù –≤ —Ç–µ–∫—É—â–∏—Ö –ª–æ–≥–∞—Ö!

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ù–ê–•–û–î–ö–ê

**–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –í–ï–î–ï–¢–°–Ø –í –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û–ú –û–ö–†–£–ñ–ï–ù–ò–ò!**

–ò–∑ frontend –ª–æ–≥–æ–≤ –≤–∏–¥–Ω–æ:
```
"ref_code": "REF_1752755835358_yjrusv"  ‚Üê Replit Preview
"id": 184                               ‚Üê –¢–µ—Å—Ç–æ–≤—ã–π User

–ù–û –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç:
ref_code: "REF_1750079004411_nddfp2"    ‚Üê Production
id: 25                                  ‚Üê –†–µ–∞–ª—å–Ω—ã–π User
```

## üîÑ –¶–ï–ü–û–ß–ö–ê –û–ë–ù–û–í–õ–ï–ù–ò–Ø –ë–ê–õ–ê–ù–°–ê (Preview)

### –†–∞–±–æ—Ç–∞—é—â–∞—è —Ü–µ–ø–æ—á–∫–∞ –≤ Preview:
```
1. WebSocket heartbeat ‚úÖ
2. Auto-refresh –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫ ‚úÖ  
3. API /api/v2/wallet/balance ‚úÖ
4. BalanceService.refreshBalance() ‚úÖ
5. UserContext.SET_BALANCE ‚úÖ
6. UI –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ‚úÖ
```

### –ü—Ä–æ–±–ª–µ–º–∞ —Å Production –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º:
```
1. User #25 –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Preview –ë–î ‚ùå
2. API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404 –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚ùå
3. Frontend –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚ùå
4. –ë–∞–ª–∞–Ω—Å –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è ‚ùå
```

## üéØ –õ–û–ö–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–û–ë–õ–ï–ú–´

### –¢–æ—á–∫–∞ —Ä–∞–∑—Ä—ã–≤–∞: **Environment Mismatch**

**–ì–î–ï:** –ú–µ–∂–¥—É Production backend –∏ Preview frontend
**–ß–¢–û:** User #25 —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤ Production –ë–î
**–ü–û–ß–ï–ú–£:** –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤–µ–¥–µ—Ç—Å—è –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—á–∞—Å—Ç–∫–∏ –∫–æ–¥–∞ (–¥–ª—è –∞–Ω–∞–ª–∏–∑–∞):

1. **client/src/services/balanceService.ts**
   - –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç `/api/v2/wallet/balance?user_id=${userId}`
   - –î–ª—è User #25 –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 404

2. **client/src/contexts/userContext.tsx**  
   - refreshBalance() –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ User
   - SET_BALANCE –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

3. **modules/wallet/controller.ts**
   - getBalance() –¥–ª—è User #25 –Ω–µ –Ω–∞–π–¥–µ—Ç –∑–∞–ø–∏—Å–∏
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç error –∏–ª–∏ –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ

## üîß –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ò–ï –í–´–í–û–î–´

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å User #25:
1. **TON –¥–µ–ø–æ–∑–∏—Ç —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω** –≤ Production ‚úÖ
2. **–ê–¥–º–∏–Ω –ø–æ–ª—É—á–∏–ª —Å—Ä–µ–¥—Å—Ç–≤–∞** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã ‚úÖ  
3. **Frontend UI –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è** - User #25 –Ω–µ –≤ Preview –ë–î ‚ùå
4. **WebSocket –ø–æ–¥–ø–∏—Å–∫–∞** –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ User ‚ùå

### –ß—Ç–æ –¥–æ–ª–∂–Ω–æ —Å—Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
```
Production Flow (–æ–∂–∏–¥–∞–µ–º—ã–π):
Deposit ‚Üí BalanceManager.addBalance() ‚Üí WebSocket notify ‚Üí Frontend update

Preview Flow (—Ç–µ–∫—É—â–∏–π):
User #25 request ‚Üí 404 Error ‚Üí No balance data ‚Üí No UI update
```

## üí° –†–ï–®–ï–ù–ò–ï –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–Ø –ö–û–î–ê

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
1. **–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞**
2. **–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Production domain** (–Ω–µ Preview)
3. **–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å Ctrl+F5**
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

### –î–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
1. **–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ Production environment**
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å User #25 –≤ Production –ë–î**
3. **–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Production –ª–æ–≥–∏ TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤**
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å WebSocket –≤ Production**

## üìã –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:** Environment mismatch –º–µ–∂–¥—É Production (–≥–¥–µ –ø—Ä–æ–∏–∑–æ—à–µ–ª –¥–µ–ø–æ–∑–∏—Ç) –∏ Preview (–≥–¥–µ –≤–µ–¥–µ—Ç—Å—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞).

**–¢–û–ß–ö–ê –†–ê–ó–†–´–í–ê:** –†–∞–∑–ª–∏—á–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö - User #25 –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Preview –ë–î.

**–°–¢–ê–¢–£–°:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–∞ - —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ Production environment –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è User #25.

---
**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥**