# –û—Ç—á—ë—Ç: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è Replit Preview
**–î–∞—Ç–∞:** 12.07.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

## üß† –û–∫—Ä—É–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞:

### –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- **NODE_ENV:** `production`
- **–ü—Ä–æ—Ü–µ—Å—Å:** `server/index.ts` –∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ TSX
- **Health endpoint:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{"status": "ok", "environment": "production"}`
- **–í–µ—Ä—Å–∏—è API:** `v2`

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
‚úÖ **SUPABASE_URL** - –°—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Replit Secrets
‚úÖ **SUPABASE_KEY** - –°—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Replit Secrets
‚úÖ **JWT_SECRET** - –°—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Replit Secrets
‚úÖ **TELEGRAM_BOT_TOKEN** - –°—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Replit Secrets
‚úÖ **NODE_ENV** - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ `production`

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Supabase:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `core/supabase.ts`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `process.env`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞

## üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î:

### –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤ Frontend:
```json
{
  "success": true,
  "data": {
    "user_id": 74,
    "balance_uni": 1004900.122573,
    "uni_farming_active": true,
    "uni_deposit_amount": 412589,
    "uni_farming_balance": 0,
    "uni_farming_rate": 0.01,
    "uni_farming_start_timestamp": "2025-07-11T07:59:13.539"
  }
}
```

**‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ:** API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î Supabase

## üìä –¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 74:
- **UNI Balance:** 1,004,900.123 UNI
- **TON Balance:** 898.119 TON  
- **UNI Farming:** –ê–∫—Ç–∏–≤–µ–Ω ‚úÖ
- **–î–µ–ø–æ–∑–∏—Ç:** 412,589 UNI
- **–°—Ç–∞–≤–∫–∞:** 1% –≤ –¥–µ–Ω—å (0.01)

## üß© WebSocket —Å—Ç–∞—Ç—É—Å:

### –ò–∑ –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤:
- ‚úÖ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω –∏ –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ Heartbeat ping/pong —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –¥–ª—è user 74 –∞–∫—Ç–∏–≤–Ω–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 15-30 —Å–µ–∫—É–Ω–¥

### WebSocket —Å–æ–±—ã—Ç–∏—è:
```
[WebSocket] –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: 74
[WebSocket] Heartbeat ping –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
[WebSocket] Heartbeat pong –ø–æ–ª—É—á–µ–Ω
```

## ‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

1. **JWT —Ç–æ–∫–µ–Ω—ã:** Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–∫–µ–Ω —Å –¥–ª–∏–Ω–æ–π 244 —Å–∏–º–≤–æ–ª–∞, –Ω–æ –ø—Ä–∏ –ø—Ä—è–º—ã—Ö curl –∑–∞–ø—Ä–æ—Å–∞—Ö –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞ "invalid signature". –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Ç–∞–∫ –∫–∞–∫ —Ç–æ–∫–µ–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å —Ä–∞–∑–Ω—ã–º–∏ JWT_SECRET –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–µ—Å—Å–∏–π.

2. **Production —Ä–µ–∂–∏–º:** –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ "Replit Preview", —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ production —Ä–µ–∂–∏–º–µ (NODE_ENV=production), —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
   - –ù–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è .env —Ñ–∞–π–ª
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ Replit Secrets
   - –í–∫–ª—é—á–µ–Ω—ã production –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

3. **API —Ñ–æ—Ä–º–∞—Ç—ã:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ camelCase —Ñ–æ—Ä–º–∞—Ç–µ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

## ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:

1. **–û–∫—Ä—É–∂–µ–Ω–∏–µ:** Production —Å–µ—Ä–≤–µ—Ä —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î ‚úÖ
2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** Supabase –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚úÖ
3. **API endpoints:** –†–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è ‚úÖ
4. **WebSocket:** –ê–∫—Ç–∏–≤–µ–Ω, real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç ‚úÖ
5. **UI –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:** –ë–∞–ª–∞–Ω—Å—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚úÖ

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ:

**Replit Preview –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:**
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ **production** —Å–µ—Ä–≤–µ—Ä–µ (–Ω–µ development)
- –ü–æ–¥–∫–ª—é—á–µ–Ω –∫ **—Ä–µ–∞–ª—å–Ω–æ–π Supabase –ë–î**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç **–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã** —á–µ—Ä–µ–∑ API
- **WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –í—Å–µ —Å–∏—Å—Ç–µ–º—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

–ú–æ–∂–Ω–æ –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:
- ‚úÖ –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–µ–ø–æ–∑–∏—Ç–æ–≤
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–∞ –æ—Ç —Ñ–∞—Ä–º–∏–Ω–≥–∞
- ‚úÖ WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–æ–≤
- ‚úÖ TON –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –¥—Ä—É–≥–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏