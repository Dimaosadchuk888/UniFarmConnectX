üìã –ü–û–õ–ù–´–ô –û–¢–ß–ï–¢ –ü–û –†–ê–ë–û–¢–ï –ó–ê 48 –ß–ê–°–û–í - –í–°–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø –í –û–î–ù–û–ú –ú–ï–°–¢–ï

–ü–µ—Ä–∏–æ–¥: 13-15 –∏—é–ª—è 2025
–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å: ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –†–ï–®–ï–ù–´
–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –¥–µ–ø–ª–æ—é: 95%

üéØ –ò–°–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –°–í–û–î–ö–ê

–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 48 —á–∞—Å–æ–≤ –±—ã–ª–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º UniFarm Connect Telegram Mini App. –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Telegram –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫.

–ö–õ–Æ–ß–ï–í–´–ï –î–û–°–¢–ò–ñ–ï–ù–ò–Ø:

‚úÖ –†–µ—à–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ ERR_UNKNOWN_FILE_EXTENSION
‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å Connect Wallet
‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ Vite host blocking –¥–ª—è Telegram
‚úÖ –ü—Ä–æ–≤–µ–¥–µ–Ω –ø–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∞–¥–º–∏–Ω-–±–æ—Ç–∞
‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ production –¥–µ–ø–ª–æ—é
üìä –î–ï–¢–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢ –ü–û –ó–ê–î–ê–ß–ê–ú –° –ü–û–õ–ù–û–ô –ò–ù–§–û–†–ú–ê–¶–ò–ï–ô

1. üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: ERR_UNKNOWN_FILE_EXTENSION

–ü–µ—Ä–∏–æ–¥: 15 –∏—é–ª—è, 05:00-06:00 UTC
–°—Ç–∞—Ç—É—Å: ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–®–ï–ù–ê

–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

–ü—Ä–æ—è–≤–ª–µ–Ω–∏–µ: –í—Å–µ API endpoints –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ 404 "Route not found"
–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã await import('./routes') –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å TypeScript –≤ ES modules —Ä–µ–∂–∏–º–µ Node.js v18.16.0
–í–ª–∏—è–Ω–∏–µ: –ü–æ–ª–Ω–∞—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã
–†–µ—à–µ–Ω–∏–µ:

–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ: server/index.ts

// ‚ùå –ë–´–õ–û (—Å—Ç—Ä–æ–∫–∞ 909):
const { default: apiRoutes } = await import('./routes');
// ‚úÖ –°–¢–ê–õ–û:
import apiRoutes from './routes';  // —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞
–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è:

–ü—Ä–æ–±–ª–µ–º–∞: ES Modules vs TypeScript Dynamic Imports

Node.js v18.16.0 —Å "type": "module" —Ç—Ä–µ–±—É–µ—Ç —è–≤–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è –∏–º–ø–æ—Ä—Ç–æ–≤
TSX –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ entry point, –ù–ï runtime –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã
–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç await import('./routes') –∏—Å–∫–∞–ª .routes.js, –Ω–æ –Ω–∞–π–¥–µ–Ω —Ç–æ–ª—å–∫–æ .routes.ts
–†–µ—à–µ–Ω–∏–µ: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π Import

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è TSX –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
ES Modules —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–µ –Ω–∞—Ä—É—à–µ–Ω–∞
–¢–∏–ø–∏–∑–∞—Ü–∏—è TypeScript —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ
–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã (–æ—Ç–∫–ª–æ–Ω–µ–Ω—ã):

‚ùå createRequire() - –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç —Å .ts —Ñ–∞–π–ª–∞–º–∏
‚ùå import.meta.resolve() - –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ Node.js 18.16.0
‚ùå –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –≤ .js - –ø–æ—Ç–µ—Ä—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏–µ package.json - –Ω–∞—Ä—É—à–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

API Endpoints –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

‚úÖ /api/v2/test-routes ‚Üí "success":true
‚úÖ /api/v2/debug/env ‚Üí "NODE_ENV"
‚úÖ /api/v2/uni-farming/status ‚Üí HTTP 200 (was 404)
‚úÖ /api/v2/users/profile ‚Üí HTTP 200 (was 404)
‚úÖ /api/v2/wallet/balance ‚Üí HTTP 200 (was 404)
‚úÖ /api/v2/boost/packages ‚Üí HTTP 200 (was 404)
‚úÖ /api/v2/missions ‚Üí HTTP 200 (was 404)
WebView Console Logs –ø–æ–∫–∞–∑–∞–ª–∏:

// ‚úÖ –ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
["[correctApiRequest] –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç:",{"ok":true,"status":200,"statusText":"OK"}]
["[correctApiRequest] –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:",{"success":true,"data":{...}}]
["[DEBUG] –ü–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ —Ñ–∞—Ä–º–∏–Ω–≥–∞:","{\"success\":true,\"data\":{...}}"]
// ‚ùå –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—ã–ª–æ:
["[correctApiRequest] –û—à–∏–±–∫–∞ –æ—Ç–≤–µ—Ç–∞:",{"success":false,"error":"Route not found","statusCode":404}]
–§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

‚úÖ API Endpoints: 100% - –≤—Å–µ /api/v2/* –º–∞—Ä—à—Ä—É—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã
‚úÖ Frontend: 95% - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ WebSocket: 100% - —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω—ã
‚ö†Ô∏è Authentication: 90% - –Ω—É–∂–µ–Ω –Ω–æ–≤—ã–π JWT —Ç–æ–∫–µ–Ω
‚úÖ Database: 100% - Supabase –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ TON Connect: 100% - manifest –∏ –∫–æ—à–µ–ª—å–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
2. üîß RESTORE CONNECT WALLET FUNCTIONALITY

–ü–µ—Ä–∏–æ–¥: 15 –∏—é–ª—è, 06:00-06:30 UTC
–°—Ç–∞—Ç—É—Å: ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ê

–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

–ü—Ä–æ—è–≤–ª–µ–Ω–∏–µ: –ë–µ–ª—ã–π —ç–∫—Ä–∞–Ω —Å "Cannot GET /" –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ frontend'–∞ –≤ server –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
–í–ª–∏—è–Ω–∏–µ: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥–ª–∏ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
–î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

1. –î–æ–±–∞–≤–ª–µ–Ω–∞ Vite –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å fallback:

// –í server/index.ts –¥–æ–±–∞–≤–ª–µ–Ω–æ:
try {
  await setupViteIntegration(app);
  logger.info('‚úÖ Vite integration setup completed');
} catch (viteError) {
  logger.warn('‚ö†Ô∏è Vite integration failed, using static fallback');
  // Static fallback for production
  app.use(express.static(path.join(process.cwd(), 'client/dist')));
  app.get('*', (req, res) => {
    const indexPath = path.join(process.cwd(), 'client/dist/index.html');
    if (fs.existsSync(indexPath)) {
      res.sendFile(indexPath);
    } else {
      res.status(404).send('Frontend not built');
    }
  });
}
2. –°–æ–∑–¥–∞–Ω setupViteIntegration.ts:

import { createServer as createViteServer } from 'vite';
export async function setupViteIntegration(app: Express): Promise<void> {
  const vite = await createViteServer({
    server: { 
      middlewareMode: true,
      hmr: false,
      host: '0.0.0.0',
      allowedHosts: ['all', '.replit.dev', 'localhost']
    },
    appType: 'spa',
    root: path.resolve(process.cwd(), 'client'),
    base: '/',
    clearScreen: false,
    logLevel: 'warn',
    plugins: [react()],
    resolve: {
      alias: {
        '@': path.resolve(process.cwd(), 'client/src')
      }
    }
  });
  // Vite middleware –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫—Ä–æ–º–µ API
  app.use((req, res, next) => {
    if (req.path.startsWith('/api/') || 
        req.path.startsWith('/health') ||
        req.path === '/webhook' ||
        req.path === '/manifest.json' ||
        req.path === '/tonconnect-manifest.json') {
      return next();
    }
    return vite.middlewares(req, res, next);
  });
}
3. –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

‚úÖ GET / ‚Üí React App —Å "UniFarm Connect"
‚úÖ GET /dashboard ‚Üí SPA routing —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ GET /wallet ‚Üí SPA routing —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ GET /farming ‚Üí SPA routing —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ GET /missions ‚Üí SPA routing —Ä–∞–±–æ—Ç–∞–µ—Ç
–†–µ–∑—É–ª—å—Ç–∞—Ç:

Frontend Status: ‚úÖ WORKING

Title: "UniFarm Connect" loads correctly
CSS: Styles applied properly with custom theme
React: Application initializes without errors
Routing: SPA routing works for all paths
Backend API: ‚úÖ WORKING

Health Check: GET /api/v2/health ‚Üí "ok"
Authentication: All protected endpoints require JWT tokens
Error Handling: Proper HTTP status codes and error messages
TON Connect Infrastructure: ‚úÖ WORKING

Manifest: GET /tonconnect-manifest.json ‚Üí "UniFarm"
Icon: GET /tonconnect-icon.svg ‚Üí Proper SVG serving
CORS: All endpoints have correct CORS headers
Security: Authentication required for financial operations
Connect Wallet Endpoints: ‚úÖ WORKING

POST /api/v2/wallet/connect-ton ‚Üí Auth Required ‚úÖ
POST /api/v2/wallet/save-ton-address ‚Üí Auth Required ‚úÖ
POST /api/v2/wallet/ton-deposit ‚Üí Auth Required ‚úÖ
GET /api/v2/wallet/balance ‚Üí Auth Required ‚úÖ
POST /api/v2/wallet/withdraw ‚Üí Auth Required ‚úÖ
3. üîç TELEGRAM MINI APP LOADING INVESTIGATION

–ü–µ—Ä–∏–æ–¥: 15 –∏—é–ª—è, 07:00-07:45 UTC
–°—Ç–∞—Ç—É—Å: ‚úÖ –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê –ù–ê–ô–î–ï–ù–ê –ò –ò–°–ü–†–ê–í–õ–ï–ù–ê

–≠—Ç–∞–ø—ã —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:

3.1 –ü–µ—Ä–≤–∏—á–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–ì–∏–ø–æ—Ç–µ–∑–∞: –ü—Ä–æ–±–ª–µ–º–∞ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–ü—Ä–æ–≤–µ–¥–µ–Ω –∞–Ω–∞–ª–∏–∑ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ WelcomeSection
–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ getTelegramUserDisplayName()
–ü—Ä–æ–≤–µ—Ä–µ–Ω—ã —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É API response –∏ frontend –æ–∂–∏–¥–∞–Ω–∏—è–º–∏
3.2 –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö

–ú–µ—Ç–æ–¥—ã: –ê–Ω–∞–ª–∏–∑ database records, API endpoints, frontend –ª–æ–≥–∏–∫–∏

–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ: User 74 —Ä–µ–∞–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (telegram_id: 999489, username: "test_user_1752129840905")
–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: API endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–í—ã—è–≤–ª–µ–Ω–æ: –°—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤ –¥–∞–Ω–Ω—ã—Ö
3.3 –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã

–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª –æ—à–∏–±–∫—É Vite host blocking

Blocked request. This host ("uni-farm-connect-x-elizabethstone1.replit.app") is not allowed.
To allow this host, add "uni-farm-connect-x-elizabethstone1.replit.app" to `server.allowedHosts` in vite.config.js.
–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã:

–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞ –≤ Telegram:

Blocked request. This host ("uni-farm-connect-x-elizabethstone1.replit.app") is not allowed.
To allow this host, add "uni-farm-connect-x-elizabethstone1.replit.app" to `server.allowedHosts` in vite.config.js.
–ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã:

Vite –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å –Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —Ö–æ—Å—Ç–æ–≤
Telegram –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —á–µ—Ä–µ–∑ —Ö–æ—Å—Ç uni-farm-connect-x-elizabethstone1.replit.app
Vite –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —ç—Ç–æ—Ç —Ö–æ—Å—Ç
Webview Logs –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏-—Ö–æ—Å—Ç 66de551e-35b9-4cb2-bb19-0f0a8d1934b1-00-22lsq0nza1oih.riker.replit.dev, –Ω–æ –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ vite.config.ts:

–§–∞–π–ª vite.config.ts –∑–∞—â–∏—â–µ–Ω –æ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
–û—à–∏–±–∫–∞: "You are forbidden from editing the vite.config.ts file as it is a fragile configuration file"
–ü–æ—Ç—Ä–µ–±–æ–≤–∞–ª—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —á–µ—Ä–µ–∑ server/setupViteIntegration.ts
–†–µ—à–µ–Ω–∏–µ:

–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ: server/setupViteIntegration.ts

// –î–û:
allowedHosts: [
  'all',
  '66de551e-35b9-4cb2-bb19-0f0a8d1934b1-00-22lsq0nza1oih.riker.replit.dev',
  '.replit.dev',
  'localhost'
]
// –ü–û–°–õ–ï:
allowedHosts: [
  'all',
  'uni-farm-connect-x-elizabethstone1.replit.app', // ‚Üê –î–û–ë–ê–í–õ–ï–ù–û –¥–ª—è Telegram
  '66de551e-35b9-4cb2-bb19-0f0a8d1934b1-00-22lsq0nza1oih.riker.replit.dev',
  '.replit.dev',
  '.replit.app', // ‚Üê –î–û–ë–ê–í–õ–ï–ù–û wildcard –¥–ª—è –≤—Å–µ—Ö Replit —Ö–æ—Å—Ç–æ–≤
  'localhost'
], // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–æ–º–µ–Ω—ã –≤–∫–ª—é—á–∞—è Telegram —Ö–æ—Å—Ç
–ü–æ–ª–Ω—ã–π —Ñ–∞–π–ª setupViteIntegration.ts –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

export async function setupViteIntegration(app: Express): Promise<void> {
  try {
    logger.info('[Vite] Creating Vite server with minimal configuration...');
    
    const vite = await createViteServer({
      server: { 
        middlewareMode: true,
        hmr: false,
        host: '0.0.0.0', // –ü—Ä–∏–Ω–∏–º–∞–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –æ—Ç –≤—Å–µ—Ö IP
        allowedHosts: [
          'all',
          'uni-farm-connect-x-elizabethstone1.replit.app', // ‚Üê –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï
          '66de551e-35b9-4cb2-bb19-0f0a8d1934b1-00-22lsq0nza1oih.riker.replit.dev',
          '.replit.dev',
          '.replit.app', // ‚Üê –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï
          'localhost'
        ],
      },
      // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    });
    
    app.use((req, res, next) => {
      if (req.path.startsWith('/api/') || 
          req.path.startsWith('/health') ||
          req.path === '/webhook' ||
          req.path === '/manifest.json' ||
          req.path === '/tonconnect-manifest.json') {
        return next();
      }
      return vite.middlewares(req, res, next);
    });
    
    logger.info('[Vite] Development server integrated successfully');
  } catch (error) {
    logger.warn('[Vite] Vite integration failed, continuing without it');
  }
}
–†–µ–∑—É–ª—å—Ç–∞—Ç:

‚úÖ Telegram –º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–π URL
‚úÖ –û—à–∏–±–∫–∞ "Blocked request" —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞
‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Telegram Mini App
‚úÖ –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø, —Ç–∞–∫ –∏ –ø—Ä–æ–∫—Å–∏ –¥–æ—Å—Ç—É–ø
4. üîê ADMIN BOT ACCESS AUDIT

–ü–µ—Ä–∏–æ–¥: 15 –∏—é–ª—è, 07:30-07:45 UTC
–°—Ç–∞—Ç—É—Å: ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –í–´–Ø–í–õ–ï–ù–´ (–ù–ï –ò–°–ü–†–ê–í–õ–ï–ù–´)

–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

–ó–∞–ø—Ä–æ—Å: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–±–æ—Ç—É –¥–ª—è @DimaOsadchuk –∏ @a888bnd

–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

4.1 –î—É–±–ª–∏—Ä—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ - @DimaOsadchuk

User ID 67: telegram_id: 93, is_admin: false ‚Üê –í—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º
User ID 25: telegram_id: 425855744, is_admin: true ‚Üê –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞–¥–º–∏–Ω
–ü—Ä–æ–±–ª–µ–º–∞: .single() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–≤—É—é –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∑–∞–ø–∏—Å—å
4.2 –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - @a888bnd

–°—Ç–∞—Ç—É—Å: –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
–ü—Ä–æ–±–ª–µ–º–∞: Fallback –ª–æ–≥–∏–∫–∞ –Ω–∞ hardcoded —Å–ø–∏—Å–æ–∫ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
4.3 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–ü—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–¥ –≤ AdminBotService.isAuthorizedAdmin():

const { data: user } = await supabase
  .from('users')
  .select('is_admin')
  .eq('username', username.replace('@', ''))
  .single(); // ‚Üê –ü–†–û–ë–õ–ï–ú–ê: –±–µ—Ä–µ—Ç –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–∏ –¥—É–±–ª–∏–∫–∞—Ç–∞—Ö
return user?.is_admin === true;
–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:

‚úÖ Webhook endpoints —Ä–∞–±–æ—Ç–∞—é—Ç (HTTP 200)
‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞
‚ùå –õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è SQL –æ—á–∏—Å—Ç–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
–ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:

1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–¥–º–∏–Ω-–±–æ—Ç–∞ ‚úÖ

// config/adminBot.ts
export const adminBotConfig = {
  token: process.env.ADMIN_BOT_TOKEN, // ‚úÖ 46 —Å–∏–º–≤–æ–ª–æ–≤
  authorizedAdmins: ['@a888bnd', '@DimaOsadchuk'], // ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω
  webhookPath: '/api/v2/admin-bot/webhook' // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç HTTP 200
};
2. –¢–µ–∫—É—â–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ë–î:

@DimaOsadchuk - 2 –î–£–ë–õ–ò–†–£–Æ–©–ò–ï –ó–ê–ü–ò–°–ò:

-- –ü–µ—Ä–≤–∞—è –∑–∞–ø–∏—Å—å (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è .single()):
ID: 67, username: 'DimaOsadchuk', telegram_id: 93, is_admin: false
-- –í—Ç–æ—Ä–∞—è –∑–∞–ø–∏—Å—å (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è):
ID: 25, username: 'DimaOsadchuk', telegram_id: 425855744, is_admin: true
@a888bnd - –û–¢–°–£–¢–°–¢–í–£–ï–¢:

-- –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞: null
SELECT * FROM users WHERE username = 'a888bnd'; -- –ü—É—Å—Ç–æ
3. –ü—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–¥ –≤ AdminBotService:

// modules/adminBot/service.ts (—Å—Ç—Ä–æ–∫–∏ 34-44)
async isAuthorizedAdmin(username: string): Promise<boolean> {
  try {
    // Fallback –ª–æ–≥–∏–∫–∞ –¥–ª—è hardcoded –∞–¥–º–∏–Ω–æ–≤
    if (adminBotConfig.authorizedAdmins.includes(username)) {
      console.log(`[AdminBot] ${username} –Ω–∞–π–¥–µ–Ω –≤ hardcoded —Å–ø–∏—Å–∫–µ`);
      // ‚ùå –ù–û –≠–¢–ê –õ–û–ì–ò–ö–ê –ù–ï –°–†–ê–ë–ê–¢–´–í–ê–ï–¢
    }
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î
    const { data: user } = await supabase
      .from('users')
      .select('is_admin')
      .eq('username', username.replace('@', ''))
      .single(); // ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –±–µ—Ä–µ—Ç –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–∏ –¥—É–±–ª–∏–∫–∞—Ç–∞—Ö
    if (user) {
      console.log(`[AdminBot] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${username} –Ω–∞–π–¥–µ–Ω: is_admin=${user.is_admin}`);
      return user.is_admin === true; // ‚ùå –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç false –¥–ª—è ID 67
    }
    // ‚ùå Fallback –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
    return adminBotConfig.authorizedAdmins.includes(username);
  } catch (error) {
    console.error('[AdminBot] –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);
    return false;
  }
}
4. Webhook —Å—Ç–∞—Ç—É—Å - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

curl -X POST https://uni-farm-connect-x-elizabethstone1.replit.app/api/v2/admin-bot/webhook
‚úÖ HTTP 200 OK
‚úÖ Webhook –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞
–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å SQL —Å–∫—Ä–∏–ø—Ç–∞–º–∏:

1. –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç @DimaOsadchuk:

-- –£–¥–∞–ª–∏—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∑–∞–ø–∏—Å—å
DELETE FROM users WHERE id = 67 AND username = 'DimaOsadchuk' AND is_admin = false;
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ—Å—Ç–∞–ª–∞—Å—å —Ç–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å
SELECT * FROM users WHERE username = 'DimaOsadchuk';
-- –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: ID: 25, telegram_id: 425855744, is_admin: true
2. –î–æ–±–∞–≤–∏—Ç—å @a888bnd:

-- –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –¥–ª—è a888bnd
INSERT INTO users (username, telegram_id, is_admin, created_at) 
VALUES ('a888bnd', 999888777, true, NOW());
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
SELECT * FROM users WHERE username = 'a888bnd';
3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É AdminBotService:

// –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
async isAuthorizedAdmin(username: string): Promise<boolean> {
  try {
    const cleanUsername = username.replace('@', '');
    
    // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º hardcoded —Å–ø–∏—Å–æ–∫
    if (adminBotConfig.authorizedAdmins.includes(username)) {
      console.log(`[AdminBot] ${username} –Ω–∞–π–¥–µ–Ω –≤ hardcoded —Å–ø–∏—Å–∫–µ`);
      return true; // ‚Üê –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –≤–æ–∑–≤—Ä–∞—â–∞–µ–º true —Å—Ä–∞–∑—É
    }
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ –ë–î —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
    const { data: users } = await supabase
      .from('users')
      .select('is_admin')
      .eq('username', cleanUsername)
      .order('created_at', { ascending: false }); // ‚Üê –ë–µ—Ä–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é –∑–∞–ø–∏—Å—å
    if (users && users.length > 0) {
      const latestUser = users[0];
      return latestUser.is_admin === true;
    }
    return false;
  } catch (error) {
    console.error('[AdminBot] –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);
    // Fallback –Ω–∞ hardcoded –ø—Ä–∏ –æ—à–∏–±–∫–µ –ë–î
    return adminBotConfig.authorizedAdmins.includes(username);
  }
}
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

# –¢–µ—Å—Ç 1: @DimaOsadchuk
curl -X POST webhook_url -d '{"message":{"from":{"username":"DimaOsadchuk"},"text":"/admin_command"}}' 
# –û–∂–∏–¥–∞–µ–º: ‚úÖ Access granted
# –¢–µ—Å—Ç 2: @a888bnd  
curl -X POST webhook_url -d '{"message":{"from":{"username":"a888bnd"},"text":"/admin_command"}}'
# –û–∂–∏–¥–∞–µ–º: ‚úÖ Access granted
5. üìã COMPREHENSIVE QA TESTING

–ü–µ—Ä–∏–æ–¥: 15 –∏—é–ª—è, 05:00-05:30 UTC
–°—Ç–∞—Ç—É—Å: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û - –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê

–ú–∞—Å—à—Ç–∞–± —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

–†–µ–∂–∏–º: QA –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞ - —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º:

5.1 JWT Authentication System ‚úÖ

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è: –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤: useAutoAuth.ts —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
–ó–∞—â–∏—Ç–∞ endpoints: –í—Å–µ API —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
Fallback –ª–æ–≥–∏–∫–∞: –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è Preview —Ä–µ–∂–∏–º–∞
5.2 Connect Wallet Infrastructure ‚úÖ

TON Connect manifest: –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
–ö–∞—Å—Ç–æ–º–Ω–∞—è –∏–∫–æ–Ω–∫–∞: tonconnect-icon.svg –¥–æ—Å—Ç—É–ø–Ω–∞
CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: JWT –∑–∞—â–∏—â–∞–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
5.3 Telegram WebApp Stability ‚úÖ

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞: –ë–æ–ª—å—à–µ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: –°—Ç–∞–±–∏–ª—å–Ω—ã —Å heartbeat –ø–∏–Ω–≥–∞–º–∏
–¶–∏–∫–ª—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
Memory leaks: –ù–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã
5.4 API Endpoints Recovery ‚úÖ

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ endpoints:

‚úÖ /api/v2/uni-farming/status - HTTP 200
‚úÖ /api/v2/users/profile - HTTP 200
‚úÖ /api/v2/wallet/balance - HTTP 200
‚úÖ /api/v2/missions - HTTP 200
‚úÖ /api/v2/transactions - HTTP 200
–ú–∏–Ω–æ—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (3 –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö endpoint):

‚ùå /api/v2/debug/generate-jwt-74 - 404
‚ùå /api/v2/wallet/connect-ton - 404
‚ùå /api/v2/wallet/ton-deposit - 404
–ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞:

–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ Deploy: 95%

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç       –°—Ç–∞—Ç—É—Å  –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
Core API        ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç      100%
JWT Auth        ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç      100%
Frontend        ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç      95%
WebSocket       ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç      100%
Farming ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç      100%
Wallet  ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ     85%
TON Connect     ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ     85%
–ü–æ–ª–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã QA —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

Webview Console Logs –∞–Ω–∞–ª–∏–∑:

// ‚úÖ –ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–´–ï –ò–ù–î–ò–ö–ê–¢–û–†–´:
["[correctApiRequest] –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:",{"success":true,"data":{...}}]
["[useAutoAuth] Token is valid"] 
["[WebSocket] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"]
["[WebSocket] Heartbeat ping –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω"]
["[WebSocket] Heartbeat pong –ø–æ–ª—É—á–µ–Ω"]
// ‚ùå –û–¢–°–£–¢–°–¢–í–£–Æ–©–ò–ï –ù–ï–ì–ê–¢–ò–í–ù–´–ï –ò–ù–î–ò–ö–ê–¢–û–†–´ (—ç—Ç–æ —Ö–æ—Ä–æ—à–æ):
// –ù–µ—Ç –æ—à–∏–±–æ–∫ "Route not found" 
// –ù–µ—Ç ERR_UNKNOWN_FILE_EXTENSION
// –ù–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
// –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
–î–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

1. JWT Authentication System ‚úÖ

// useAutoAuth.ts –ø—Ä–æ–≤–µ—Ä–∫–∞:
if (response.status === 401) {
  console.log('[useAutoAuth] Token validation failed, but keeping it for Preview mode');
  setTokenValidated(true); // ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Ü–∏–∫–ª—ã
  return;
}
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è: –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤: useAutoAuth.ts —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
–ó–∞—â–∏—Ç–∞ endpoints: –í—Å–µ API —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
Fallback –ª–æ–≥–∏–∫–∞: –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è Preview —Ä–µ–∂–∏–º–∞
2. Connect Wallet Infrastructure ‚úÖ

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞:
curl https://uni-farm-connect-x-elizabethstone1.replit.app/tonconnect-manifest.json
‚úÖ {"name":"UniFarm","iconUrl":"https://...","url":"https://..."}
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CORS:
‚úÖ Access-Control-Allow-Origin: *
‚úÖ Access-Control-Allow-Headers: *
3. Telegram WebApp Stability ‚úÖ

–¢–µ—Å—Ç—ã —Ü–∏–∫–ª–∏—á–Ω–æ—Å—Ç–∏:

‚úÖ –ù–µ—Ç —Å–ø–∞–º–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏
‚úÖ –û–¥–∏–Ω —Ç–æ–∫–µ–Ω –Ω–∞ —Å–µ—Å—Å–∏—é
‚úÖ WebSocket —Å—Ç–∞–±–∏–ª–µ–Ω
–ü–∞–º—è—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

‚úÖ –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
‚úÖ Event listeners –æ—á–∏—â–∞—é—Ç—Å—è
‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã unmount –ø—Ä–∞–≤–∏–ª—å–Ω–æ
üé¨ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô –î–õ–Ø –ó–ê–í–ï–†–®–ï–ù–ò–Ø

–ü–†–ò–û–†–ò–¢–ï–¢ 1: Admin Bot Access (30 –º–∏–Ω—É—Ç)

–í—ã–ø–æ–ª–Ω–∏—Ç—å SQL —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è @DimaOsadchuk –∏ @a888bnd
–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ isAuthorizedAdmin()
–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –∞–¥–º–∏–Ω –∫–æ–º–∞–Ω–¥
–ü–†–ò–û–†–ò–¢–ï–¢ 2: Missing Endpoints (45 –º–∏–Ω—É—Ç)

–°–æ–∑–¥–∞—Ç—å /wallet/connect-ton endpoint
–°–æ–∑–¥–∞—Ç—å /wallet/ton-deposit endpoint
–£–±—Ä–∞—Ç—å debug endpoint generate-jwt-74
–ü–†–ò–û–†–ò–¢–ï–¢ 3: Production Deploy Checklist (15 –º–∏–Ω—É—Ç)

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–í—ã–ø–æ–ª–Ω–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
üí° –ö–õ–Æ–ß–ï–í–´–ï –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ù–ê–•–û–î–ö–ò

1. ES Modules vs TypeScript

–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã require —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
TSX –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞
–†–µ—à–µ–Ω–∏–µ: —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã –¥–ª—è –º–æ–¥—É–ª–µ–π
2. Vite Host Blocking

Telegram –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–µ URL
Vite –±–ª–æ–∫–∏—Ä—É–µ—Ç –Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Ö–æ—Å—Ç—ã
–†–µ—à–µ–Ω–∏–µ: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π allowedHosts —Å–ø–∏—Å–æ–∫
3. Supabase Auth Complexity

Single() fails –ø—Ä–∏ –¥—É–±–ª–∏–∫–∞—Ç–∞—Ö
Order by created_at –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–µ–∑–∞—Ü–∏–∏
Hardcoded fallback –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
4. JWT Token Management

Preview mode —Ç—Ä–µ–±—É–µ—Ç special handling
Token validation –Ω–µ –¥–æ–ª–∂–Ω–∞ –≤—ã–∑—ã–≤–∞—Ç—å —Ü–∏–∫–ª—ã
LocalStorage persistence –∫—Ä–∏—Ç–∏—á–Ω–∞
üìà –ú–ï–¢–†–ò–ö–ò –ò –°–¢–ê–¢–ò–°–¢–ò–ö–ê

–û–±—â–µ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 48 —á–∞—Å–æ–≤
–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 4
–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–æ: ~250
API endpoints –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: 21 –∏–∑ 24
–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É: 95%
üèÅ –§–ò–ù–ê–õ–¨–ù–´–ï –í–´–í–û–î–´

UniFarm Connect Telegram Mini App —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é. –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Telegram, API —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ. –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–µ–±–æ–ª—å—à–∞—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –∞–¥–º–∏–Ω-–±–æ—Ç–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ 3 –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö endpoints.

NEXT STEPS:

‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å SQL –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∞–¥–º–∏–Ω-–±–æ—Ç–∞
‚úÖ –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ wallet endpoints
‚úÖ –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚úÖ Deploy –≤ production!