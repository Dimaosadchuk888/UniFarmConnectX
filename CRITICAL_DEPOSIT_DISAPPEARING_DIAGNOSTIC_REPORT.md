# üö® –ö–†–ò–¢–ò–ß–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –ò–°–ß–ï–ó–ê–Æ–©–ò–ï –î–ï–ü–û–ó–ò–¢–´ USER #25

**–î–∞—Ç–∞**: 24 –∏—é–ª—è 2025, 08:05 UTC  
**–°—Ç–∞—Ç—É—Å**: üî¥ **–ü–†–û–ë–õ–ï–ú–ê –ù–ï –†–ï–®–ï–ù–ê**  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø  

## üéØ –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –î–ê–ù–ù–´–ï –û–¢ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø

### **–ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ù–´–ï –°–ò–ú–ü–¢–û–ú–´:**
- ‚úÖ TON –ø–ª–∞—Ç–µ–∂ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ –≤ –±–ª–æ–∫—á–µ–π–Ω–µ
- ‚úÖ –°—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ—Å—Ç—É–ø–∞—é—Ç –Ω–∞ –∫–æ—à–µ–ª–µ–∫ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –î–µ–ø–æ–∑–∏—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –Ω–∞ 1-2 —Å–µ–∫—É–Ω–¥—ã
- ‚ùå **–î–µ–ø–æ–∑–∏—Ç –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ –±–∞–ª–∞–Ω—Å–∞ –∏ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**
- ‚ùå –ü—Ä–∏ –Ω–æ–≤–æ–º –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ä—ã–π –¥–µ–ø–æ–∑–∏—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è, –Ω–æ –∏—Å—á–µ–∑–∞–µ—Ç –≤–º–µ—Å—Ç–µ —Å –Ω–æ–≤—ã–º

### **–ö–õ–Æ–ß–ï–í–û–ï –ù–ê–ë–õ–Æ–î–ï–ù–ò–ï:**
> "–°—Ç–∞—Ä—ã–π –¥–µ–ø–æ–∑–∏—Ç –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–æ–≤–æ–º –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏" - –∑–Ω–∞—á–∏—Ç, –æ–Ω –≥–¥–µ-—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω, –Ω–æ —Å–∫—Ä—ã—Ç –ª–æ–≥–∏–∫–æ–π —Å–∏—Å—Ç–µ–º—ã

## üîç –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê (–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô –ö–û–î–ê)

### **–≠–¢–ê–ü 1: –ü–†–û–í–ï–†–ö–ê –¶–ï–ü–û–ß–ö–ò –û–ë–†–ê–ë–û–¢–ö–ò**

#### **–ü—É—Ç—å TON –¥–µ–ø–æ–∑–∏—Ç–∞ –≤ —Å–∏—Å—Ç–µ–º–µ:**
```
1. Frontend ‚Üí POST /api/v2/wallet/ton-deposit
2. WalletController.tonDeposit() ‚Üí WalletService.processTonDeposit()
3. WalletService ‚Üí UnifiedTransactionService.createTransaction()
4. UnifiedTransactionService ‚Üí INSERT –≤ —Ç–∞–±–ª–∏—Ü—É transactions
5. UnifiedTransactionService ‚Üí BalanceManager.addBalance()
6. BalanceManager ‚Üí UPDATE users.balance_ton
```

#### **–ù–ê–ô–î–ï–ù–ù–´–ï –î–ï–¢–ê–õ–ò:**
- **–°—Ç—Ä–æ–∫–∞ 114**: `tx_hash_unique: null` - –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –û–¢–ö–õ–Æ–ß–ï–ù–ê ‚úÖ
- **–°—Ç—Ä–æ–∫–∞ 383**: `type: 'TON_DEPOSIT'` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚úÖ
- **–°—Ç—Ä–æ–∫–∞ 377**: –î—É–±–ª–∏–∫–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `metadata.tx_hash` ‚ö†Ô∏è

### **–≠–¢–ê–ü 2: –ê–ù–ê–õ–ò–ó –í–û–ó–ú–û–ñ–ù–´–• –ü–†–ò–ß–ò–ù**

#### **–ì–ò–ü–û–¢–ï–ó–ê #1: –ü—Ä–æ–±–ª–µ–º–∞ –≤ –º–µ—Ç–æ–¥–µ getTransactionHistory()**
```typescript
// modules/wallet/service.ts —Å—Ç—Ä–æ–∫–∏ 290-353
// –ú–µ—Ç–æ–¥ –º–æ–∂–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —É—Å–ª–æ–≤–∏—è–º
```

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- WHERE —É—Å–ª–æ–≤–∏—è –∏—Å–∫–ª—é—á–∞—é—Ç TON_DEPOSIT —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å `amount_ton` vs `amount`
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É –∏—Å–∫–ª—é—á–∞–µ—Ç `completed` —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

#### **–ì–ò–ü–û–¢–ï–ó–ê #2: –ü—Ä–æ–±–ª–µ–º–∞ –≤ UnifiedTransactionService.createTransaction()**
```typescript
// core/TransactionService.ts —Å—Ç—Ä–æ–∫–∏ 101-118
// –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è, –Ω–æ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è
```

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- –û—à–∏–±–∫–∞ –≤ `this.shouldUpdateBalance(type)` –¥–ª—è TON_DEPOSIT
- –°–±–æ–π –≤ `this.updateUserBalance()` –≤—ã–∑—ã–≤–∞–µ—Ç rollback
- –ü—Ä–æ–±–ª–µ–º–∞ —Å mapping: `'TON_DEPOSIT' ‚Üí TRANSACTION_TYPE_MAPPING`

#### **–ì–ò–ü–û–¢–ï–ó–ê #3: –ü—Ä–æ–±–ª–µ–º–∞ –≤ BalanceManager**
```typescript
// –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π BalanceManager –º–æ–∂–µ—Ç –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
```

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ `addBalance()`
- Concurrent access –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
- WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤—ã–∑—ã–≤–∞—é—Ç –æ—Ç–∫–∞—Ç

#### **–ì–ò–ü–û–¢–ï–ó–ê #4: Frontend cache/state –ø—Ä–æ–±–ª–µ–º–∞**
```typescript
// –î–∞–Ω–Ω—ã–µ –µ—Å—Ç—å –≤ –ë–î, –Ω–æ frontend –∏—Ö –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç
```

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- React state –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –¥–µ–ø–æ–∑–∏—Ç–∞
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –Ω–æ UI –∏—Ö —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç
- WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç –±–∞–ª–∞–Ω—Å

## üß† –ü–õ–ê–ù –î–ï–¢–ê–õ–¨–ù–û–ô –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò

### **–≠–¢–ê–ü 1: –ü–†–û–í–ï–†–ö–ê –ë–ê–ó–´ –î–ê–ù–ù–´–• (3 –º–∏–Ω—É—Ç—ã)**
1. ‚úÖ –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ User #25 –∑–∞ 48 —á–∞—Å–æ–≤
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—Å—Ç—å –ª–∏ –∑–∞–ø–∏—Å–∏ —Å —Ç–∏–ø–æ–º TON_DEPOSIT
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å –≤ —Ç–∞–±–ª–∏—Ü–µ users

### **–≠–¢–ê–ü 2: –¢–†–ê–°–°–ò–†–û–í–ö–ê –í–´–ó–û–í–û–í (5 –º–∏–Ω—É—Ç)**
1. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ processTonDeposit()
2. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ UnifiedTransactionService
3. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ BalanceManager

### **–≠–¢–ê–ü 3: –ü–†–û–í–ï–†–ö–ê MAPPING –ò –§–ò–õ–¨–¢–†–û–í (3 –º–∏–Ω—É—Ç—ã)**
1. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TRANSACTION_TYPE_MAPPING –¥–ª—è TON_DEPOSIT
2. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å shouldUpdateBalance() –¥–ª—è TON_DEPOSIT
3. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å getTransactionHistory() —Ñ–∏–ª—å—Ç—Ä—ã

### **–≠–¢–ê–ü 4: –¢–ï–°–¢ –ù–ê –î–†–£–ì–û–ú –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï (2 –º–∏–Ω—É—Ç—ã)**
1. ‚è≥ –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π TON –¥–µ–ø–æ–∑–∏—Ç –¥–ª—è User #184
2. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è
3. ‚è≥ –°—Ä–∞–≤–Ω–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å User #25

## üìä –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò

### **–ï–°–õ–ò –¢–†–ê–ù–ó–ê–ö–¶–ò–ò –ï–°–¢–¨ –í –ë–î:**
- –ü—Ä–æ–±–ª–µ–º–∞ –≤ frontend –∏–ª–∏ API —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å getTransactionHistory()
- –í–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ React state management

### **–ï–°–õ–ò –¢–†–ê–ù–ó–ê–ö–¶–ò–ô –ù–ï–¢ –í –ë–î:**
- –ü—Ä–æ–±–ª–µ–º–∞ –≤ backend –æ–±—Ä–∞–±–æ—Ç–∫–µ
- UnifiedTransactionService –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- BalanceManager –≤—ã–∑—ã–≤–∞–µ—Ç rollback

### **–ï–°–õ–ò –ë–ê–õ–ê–ù–° –ù–ï –û–ë–ù–û–í–õ–Ø–ï–¢–°–Ø:**
- –ü—Ä–æ–±–ª–µ–º–∞ –≤ updateUserBalance()
- BalanceManager.addBalance() –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Concurrent access –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–´–ï –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø

### **–ù–ï –í–ù–û–°–ò–¢–¨ –ò–ó–ú–ï–ù–ï–ù–ò–Ø:**
- ‚ùå –ù–∏–∫–∞–∫–∏—Ö –ø—Ä–∞–≤–æ–∫ –≤ –∫–æ–¥
- ‚ùå –ù–∏–∫–∞–∫–∏—Ö –∫–æ–º–º–∏—Ç–æ–≤
- ‚ùå –¢–æ–ª—å–∫–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–§–û–ö–£–° –ù–ê USER #25:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ù–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—Ç—å –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ü–æ–Ω—è—Ç—å –≥–¥–µ –∏–º–µ–Ω–Ω–æ —Ç–µ—Ä—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ

---

## üî• –ö–†–ò–¢–ò–ß–ù–´–ï –û–¢–ö–†–´–¢–ò–Ø

### **–ù–ê–ô–î–ï–ù–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê –í SYSTEM MAPPING:**
```typescript
// core/TransactionService.ts —Å—Ç—Ä–æ–∫–∞ 21
'TON_DEPOSIT': 'FARMING_REWARD',  // ‚ùå TON –¥–µ–ø–æ–∑–∏—Ç—ã –º–∞–ø—è—Ç—Å—è –≤ FARMING_REWARD!
```

### **–ê–ù–ê–õ–ò–ó –¶–ï–ü–û–ß–ö–ò –û–ë–†–ê–ë–û–¢–ö–ò:**
1. **WalletService.processTonDeposit()**: ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ–∑–¥–∞–µ—Ç —Ç–∏–ø `'TON_DEPOSIT'`
2. **UnifiedTransactionService.createTransaction()**: ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç `'TON_DEPOSIT'`
3. **TRANSACTION_TYPE_MAPPING**: ‚ùå –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç `'TON_DEPOSIT' ‚Üí 'FARMING_REWARD'`
4. **Database INSERT**: ‚ùå –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–∫ `type: 'FARMING_REWARD'`
5. **shouldUpdateBalance()**: ‚úÖ `'TON_DEPOSIT'` –µ—Å—Ç—å –≤ —Å–ø–∏—Å–∫–µ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
6. **BalanceManager**: ‚úÖ –ö–æ–¥ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### **–ö–õ–Æ–ß–ï–í–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:**
**–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å —Ç–∏–ø–æ–º `FARMING_REWARD`, –∞ –Ω–µ `TON_DEPOSIT`!**

–≠—Ç–æ –æ–±—ä—è—Å–Ω—è–µ—Ç –ø–æ—á–µ–º—É:
- –î–µ–ø–æ–∑–∏—Ç—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ—è–≤–ª—è—é—Ç—Å—è (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è)
- –ü–æ—Ç–æ–º –∏—Å—á–µ–∑–∞—é—Ç (frontend –∏—â–µ—Ç `TON_DEPOSIT`, –∞ –Ω–∞—Ö–æ–¥–∏—Ç `FARMING_REWARD`)
- –ü—Ä–∏ –Ω–æ–≤–æ–º –¥–µ–ø–æ–∑–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è (—Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ `FARMING_REWARD`)

### **–ì–ò–ü–û–¢–ï–ó–ê #1 - –ì–õ–ê–í–ù–ê–Ø:**
**Frontend —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –∏—Å–∫–ª—é—á–∞–µ—Ç `FARMING_REWARD` –ø—Ä–∏ –ø–æ–∫–∞–∑–µ –¥–µ–ø–æ–∑–∏—Ç–æ–≤**

### **–ì–ò–ü–û–¢–ï–ó–ê #2:**
**API `getTransactionHistory()` —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —Ç–∏–ø—É**

## üí• **–ò–°–¢–û–ß–ù–ò–ö –ü–†–û–ë–õ–ï–ú–´ –ù–ê–ô–î–ï–ù!**

### **–ö–†–ò–¢–ò–ß–ù–ê–Ø –û–®–ò–ë–ö–ê –í FRONTEND –§–ò–õ–¨–¢–†–ê–¶–ò–ò:**

**–§–∞–π–ª**: `client/src/services/transactionService.ts` - —Ñ—É–Ω–∫—Ü–∏—è `fetchTonTransactions()`

**–ü—Ä–æ–±–ª–µ–º–∞**: –§—É–Ω–∫—Ü–∏—è `fetchTonTransactions()` —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º:
- `currency === 'TON'` 
- `type.includes('ton')`
- `source.includes('ton')`
- `category === 'boost'`

**–ù–û!** –û–Ω–∞ **–ù–ï –£–ß–ò–¢–´–í–ê–ï–¢**, —á—Ç–æ TON –¥–µ–ø–æ–∑–∏—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î –∫–∞–∫:
- `type: 'FARMING_REWARD'` (–Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç 'ton')
- `currency: 'TON'` ‚úÖ (—ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- `source: 'WalletService.processTonDeposit'` (–Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç 'ton')

### **–¶–ï–ü–û–ß–ö–ê –û–®–ò–ë–ö–ò:**
1. **Backend**: TON –¥–µ–ø–æ–∑–∏—Ç –º–∞–ø–∏—Ç—Å—è `'TON_DEPOSIT' ‚Üí 'FARMING_REWARD'` ‚úÖ
2. **Database**: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è `type: 'FARMING_REWARD', currency: 'TON'` ‚úÖ
3. **API**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é —Å `type: 'FARMING_REWARD'` ‚úÖ
4. **Frontend**: `fetchTonTransactions()` –ù–ï —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç `FARMING_REWARD` –∫–∞–∫ TON —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é ‚ùå
5. **UI**: TON –¥–µ–ø–æ–∑–∏—Ç—ã –ù–ï –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ TonTransactions –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ ‚ùå

### **–†–ï–®–ï–ù–ò–ï:**
–î–æ–±–∞–≤–∏—Ç—å –≤ `fetchTonTransactions()` –ø—Ä–æ–≤–µ—Ä–∫—É:
```javascript
// –£—á–∏—Ç—ã–≤–∞–µ–º —á—Ç–æ TON –¥–µ–ø–æ–∑–∏—Ç—ã –º–∞–ø—è—Ç—Å—è –≤ FARMING_REWARD
const isTonDeposit = (type === 'farming_reward' && currency === 'TON');
```

### **–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê:**
–í `fetchTonTransactions()` —Å—Ç—Ä–æ–∫–∞ 215 —Å–æ–¥–µ—Ä–∂–∏—Ç `currency === 'TON'` —á—Ç–æ –î–û–õ–ñ–ù–û –ª–æ–≤–∏—Ç—å TON –¥–µ–ø–æ–∑–∏—Ç—ã.

**–ü–û–î–û–ó–†–ï–ù–ò–ï**: 
- –í–æ–∑–º–æ–∂–Ω–æ `currency` –Ω–µ —Ç–æ—á–Ω–æ —Ä–∞–≤–Ω–æ `'TON'` (—Ä–µ–≥–∏—Å—Ç—Ä, –ø—Ä–æ–±–µ–ª—ã, null)
- –ò–ª–∏ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ —Ç–æ—Ç —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
- –ò–ª–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ API –∏—Å–∫–ª—é—á–∞–µ—Ç `FARMING_REWARD`

### **–ö–†–ò–¢–ò–ß–ù–´–ï –í–û–ü–†–û–°–´:**
1. **–ü–æ–ø–∞–¥–∞—é—Ç –ª–∏ TON –¥–µ–ø–æ–∑–∏—Ç—ã (type: FARMING_REWARD, currency: TON) –≤ –æ—Ç–≤–µ—Ç API?**
2. **–ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç `currency === 'TON'` —Ñ–∏–ª—å—Ç—Ä?**
3. **–ï—Å—Ç—å –ª–∏ TON –¥–µ–ø–æ–∑–∏—Ç—ã User #25 –≤ TransactionHistory (–æ–±—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)?**

## üö® **–§–ò–ù–ê–õ–¨–ù–û–ï –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï - –ü–†–û–ë–õ–ï–ú–ê –ù–ê–ô–î–ï–ù–ê!**

### **–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê User #25 –ó–ê–í–ï–†–®–ï–ù–ê:**

**–†–ï–ó–£–õ–¨–¢–ê–¢ –ü–†–û–í–ï–†–ö–ò –ë–ê–ó–´ –î–ê–ù–ù–´–•:**
- ‚úÖ **–í—Å–µ–≥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π User #25**: 10
- ‚ùå **TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤**: 0 (–ù–û–õ–¨!)
- ‚ùå **FARMING_REWARD —Å currency TON**: 0
- ‚ùå **–õ—é–±—ã—Ö TON-—Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**: 0
- üí∞ **–¢–µ–∫—É—â–∏–π TON –±–∞–ª–∞–Ω—Å**: 0.31 TON
- üìä **–í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: —Ç–æ–ª—å–∫–æ `REFERRAL_REWARD` —Å `currency: UNI`

### **–ö–†–ò–¢–ò–ß–ù–´–ô –í–´–í–û–î:**
**üî• User #25 –ù–ï –ò–ú–ï–ï–¢ –ù–ò –û–î–ù–û–ì–û TON –î–ï–ü–û–ó–ò–¢–ê –í –ë–ê–ó–ï –î–ê–ù–ù–´–•!**

**–ñ–∞–ª–æ–±—ã –Ω–∞ "–∏—Å—á–µ–∑–∞—é—â–∏–µ –¥–µ–ø–æ–∑–∏—Ç—ã" –Ω–µ —Å–≤—è–∑–∞–Ω—ã —Å frontend —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π - –¥–µ–ø–æ–∑–∏—Ç—ã –ù–ò–ö–û–ì–î–ê –ù–ï –°–û–•–†–ê–ù–Ø–õ–ò–°–¨ –≤ –ë–î!**

### **–ù–ê–°–¢–û–Ø–©–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:**
**–°–∏—Å—Ç–µ–º–∞ –ù–ï –°–û–ó–î–ê–ï–¢ –∑–∞–ø–∏—Å–∏ TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö** –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø–ª–∞—Ç–µ–∂–µ–π.

**–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤:**
1. **WalletService.processTonDeposit()** - –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–µ–ø–æ–∑–∏—Ç—ã –≤ –ë–î
2. **UnifiedTransactionService.createTransaction()** - –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤  
3. **BalanceManager.addBalance()** - —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–±–∞–ª–∞–Ω—Å 0.31 TON –µ—Å—Ç—å)

### **–ü–ï–†–í–û–û–ß–ï–†–ï–î–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø:**
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ WalletService.processTonDeposit()** –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–Ω–∏
2. **–ù–∞–π—Ç–∏ –≥–¥–µ –∏–º–µ–Ω–Ω–æ —Ç–µ—Ä—è–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** –ø—Ä–∏ TON –¥–µ–ø–æ–∑–∏—Ç–∞—Ö
3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π –≤—ã–∑–æ–≤ createTransaction()** –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –¥–µ–ø–æ–∑–∏—Ç–∞

### **–°–¢–ê–¢–£–°**: ‚ùå **–ö–†–ò–¢–ò–ß–ù–ê–Ø –û–®–ò–ë–ö–ê –í –°–û–ó–î–ê–ù–ò–ò –¢–†–ê–ù–ó–ê–ö–¶–ò–ô**