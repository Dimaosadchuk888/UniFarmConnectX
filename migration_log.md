# Migration Log - –ú–∏–≥—Ä–∞—Ü–∏—è –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö API –º–∞—Ä—à—Ä—É—Ç–æ–≤

## –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏: –í –ø—Ä–æ—Ü–µ—Å—Å–µ

### –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: 6/6 –º–∞—Ä—à—Ä—É—Ç–æ–≤ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ (100%) ‚úÖ

---

## üîß –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–π —ç—Ç–∞–ø

### ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–µ–≥–æ –º–µ—Ç–æ–¥–∞ tonDeposit()
- **–í—Ä–µ–º—è**: 12.07.2025, 12:20
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
  - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `tonDeposit()` –≤ `modules/wallet/controller.ts` (—Å—Ç—Ä–æ–∫–∏ 276-356)
  - –ú–µ—Ç–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –ª–æ–≥–∏–∫—É –∏–∑ `server/index.ts`
  - –í–∫–ª—é—á–∞–µ—Ç: –≤–∞–ª–∏–¥–∞—Ü–∏—é, –ø—Ä–æ–≤–µ—Ä–∫—É –¥—É–±–ª–∏–∫–∞—Ç–æ–≤, –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ BalanceManager
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ë–ª–æ–∫–µ—Ä —É—Å—Ç—Ä–∞–Ω–µ–Ω, –º–∞—Ä—à—Ä—É—Ç `/api/v2/wallet/ton-deposit` –≥–æ—Ç–æ–≤ –∫ –º–∏–≥—Ä–∞—Ü–∏–∏

---

## üìã –≠—Ç–∞–ø 1: –ú–∏–≥—Ä–∞—Ü–∏—è uni-farming/status

### ‚úÖ –£–¥–∞–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç –∏–∑ server/index.ts
- **–í—Ä–µ–º—è**: 12.07.2025, 12:25
- **–°—Ç—Ä–æ–∫–∏ —É–¥–∞–ª–µ–Ω—ã**: 683-735
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –£–¥–∞–ª–µ–Ω –ø—Ä—è–º–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `GET /api/v2/uni-farming/status`
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏**: –î–∞ (console.log —Å–æ–æ–±—â–µ–Ω–∏—è)

### üîÑ –°—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
- –ú–∞—Ä—à—Ä—É—Ç —Ç–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `modules/farming/routes.ts`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `directFarmingStatusHandler` –∏–∑ `modules/farming/directFarmingStatus.ts`
- –õ–æ–≥–∏–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–π

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è
- Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `user_id` –≤ query string
- –ú–æ–¥—É–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏ —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

---

## üìã –≠—Ç–∞–ø 2-4: –ú–∞—Å—Å–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è wallet –º–∞—Ä—à—Ä—É—Ç–æ–≤

### ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è wallet/balance
- **–í—Ä–µ–º—è**: 12.07.2025, 12:31
- **–°—Ç—Ä–æ–∫–∏ —É–¥–∞–ª–µ–Ω—ã**: 770-800
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–∞—Ä—à—Ä—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `directBalanceHandler`
- **‚ö†Ô∏è –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤**:
  - –°—Ç–∞—Ä—ã–π: `{balance_uni, balance_ton}`
  - –ù–æ–≤—ã–π: `{uniBalance, tonBalance, uniFarmingActive, uniDepositAmount, uniFarmingBalance}`

### ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è wallet/withdraw
- **–í—Ä–µ–º—è**: 12.07.2025, 12:33
- **–°—Ç—Ä–æ–∫–∏ —É–¥–∞–ª–µ–Ω—ã**: 772-901
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–∞—Ä—à—Ä—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å

### ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è wallet/transactions
- **–í—Ä–µ–º—è**: 12.07.2025, 12:35
- **–°—Ç—Ä–æ–∫–∏ —É–¥–∞–ª–µ–Ω—ã**: 895-937
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–∞—Ä—à—Ä—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å

---

## üìã –≠—Ç–∞–ø 5-6: –§–∏–Ω–∞–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

### ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è wallet/ton-deposit
- **–í—Ä–µ–º—è**: 12.07.2025, 12:37
- **–°—Ç—Ä–æ–∫–∏ —É–¥–∞–ª–µ–Ω—ã**: 685-767
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–∞—Ä—à—Ä—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ `tonDeposit()` –≤ –º–æ–¥—É–ª–µ

### ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è wallet/transfer  
- **–í—Ä–µ–º—è**: 12.07.2025, 12:38
- **–°—Ç—Ä–æ–∫–∏ —É–¥–∞–ª–µ–Ω—ã**: 691-810
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–∞—Ä—à—Ä—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –í—Å–µ 6 –º–∞—Ä—à—Ä—É—Ç–æ–≤ —É—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã:
1. `/api/v2/uni-farming/status` - —á–µ—Ä–µ–∑ `directFarmingStatusHandler`
2. `/api/v2/wallet/balance` - —á–µ—Ä–µ–∑ `directBalanceHandler`
3. `/api/v2/wallet/withdraw` - —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å `wallet`
4. `/api/v2/wallet/transactions` - —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å `wallet`
5. `/api/v2/wallet/ton-deposit` - —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ `tonDeposit()`
6. `/api/v2/wallet/transfer` - —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å `wallet`

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:
- **–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤** –≤ `/api/v2/wallet/balance`
- **–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ—Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞** –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## üìä –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. –ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω–æ–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
3. –†–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å —Ñ–æ—Ä–º–∞—Ç–æ–º –æ—Ç–≤–µ—Ç–∞ wallet/balance
4. –°–æ–∑–¥–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ –º–∏–≥—Ä–∞—Ü–∏–∏

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –ø–æ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –ø–ª–∞–Ω—É
- –ö–∞–∂–¥—ã–π —à–∞–≥ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö