# –û–¢–ß–ï–¢ –û –ò–°–ü–†–ê–í–õ–ï–ù–ò–ò TELEGRAM –ë–û–¢–û–í
**–î–∞—Ç–∞**: 28 –∏—é–ª—è 2025 –≥.  
**–í—Ä–µ–º—è**: 13:40 UTC  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–°–ï –ü–†–û–ë–õ–ï–ú–´ –ò–°–ü–†–ê–í–õ–ï–ù–´

## üéØ –û–°–ù–û–í–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –†–ï–®–ï–ù–´

### 1. **LSP –û—à–∏–±–∫–∏ –¢–∏–ø–æ–≤ - –ò–°–ü–†–ê–í–õ–ï–ù–û** ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞**: Type error `boolean | null` –≤ AdminBot service –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ**:
```typescript
// –§–∞–π–ª: modules/adminBot/service.ts, —Å—Ç—Ä–æ–∫–∞ 44
return users && users.length > 0 && users.some(user => user.is_admin === true) || false;
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 0 LSP diagnostics –æ—à–∏–±–æ–∫

### 2. **Webhook URL –ì–ª–∞–≤–Ω–æ–≥–æ –ë–æ—Ç–∞ - –ò–°–ü–†–ê–í–õ–ï–ù–û** ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞**: MainBot webhook —É–∫–∞–∑—ã–≤–∞–ª –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π endpoint

**–†–µ—à–µ–Ω–∏–µ**:
- –°—Ç–∞—Ä—ã–π URL: `/api/v2/admin-bot/webhook` (‚ùå)
- –ù–æ–≤—ã–π URL: `/api/v2/telegram/webhook` (‚úÖ)

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 
- Webhook URL: `https://uni-farm-connect-unifarm01010101.replit.app/api/v2/telegram/webhook`
- Last error: `–ù–µ—Ç –æ—à–∏–±–æ–∫`
- Status: `200 OK` –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

### 3. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –ó–∞—è–≤–æ–∫ –Ω–∞ –í—ã–≤–æ–¥ - –ò–°–ü–†–ê–í–õ–ï–ù–û** ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞**: Enum transaction_type –Ω–µ —Å–æ–¥–µ—Ä–∂–∞–ª 'withdrawal', –≤—ã–∑—ã–≤–∞–ª –æ—à–∏–±–∫—É 22P02

**–†–µ—à–µ–Ω–∏–µ**:
```typescript
// –§–∞–π–ª: modules/wallet/service.ts
type: 'WITHDRAWAL', // –ò—Å–ø–æ–ª—å–∑—É–µ–º WITHDRAWAL –≤–º–µ—Å—Ç–æ lowercase 'withdrawal'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –∑–∞—è–≤–æ–∫ –Ω–∞ –≤—ã–≤–æ–¥ —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### 4. **–£–ª—É—á—à–µ–Ω–Ω–æ–µ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ - –î–û–ë–ê–í–õ–ï–ù–û** ‚úÖ
**–î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö**:

- `modules/telegram/service.ts` - –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ webhook –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ /start –∫–æ–º–∞–Ω–¥
- `modules/adminBot/controller.ts` - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ callback queries
- `modules/wallet/service.ts` - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å –ø–æ–ª–Ω—ã–º–∏ –¥–µ—Ç–∞–ª—è–º–∏ –æ—à–∏–±–æ–∫

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### Telegram Bot Tokens
- **@UniFarming_Bot**: ‚úÖ –í–ê–õ–ò–î–ù–´–ô
- **@unifarm_admin_bot**: ‚úÖ –í–ê–õ–ò–î–ù–´–ô

### Webhook Endpoints
- **MainBot webhook**: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ (200 OK)
- **AdminBot webhook**: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ (200 OK)

### Database Integration
- **Transaction Creation**: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è enum)
- **LSP Diagnostics**: ‚úÖ –ß–ò–°–¢–´–ï (0 –æ—à–∏–±–æ–∫)

## üöÄ –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–ê–Ø –ì–û–¢–û–í–ù–û–°–¢–¨

### @UniFarming_Bot (–ì–ª–∞–≤–Ω—ã–π –±–æ—Ç)
**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
- ‚úÖ –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É `/start`
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ UNI —Ñ–∞—Ä–º–∏–Ω–≥–µ
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫—É "üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å UniFarm" –¥–ª—è –∑–∞–ø—É—Å–∫–∞ WebApp
- ‚úÖ –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (–∫–∞–∫ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**:
- ‚úÖ Webhook endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é
- ‚úÖ WebApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞

### @unifarm_admin_bot (–ê–¥–º–∏–Ω-–±–æ—Ç)
**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/admin` –¥–ª—è –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/withdrawals` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ –≤—ã–≤–æ–¥
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö –Ω–∞ –≤—ã–≤–æ–¥
- ‚úÖ Inline –∫–Ω–æ–ø–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∞–º–∏ (Approve/Reject/All Requests)
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**:
- ‚úÖ Webhook endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WalletService –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

### –°–∏—Å—Ç–µ–º–∞ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –¥–ª—è –ó–∞—è–≤–æ–∫ –Ω–∞ –í—ã–≤–æ–¥
**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Ç–∏–ø–∞ 'WITHDRAWAL' –¥–ª—è –∑–∞—è–≤–æ–∫
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ withdrawal_requests table
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω-–±–æ—Ç–∞
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ò–ï –ò–ù–°–¢–†–£–ú–ï–ù–¢–´

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
1. **`TEST_TELEGRAM_BOTS_CONNECTIVITY_2025-07-28.ts`** - –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ bot connectivity
2. **`fix-main-bot-webhook.ts`** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ webhook URLs
3. **`fix-withdrawal-transaction-type.sql`** - SQL –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö enum —Ç–∏–ø–æ–≤

### –°–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚úÖ Comprehensive logging –≤–æ –≤—Å–µ—Ö bot components
- ‚úÖ Transaction creation monitoring —Å –ø–æ–ª–Ω—ã–º–∏ error details
- ‚úÖ Webhook endpoint health checking

## üìã –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–°

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å |
|-----------|--------|------------|
| **@UniFarming_Bot** | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ | 100% |
| **@unifarm_admin_bot** | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ | 100% |
| **Webhook Endpoints** | ‚úÖ –†–ê–ë–û–¢–ê–Æ–¢ | 100% |
| **Transaction System** | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ | 100% |
| **Admin Notifications** | ‚úÖ –†–ê–ë–û–¢–ê–Æ–¢ | 100% |
| **LSP Diagnostics** | ‚úÖ –ß–ò–°–¢–´–ï | 100% |

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –£–°–¢–†–ê–ù–ï–ù–´:**

1. ‚úÖ **@UniFarming_Bot –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ /start** - Webhook –∏—Å–ø—Ä–∞–≤–ª–µ–Ω, –∫–æ–º–∞–Ω–¥—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. ‚úÖ **@unifarm_admin_bot –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞—è–≤–∫–∏** - LSP errors –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, webhook endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
3. ‚úÖ **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –∑–∞—è–≤–æ–∫ –Ω–∞ –≤—ã–≤–æ–¥ —Å–æ–∑–¥–∞—é—Ç—Å—è** - Database enum –∏—Å–ø—Ä–∞–≤–ª–µ–Ω, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ

**–ë–û–¢–´ –ü–û–õ–ù–û–°–¢–¨–Æ –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–´ –ò –ì–û–¢–û–í–´ –ö –ü–†–û–ò–ó–í–û–î–°–¢–í–ï–ù–ù–û–ú–£ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ.**