# üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê TON –§–ê–†–ú–ò–ù–ì –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø - 24 –∏—é–ª—è 2025

**–ü—Ä–æ–±–ª–µ–º–∞**: TON –§–∞—Ä–º–∏–Ω–≥ –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞ (666.22 TON) –≤–º–µ—Å—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–ø–æ–∑–∏—Ç–æ–≤ (362 TON)

---

## üìä –¢–û–ß–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú–´

### üîó **–¶–µ–ø–æ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
```
Frontend TonFarmingStatusCard
    ‚Üì API –∑–∞–ø—Ä–æ—Å
/api/v2/boost/farming-status?user_id=184
    ‚Üì Controller
modules/boost/controller.ts ‚Üí getFarmingStatus()
    ‚Üì Service  
modules/boost/service.ts ‚Üí getTonBoostFarmingStatus()
    ‚Üì –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç
deposits[0].amount = farmingBalance.toString()
```

### ‚ùå **–ö–û–†–ï–ù–¨ –ü–†–û–ë–õ–ï–ú–´** (—Å—Ç—Ä–æ–∫–∏ 1062-1076):

```javascript
// –ü–æ–ª—É—á–∞–µ–º farming_balance –∏–∑ ton_farming_data –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
let farmingBalance = tonBalance; // ‚ùå FALLBACK –ö –ë–ê–õ–ê–ù–°–£ –ö–û–®–ï–õ–¨–ö–ê!
try {
  const { data: farmingData } = await supabase
    .from('ton_farming_data')
    .select('farming_balance')
    .eq('user_id', parseInt(userId))
    .single();
  
  if (farmingData && farmingData.farming_balance) {
    farmingBalance = parseFloat(farmingData.farming_balance);
  }
} catch (e) {
  // ‚ùå –ò—Å–ø–æ–ª—å–∑—É–µ–º tonBalance –∫–∞–∫ fallback
}
```

### üéØ **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

1. **–ó–∞–ø—Ä–æ—Å –∫ ton_farming_data** - –ò—â–µ—Ç `farming_balance` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 184
2. **–ï—Å–ª–∏ –ù–ï –Ω–∞–π–¥–µ–Ω–æ** - Fallback –∫ `user.balance_ton` (666.22 TON)
3. **API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç** - `deposits[0].amount = "666.22553"` 
4. **Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç** - 666.22 TON –∫–∞–∫ —Å—É–º–º—É –¥–µ–ø–æ–∑–∏—Ç–æ–≤

### üìã **–ü–†–û–í–ï–†–ö–ê –î–ê–ù–ù–´–• –í –ë–î:**

**–¢–∞–±–ª–∏—Ü–∞ `users`:**
- `user_id = 184`
- `balance_ton = 0.215073` ‚Üê –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ fallback  
- `ton_boost_package = 1` (–∞–∫—Ç–∏–≤–µ–Ω)
- `ton_boost_rate = 0.01`

**–¢–∞–±–ª–∏—Ü–∞ `ton_farming_data`:**
- –î–ª—è `user_id = 184` - **–ù–ï–¢ –ó–ê–ü–ò–°–ï–ô** (0 –∑–∞–ø–∏—Å–µ–π –Ω–∞–π–¥–µ–Ω–æ)
- –ü—Ä–∏—á–∏–Ω–∞: –ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ TON Boost –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `ton_farming_data`
- –ü–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback –∫ `balance_ton = 0.215073`
- **–°–∏—Å—Ç–µ–º–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞**: –£ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ boost —Ç–æ–∂–µ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π

---

## üí° **–ü–†–ò–ß–ò–ù–ê –ü–†–û–ë–õ–ï–ú–´**

### **Scenario 1: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞–ø–∏—Å–∏**
```sql
SELECT * FROM ton_farming_data WHERE user_id = 184;
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü—É—Å—Ç–æ–π (0 –∑–∞–ø–∏—Å–µ–π)
```

### **Scenario 2: NULL –∑–Ω–∞—á–µ–Ω–∏–µ**
```sql
SELECT farming_balance FROM ton_farming_data WHERE user_id = 184;
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: farming_balance = NULL
```

### **Scenario 3: –û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞**
```javascript
// try-catch –±–ª–æ–∫ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback
```

---

## üîß **–ß–¢–û –î–û–õ–ñ–ù–û –ë–´–¢–¨:**

```javascript
// –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ton_farming_data.farming_balance
2. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ (362 TON)
3. –ï—Å–ª–∏ –ù–ï –Ω–∞–π–¥–µ–Ω–æ - –ù–ï –ü–û–ö–ê–ó–´–í–ê–¢–¨ –¥–µ–ø–æ–∑–∏—Ç—ã –≤–æ–æ–±—â–µ
4. –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å balance_ton –∫–∞–∫ fallback –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
```

---

## üìà **–í–õ–ò–Ø–ù–ò–ï –ù–ê –†–ê–°–ß–ï–¢–´:**

### **–¢–µ–∫—É—â–∏–π (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π) —Ä–∞—Å—á–µ—Ç:**
- **–ë–∞–∑–∞**: 0.215073 TON (–≤–µ—Å—å –±–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞)
- **–°—Ç–∞–≤–∫–∞**: 1% –≤ –¥–µ–Ω—å
- **–î–æ—Ö–æ–¥**: 0.00215 TON/–¥–µ–Ω—å ‚Üê –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (–æ—á–µ–Ω—å –º–∞–ª–æ)

### **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç (–µ—Å–ª–∏ –Ω–∞–π—Ç–∏ farming_balance):**
- **–ë–∞–∑–∞**: ??? TON (—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Å—É–º–º–∞ –¥–µ–ø–æ–∑–∏—Ç–æ–≤ –∏–∑ ton_farming_data)
- **–°—Ç–∞–≤–∫–∞**: 1% –≤ –¥–µ–Ω—å  
- **–î–æ—Ö–æ–¥**: ??? TON/–¥–µ–Ω—å ‚Üê –î–û–õ–ñ–ù–û –ë–´–¢–¨ –ë–û–õ–¨–®–ï

**–ü—Ä–æ–±–ª–µ–º–∞**: –°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –û–ß–ï–ù–¨ –ú–ê–õ–ï–ù–¨–ö–ò–ô –¥–æ—Ö–æ–¥ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ

---

## üéØ **–¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –†–ï–®–ï–ù–ò–ï**

### **–§–∞–π–ª**: `modules/boost/service.ts`
### **–ú–µ—Ç–æ–¥**: `getTonBoostFarmingStatus()` 
### **–°—Ç—Ä–æ–∫–∏**: 1062-1076

**–í–º–µ—Å—Ç–æ fallback –∫ balance_ton:**
```javascript
// –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
let farmingBalance = tonBalance; // Fallback –∫ –∫–æ—à–µ–ª—å–∫—É

// –ü–†–ê–í–ò–õ–¨–ù–û:
let farmingBalance = 0; // –ï—Å–ª–∏ –Ω–µ—Ç –¥–µ–ø–æ–∑–∏—Ç–æ–≤ - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å 0
// –ò–õ–ò
return { deposits: [] }; // –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–µ–ø–æ–∑–∏—Ç—ã –≤–æ–æ–±—â–µ
```

---

## üîç **–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ù–£–ñ–ù–ê:**

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î**: –ï—Å—Ç—å –ª–∏ –∑–∞–ø–∏—Å—å –≤ `ton_farming_data` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 184?
2. **–õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞**: –ö–∞–∫–∞—è –æ—à–∏–±–∫–∞ –≤ try-catch –±–ª–æ–∫–µ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ `farming_balance`?
3. **TonFarmingRepository**: –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –º–µ—Ç–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ boost?

---

## ‚úÖ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

### üéØ **–ì–õ–ê–í–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê –î–ò–ê–ì–ù–û–°–¢–ò–†–û–í–ê–ù–ê:**

**–ö–æ—Ä–µ–Ω—å –ø—Ä–æ–±–ª–µ–º—ã**: –ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ TON Boost –ø–∞–∫–µ—Ç–æ–≤ **–ù–ï –°–û–ó–î–ê–Æ–¢–°–Ø** –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `ton_farming_data`.

### üìä **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫—É–ø–∞–µ—Ç TON Boost** ‚Üí –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `users.ton_boost_package = 1`
2. **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç** ‚Üí –ù–∞—á–∏—Å–ª—è–µ—Ç –¥–æ—Ö–æ–¥ –Ω–∞ –æ—Å–Ω–æ–≤–µ `users` —Ç–∞–±–ª–∏—Ü—ã
3. **API getTonBoostFarmingStatus()** ‚Üí –ò—â–µ—Ç `ton_farming_data` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
4. **–ó–∞–ø–∏—Å—å –ù–ï –ù–ê–ô–î–ï–ù–ê** ‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ—Ç fallback –∫ `users.balance_ton`
5. **Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç** ‚Üí –ë–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞ (0.21 TON) –≤–º–µ—Å—Ç–æ –¥–µ–ø–æ–∑–∏—Ç–æ–≤

### üîß **–°–ò–°–¢–ï–ú–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:**

- **–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ TON Boost –∏–º–µ—é—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É
- **TonFarmingRepository.activateBoost()** –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ
- **–î–∞–Ω–Ω—ã–µ —Ä–∞—Å—â–µ–ø–ª–µ–Ω—ã**: –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `users`, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—â–µ—Ç `ton_farming_data`

### üõ† **–¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –†–ï–®–ï–ù–ò–ï:**

**–í–∞—Ä–∏–∞–Ω—Ç 1**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ `ton_farming_data` –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ boost
**–í–∞—Ä–∏–∞–Ω—Ç 2**: –ò–∑–º–µ–Ω–∏—Ç—å API —á—Ç–æ–±—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ `users` —Ç–∞–±–ª–∏—Ü—ã
**–í–∞—Ä–∏–∞–Ω—Ç 3**: –£–±—Ä–∞—Ç—å fallback –ª–æ–≥–∏–∫—É - –µ—Å–ª–∏ –Ω–µ—Ç –¥–µ–ø–æ–∑–∏—Ç–æ–≤, –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å `deposits: []`

### ‚ö° **–ö–†–ò–¢–ò–ß–ù–û–°–¢–¨:**

**–í—ã—Å–æ–∫–∞—è** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–≤–æ–∏—Ö –¥–µ–ø–æ–∑–∏—Ç–∞—Ö, —á—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–æ–≤–µ—Ä–∏–µ –∫ —Å–∏—Å—Ç–µ–º–µ.

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê** - –ü—Ä–∏—á–∏–Ω–∞ –Ω–∞–π–¥–µ–Ω–∞, –≥–æ—Ç–æ–≤ –ø–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.