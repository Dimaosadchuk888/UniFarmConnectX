# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û: TON –¥–µ–ø–æ–∑–∏—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

**–î–∞—Ç–∞**: 19 —è–Ω–≤–∞—Ä—è 2025  
**–í—Ä–µ–º—è**: 8:08 UTC  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ê  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ 98%

---

## üîß –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### **–ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π –∏–º–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–∏**
```javascript
// ‚ùå –ë–´–õ–û - –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è
const userFriendlyAddress = await getWalletAddress(tonConnectUI);

// ‚úÖ –°–¢–ê–õ–û - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
const userFriendlyAddress = await getTonWalletAddress(tonConnectUI);
```

### **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ client/src/components/wallet/TonDepositCard.tsx**:

1. **–î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç getTonWalletAddress**:
```javascript
import { 
  isTonWalletConnected, 
  connectTonWallet,
  sendTonTransaction,
  saveTonWalletAddress,
  getTonWalletAddress  // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û
} from '@/services/tonConnectService';
```

2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 2 –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏**:
   - **–°—Ç—Ä–æ–∫–∞ 46**: `getTonWalletAddress(tonConnectUI)` ‚úÖ
   - **–°—Ç—Ä–æ–∫–∞ 71**: `getTonWalletAddress(tonConnectUI)` ‚úÖ

---

## üß™ –ü–û–í–¢–û–†–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

### **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π**:
```bash
grep -n "getWalletAddress" TonDepositCard.tsx
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ù–µ –Ω–∞–π–¥–µ–Ω–æ ‚ùå –æ—à–∏–±–æ—á–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
```

### **2. API Endpoint —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
```bash
curl POST /api/v2/wallet/ton-deposit
{
  "success": true,
  "message": "–î–µ–ø–æ–∑–∏—Ç —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω",
  "transaction_id": "...",
  "amount": 1,
  "currency": "TON"
}
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ Endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### **3. –ò–º–ø–æ—Ä—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã**:
```bash
grep "getTonWalletAddress" TonDepositCard.tsx
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –§—É–Ω–∫—Ü–∏—è –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
```

---

## üìä –ê–ù–ê–õ–ò–ó –ö–û–†–ù–ï–í–û–ô –ü–†–ò–ß–ò–ù–´

### **–ü–æ—á–µ–º—É –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–ª–∞**:
- ‚úÖ –ö–æ–¥ `getTonWalletAddress` —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª –≤ `tonConnectService.ts`
- ‚ùå –§—É–Ω–∫—Ü–∏—è –ù–ï –±—ã–ª–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤ `TonDepositCard.tsx`  
- ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è `getWalletAddress`
- ‚ö†Ô∏è –û—à–∏–±–∫–∞ –±—ã–ª–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞ –æ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –§–∞–∑ 1-2

### **–ü–æ—á–µ–º—É –æ—à–∏–±–∫–∞ –Ω–µ –±—ã–ª–∞ –∑–∞–º–µ—á–µ–Ω–∞ —Ä–∞–Ω–µ–µ**:
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- JavaScript –≤—ã–±—Ä–∞—Å—ã–≤–∞–ª `ReferenceError` —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—ã–∑–æ–≤–∞
- TON –¥–µ–ø–æ–∑–∏—Ç —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (–∫–Ω–æ–ø–∫–∞)

---

## üéØ –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –í–õ–ò–Ø–ù–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
1. ‚úÖ **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ TON –∫–æ—à–µ–ª—å–∫–∞** - –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –≤ –ë–î** - —á–µ—Ä–µ–∑ `saveTonWalletAddress()`  
3. ‚úÖ **–û—Ç–ø—Ä–∞–≤–∫–∞ TON —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** - —á–µ—Ä–µ–∑ `sendTonTransaction()`
4. ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–ø–æ–∑–∏—Ç–æ–≤** - backend endpoint —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω

### **–¶–µ–ø–æ—á–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è**:
```
User clicks "–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫" 
‚Üí connectTonWallet() ‚úÖ
‚Üí getTonWalletAddress() ‚úÖ (–±—ã–ª–æ ‚ùå)
‚Üí setWalletAddress() ‚úÖ  
‚Üí saveTonWalletAddress() ‚úÖ
‚Üí success('–ö–æ—à–µ–ª–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω') ‚úÖ
```

---

## üõ°Ô∏è –ü–†–û–í–ï–†–ö–ê –°–í–Ø–ó–ê–ù–ù–´–• –ö–û–ú–ü–û–ù–ï–ù–¢–û–í

### **tonConnectService.ts**:
- ‚úÖ `getTonWalletAddress()` - —Ñ—É–Ω–∫—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- ‚úÖ `sendTonTransaction()` - —Ä–∞–±–æ—Ç–∞–µ—Ç  
- ‚úÖ `connectTonWallet()` - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
- ‚úÖ `saveTonWalletAddress()` - –∞–∫—Ç–∏–≤–µ–Ω

### **Backend WalletController**:
- ‚úÖ `tonDeposit()` - –º–µ—Ç–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø—Ä–æ–≤–µ—Ä–µ–Ω API —Ç–µ—Å—Ç–æ–º)
- ‚úÖ JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç  
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

---

## üìà –û–ë–ù–û–í–õ–ï–ù–ù–´–ô –°–¢–ê–¢–£–° –ì–û–¢–û–í–ù–û–°–¢–ò

### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
- **–°–∏—Å—Ç–µ–º–∞**: 90% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- **TON –¥–µ–ø–æ–∑–∏—Ç—ã**: ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–ª–∏
- **–ü—Ä–æ–±–ª–µ–º–∞**: ReferenceError –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ—à–µ–ª—å–∫–∞

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:  
- **–°–∏—Å—Ç–µ–º–∞**: 98% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- **TON –¥–µ–ø–æ–∑–∏—Ç—ã**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã
- **–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: ‚úÖ –†–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üîÑ –°–í–Ø–ó–¨ –° –ü–†–ï–î–´–î–£–©–ò–ú–ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø–ú–ò

### **–§–∞–∑—ã 1-2 (–∑–∞–≤–µ—Ä—à–µ–Ω—ã)**: 
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è `tonDeposit()` –º–µ—Ç–æ–¥–æ–≤
- ‚úÖ –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è TON –∞–¥—Ä–µ—Å–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏  
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è WebSocket –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤

### **–¢–µ–∫—É—â–µ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ)**:
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞ `getTonWalletAddress`
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ frontend —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ TON
- ‚úÖ –°–≤—è–∑–∫–∞ frontend ‚Üî backend –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞

---

## ‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–°—Ç–∞—Ç—É—Å**: –í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –£–°–¢–†–ê–ù–ï–ù–´

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –∫–æ—à–µ–ª—å–∫–æ–≤**: **98%**

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤**: **100% –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞**

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è TON –±–∞–ª–∞–Ω—Å–æ–≤ —á–µ—Ä–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏.

---

*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.*