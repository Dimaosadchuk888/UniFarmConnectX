# –û–¢–ß–ï–¢ –ü–û –ü–†–û–í–ï–†–ö–ï –†–ï–§–ï–†–ê–õ–¨–ù–û–ô –°–ò–°–¢–ï–ú–´ UNIFARM

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 18 —è–Ω–≤–∞—Ä—è 2025  
**–¢–∏–ø –ø—Ä–æ–≤–µ—Ä–∫–∏:** –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ  
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –û–ë–ù–ê–†–£–ñ–ï–ù–´

## üìä –ò–¢–û–ì–û–í–ê–Ø –°–í–û–î–ö–ê

### –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ù–ï –†–ê–ë–û–¢–ê–ï–¢:
- ‚ùå –¢–∞–±–ª–∏—Ü–∞ `referrals` - –ü–£–°–¢–ê–Ø (0 –∑–∞–ø–∏—Å–µ–π)
- ‚ùå –¢–∞–±–ª–∏—Ü–∞ `referral_earnings` - –ü–£–°–¢–ê–Ø (0 –∑–∞–ø–∏—Å–µ–π)  
- ‚ùå –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ç–∏–ø–∞ `REFERRAL_REWARD` - –ù–ï –ù–ê–ô–î–ï–ù–´ (0 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)
- ‚ö†Ô∏è –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏ —á–∞—Å—Ç–∏—á–Ω–æ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–∞–±–ª–∏—Ü–µ `users`
- ‚ùå –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –ù–ï –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç

## 1. –ê–ù–ê–õ–ò–ó –¢–ê–ë–õ–ò–¶–´ USERS

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** 11
- **–° —Ä–µ—Ñ–µ—Ä–µ—Ä–∞–º–∏ (referred_by):** 6 (54.55%)
- **–ë–µ–∑ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞ (ref_code):** –≤–æ–∑–º–æ–∂–Ω–æ –µ—Å—Ç—å

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π:
```
users {
  ref_code         - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  parent_ref_code  - –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—Å–∏–≤—à–µ–≥–æ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
  referred_by      - ID –ø—Ä–∏–≥–ª–∞—Å–∏–≤—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
}
```

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏:
- **6 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** –∏–º–µ—é—Ç `referred_by`, —É–∫–∞–∑—ã–≤–∞—é—â–∏–π –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —Ä–∞–∑—Ä—ã–≤ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö —Ü–µ–ø–æ—á–µ–∫ (orphaned records)

## 2. –ê–ù–ê–õ–ò–ó –¢–ê–ë–õ–ò–¶–´ REFERRALS

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π:** 0 ‚ùå

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã:
```
referrals {
  user_id      - ID –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ
  inviter_id   - ID –ø—Ä–∏–≥–ª–∞—Å–∏–≤—à–µ–≥–æ  
  level        - —É—Ä–æ–≤–µ–Ω—å (1-20)
  reward_uni   - –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞ UNI
  reward_ton   - –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞ TON
  ref_path     - JSON –º–∞—Å—Å–∏–≤ —Ü–µ–ø–æ—á–∫–∏
}
```

### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:
–¢–∞–±–ª–∏—Ü–∞ `referrals` –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—É—Å—Ç–∞—è, —Ö–æ—Ç—è 6 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–º–µ—é—Ç —Ä–µ—Ñ–µ—Ä–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ `users`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
1. –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ù–ï —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–ø–∏—Å–∏ –≤ `referrals`
2. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Ü–µ–ø–æ—á–∫–∏
3. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—á–∏—Å–ª—è—Ç—å –Ω–∞–≥—Ä–∞–¥—ã –ø–æ —É—Ä–æ–≤–Ω—è–º

## 3. –ê–ù–ê–õ–ò–ó –¢–ê–ë–õ–ò–¶–´ REFERRAL_EARNINGS

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π:** 0 ‚ùå
- **–ù–∞—á–∏—Å–ª–µ–Ω–∏—è UNI:** 0
- **–ù–∞—á–∏—Å–ª–µ–Ω–∏—è TON:** 0

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã:
```
referral_earnings {
  user_id         - –∫—Ç–æ –ø–æ–ª—É—á–∏–ª –Ω–∞–≥—Ä–∞–¥—É
  source_user_id  - –æ—Ç –∫–æ–≥–æ (—á–µ–π –¥–æ—Ö–æ–¥)
  amount          - —Å—É–º–º–∞
  currency        - UNI/TON
  level           - —É—Ä–æ–≤–µ–Ω—å —Ä–µ—Ñ–µ—Ä–∞–ª–∞ (1-20)
}
```

### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:
–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –ù–ï –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤–æ–æ–±—â–µ. –ù–∏ –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏ –æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è—Ö.

## 4. –ê–ù–ê–õ–ò–ó –¢–†–ê–ù–ó–ê–ö–¶–ò–ô

### –ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Ç–∏–ø–∞ REFERRAL_REWARD:
- **–ù–∞–π–¥–µ–Ω–æ:** 0 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π ‚ùå

### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:
–í —Å–∏—Å—Ç–µ–º–µ –ù–ï–¢ –Ω–∏ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥, —á—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π.

## 5. –ê–ù–ê–õ–ò–ó –†–ï–§–ï–†–ê–õ–¨–ù–´–• –ü–†–û–¶–ï–ù–¢–û–í

### –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã (–∏–∑ –∫–æ–¥–∞):
```
–£—Ä–æ–≤–µ–Ω—å 1:  100% –æ—Ç –¥–æ—Ö–æ–¥–∞ ‚ö†Ô∏è (–º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è)
–£—Ä–æ–≤–µ–Ω—å 2:  2% –æ—Ç –¥–æ—Ö–æ–¥–∞
–£—Ä–æ–≤–µ–Ω—å 3:  3% –æ—Ç –¥–æ—Ö–æ–¥–∞
–£—Ä–æ–≤–µ–Ω—å 4:  4% –æ—Ç –¥–æ—Ö–æ–¥–∞
...
–£—Ä–æ–≤–µ–Ω—å 20: 20% –æ—Ç –¥–æ—Ö–æ–¥–∞

–ò–¢–û–ì–û: 310% –æ–±—â–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
```

### ‚ö†Ô∏è –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫:
- –û–±—â–∞—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ 310% —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏ –Ω–µ—É—Å—Ç–æ–π—á–∏–≤–∞
- –ü—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å–∏—Å—Ç–µ–º—ã —ç—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –±—ã –∫ –≥–∏–ø–µ—Ä–∏–Ω—Ñ–ª—è—Ü–∏–∏

## 6. –ö–û–†–ù–ï–í–´–ï –ü–†–ò–ß–ò–ù–´ –ü–†–û–ë–õ–ï–ú

### –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –ø–æ–∫–∞–∑–∞–ª:

1. **processReferral() –≤ ReferralService:**
   - ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç `referred_by` –≤ —Ç–∞–±–ª–∏—Ü–µ `users`
   - ‚ö†Ô∏è –ü—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ `referrals`, –Ω–æ –∑–∞–ø–∏—Å–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è

2. **distributeReferralRewards() –≤ ReferralService:**
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ —Ñ–∞—Ä–º–∏–Ω–≥-–¥–æ—Ö–æ–¥–æ–≤
   - –î–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ REFERRAL_REWARD
   - –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π –≤ `referrals`

3. **–¶–µ–ø–æ—á–∫–∞ –≤—ã–∑–æ–≤–æ–≤ —Å–ª–æ–º–∞–Ω–∞:**
   - –§–∞—Ä–º–∏–Ω–≥ –¥–æ—Ö–æ–¥—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è ‚Üí ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
   - –í—ã–∑–æ–≤ distributeReferralRewards ‚Üí ‚ùì –í–æ–∑–º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
   - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ü–µ–ø–æ—á–∫–∏ —Ä–µ—Ñ–µ—Ä–µ—Ä–æ–≤ ‚Üí ‚ùå –ù–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ —Ç–∞–±–ª–∏—Ü—ã referrals
   - –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥ ‚Üí ‚ùå –ù–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

## 7. –í–´–í–û–î–´ –ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
1. **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏** - —á–∞—Å—Ç–∏—á–Ω–æ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è (—Ç–æ–ª—å–∫–æ –≤ users.referred_by)
2. **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Ü–µ–ø–æ—á–∫–∏** - –ù–ï –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è
3. **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è** - –ù–ï —Ä–∞–±–æ—Ç–∞—é—Ç –≤–æ–æ–±—â–µ
4. **–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** - –Ω–∞—Ä—É—à–µ–Ω–∞ (6 orphaned –∑–∞–ø–∏—Å–µ–π)

### –ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞):
1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–ø–∏—Å–∏ –≤ `referrals`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ `distributeReferralRewards` –ø—Ä–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ —Ñ–∞—Ä–º–∏–Ω–≥-–¥–æ—Ö–æ–¥–æ–≤
3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å orphaned –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
4. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Å–Ω–∏–∂–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–π —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏

### –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è (–≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç)
- ‚úÖ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ –∫–æ–¥–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ü—Ä–æ—Ü–µ–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
- ‚ùå –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞—é—Ç —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã

---

**–ó–∞–∫–ª—é—á–µ–Ω–∏–µ:** –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ UniFarm –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –Ω–æ –Ω–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –∑–∞–ø–∏—Å–∏ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö `referrals` –∏ `referral_earnings`. –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ—á–µ–º—É –º–µ—Ç–æ–¥ `processReferral()` –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å–∏ –≤ –ë–î.