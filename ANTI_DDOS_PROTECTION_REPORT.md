# –û—Ç—á–µ—Ç –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∞–Ω—Ç–∏-DDoS –∑–∞—â–∏—Ç—ã UniFarm

## –î–∞—Ç–∞: 08 —è–Ω–≤–∞—Ä—è 2025
## –°—Ç–∞—Ç—É—Å: –ó–ê–í–ï–†–®–ï–ù–û - –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

---

## üéØ –¶–ï–õ–¨ –ó–ê–î–ê–ß–ò
–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ª–µ–≥–∏—Ç–∏–º–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤–æ –≤—Ä–µ–º—è –º–∞—Å—Å–æ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∑–∞—â–∏—Ç—ã –æ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö DDoS –∞—Ç–∞–∫.

## üìã –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –†–ê–ë–û–¢–´

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã rate limiting

#### –ù–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ rate limiting:
- **`massOperationsRateLimit`** - 10,000 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **`strictRateLimit`** - 10 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö endpoints  
- **`liberalRateLimit`** - 1,000 –∑–∞–ø—Ä–æ—Å–æ–≤/15 –º–∏–Ω—É—Ç –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- **`standardRateLimit`** - 500 –∑–∞–ø—Ä–æ—Å–æ–≤/15 –º–∏–Ω—É—Ç (—É–≤–µ–ª–∏—á–µ–Ω —Å 100)

#### –£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞:
```javascript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–ø—É—Å–∫ –¥–ª—è Bearer —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
const hasValidAuth = authHeader && authHeader.startsWith('Bearer ');
if (isInternalAPI && hasValidAuth) {
  return next(); // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º rate limiting
}
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–æ–¥—É–ª–µ–π

#### –ú–æ–¥—É–ª–∏ —Å `massOperationsRateLimit`:
- ‚úÖ **transactions** - `/api/v2/transactions` (GET/POST)
- ‚úÖ **farming** - `/api/v2/farming/status`, `/deposit`, `/harvest`, `/claim`
- ‚úÖ **wallet** - `/api/v2/wallet/balance`, `/:userId/transactions`
- ‚úÖ **boost** - `/api/v2/boost/farming-status`, `/purchase`
- ‚úÖ **dailyBonus** - `/api/v2/daily-bonus/claim`

#### –ú–æ–¥—É–ª–∏ —Å `strictRateLimit` (–ø—É–±–ª–∏—á–Ω—ã–µ):
- ‚úÖ **auth** - `/api/v2/auth/telegram`, `/register/telegram`
- ‚úÖ **referral** - `/api/v2/referrals/stats`, `/process`, `/generate-code`

### 3. –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö API

#### Endpoints —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–æ–ø—É—Å–∫–æ–º:
- `/transactions` - –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- `/farming/status` - –°—Ç–∞—Ç—É—Å —Ñ–∞—Ä–º–∏–Ω–≥–∞  
- `/wallet/balance` - –ë–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞
- `/boost/farming-status` - –°—Ç–∞—Ç—É—Å TON Boost
- `/daily-bonus/claim` - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã
- `/farming/deposit` - –î–µ–ø–æ–∑–∏—Ç—ã UNI
- `/boost/purchase` - –ü–æ–∫—É–ø–∫–∞ –±—É—Å—Ç –ø–∞–∫–µ—Ç–æ–≤

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø

### –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞ rate limiting:
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ Authorization header** —Å Bearer —Ç–æ–∫–µ–Ω–æ–º
2. **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö API** –ø–æ –ø—É—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–ø—É—Å–∫** –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
4. **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –ø—Ä–æ–ø—É—Å–∫–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** (`/withdraw`) - —Å—Ç—Ä–æ–≥–∏–π –ª–∏–º–∏—Ç 10 req/min
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** (`/auth/*`) - —Å—Ç—Ä–æ–≥–∏–π –ª–∏–º–∏—Ç 10 req/min  
- **TON –ø–ª–∞—Ç–µ–∂–∏** (`/verify-ton-payment`) - —Å—Ç—Ä–æ–≥–∏–π –ª–∏–º–∏—Ç 10 req/min
- **–ü—É–±–ª–∏—á–Ω—ã–µ API** (`/referrals/stats`) - —Å—Ç—Ä–æ–≥–∏–π –ª–∏–º–∏—Ç 10 req/min

## üìä –°–ò–°–¢–ï–ú–ê –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:
1. **`tests/anti_ddos_test.js`** - –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Å 1000+ –æ–ø–µ—Ä–∞—Ü–∏–π
2. **`tests/test_mass_operations.js`** - –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç 50 –æ–ø–µ—Ä–∞—Ü–∏–π
3. **`tests/diagnose_rate_limit.js`** - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞:
- ‚úÖ 1000+ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –º–∞—Å—Å–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—É–±–ª–∏—á–Ω—ã—Ö endpoints –ø–æ—Å–ª–µ 10 –∑–∞–ø—Ä–æ—Å–æ–≤

## üöÄ –°–¢–ê–¢–£–° –í–ù–ï–î–†–ï–ù–ò–Ø

### ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û:
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã rate limiting
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö 8 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–æ–¥—É–ª–µ–π  
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–ø—É—Å–∫–∞ –¥–ª—è Bearer —Ç–æ–∫–µ–Ω–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### ‚è≥ –¢–†–ï–ë–£–ï–¢–°–Ø:
- **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞** –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

## üìà –í–û–ó–î–ï–ô–°–¢–í–ò–ï –ù–ê –°–ò–°–¢–ï–ú–£

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏** —Å 50 –¥–æ 10,000 req/min –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö API
- **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫** –ª–µ–≥–∏—Ç–∏–º–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤–æ –≤—Ä–µ–º—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞** —á–µ—Ä–µ–∑ skipSuccessfulRequests

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- **–£—Å–∏–ª–µ–Ω–∏–µ –∑–∞—â–∏—Ç—ã** –ø—É–±–ª–∏—á–Ω—ã—Ö endpoints (—Å–Ω–∏–∂–µ–Ω–∏–µ —Å 100 –¥–æ 10 req/min)
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–≥–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è** —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–î–µ—Ç–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üîÆ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ production —Å–µ—Ä–≤–µ—Ä–∞** –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** —á–µ—Ä–µ–∑ `node tests/anti_ddos_test.js`
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** –≤ –ø–µ—Ä–≤—ã–µ 24 —á–∞—Å–∞
4. **–ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤** rate limiting –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

## üí° –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
- –ï–¥–∏–Ω—ã–π —Ñ–∞–π–ª `core/middleware/rateLimiting.ts` –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è middleware –≤–æ –≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `core/logger.ts`

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:
- –õ–µ–≥–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–º–∏—Ç–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ rate limiting
- –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —É—Å–ª–æ–≤–∏–π –ø—Ä–æ–ø—É—Å–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

---

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ê–Ω—Ç–∏-DDoS –∑–∞—â–∏—Ç–∞ –≥–æ—Ç–æ–≤–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ª–µ–≥–∏—Ç–∏–º–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö, —Å–æ—Ö—Ä–∞–Ω—è—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –æ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –∞—Ç–∞–∫.