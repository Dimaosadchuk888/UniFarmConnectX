# üîç –û–¢–ß–ï–¢: –ì–ª—É–±–æ–∫–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ Daily Bonus
**–î–∞—Ç–∞:** 12.07.2025  
**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** ID 74

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ò–°–°–õ–ï–î–û–í–ê–ù–ò–Ø

### 1. –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –Ω–∞ –º–æ–º–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

#### –î–∞–Ω–Ω—ã–µ –∏–∑ UI (WebSocket –ª–æ–≥–∏):
- **–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å UNI:** 1,001,100.122573
- **–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å TON:** 898.118945
- **UNI Farming –∞–∫—Ç–∏–≤–µ–Ω:** –î–∞
- **–î–µ–ø–æ–∑–∏—Ç –≤ —Ñ–∞—Ä–º–∏–Ω–≥:** 417,589 UNI

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ (–∏–∑ –ª–æ–≥–æ–≤):
- **–ë—ã–ª–æ:** 1,006,100.122573 UNI
- **–°—Ç–∞–ª–æ:** 1,001,100.122573 UNI
- **–†–∞–∑–Ω–∏—Ü–∞:** -5,000 UNI (–¥–µ–ø–æ–∑–∏—Ç –≤ —Ñ–∞—Ä–º–∏–Ω–≥)

### 2. Daily Bonus Status

–ò–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ DailyBonusCard –≤–∏–¥–Ω–æ:
```
[DailyBonusCard] –°–ª–µ–¥—É—é—â–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–∞ —á–µ—Ä–µ–∑: 13395122 –º—Å
```
–≠—Ç–æ ~3.7 —á–∞—Å–∞, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- ‚úÖ Daily Bonus –±—ã–ª –ø–æ–ª—É—á–µ–Ω —Å–µ–≥–æ–¥–Ω—è
- ‚úÖ –°–ª–µ–¥—É—é—â–∏–π –±–æ–Ω—É—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ 3.7 —á–∞—Å–∞

### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏

–ò–∑ –ª–æ–≥–æ–≤ –≤–∏–¥–Ω–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–±–ª–µ–º—É:
```javascript
[correctApiRequest] –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç: {
  success: true,
  data: {
    transactions: [{
      id: 599246,
      user_id: 77,  // ‚ùå –ù–ï–í–ï–†–ù–´–ô USER_ID!
      type: "MISSION_REWARD",
      amount: "500",
      currency: "UNI",
      status: "completed",
      description: "Mission 3 reward",
      created_at: "2025-07-11T17:05:35.232"
    }],
    total: 1,
    page: 1,
    limit: 20
  }
}
```

**–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:**
- API `/api/v2/transactions?user_id=74` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 77!
- –≠—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–µ—Ä—å–µ–∑–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –≤ API

### 4. –ê–Ω–∞–ª–∏–∑ —Ü–µ–ø–æ—á–∫–∏ Daily Bonus

#### 4.1 UI ‚Üí Backend
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å" –≤—ã–∑—ã–≤–∞–µ—Ç `/api/v2/daily-bonus/claim`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `/api/v2/daily-bonus/check`

#### 4.2 Backend –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π)
```typescript
// modules/dailyBonus/service.ts
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ç–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: 'daily_bonus' (–±—ã–ª 'DAILY_BONUS')
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã currentBalance –∏ newBalance –¥–ª—è –ª–æ–≥–æ–≤
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ –æ—à–∏–±–∫–∏: error (–±—ã–ª–æ message)
```

#### 4.3 –ó–∞–ø–∏—Å—å –≤ –ë–î
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ `users`
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å —Ç–∏–ø–æ–º `daily_bonus`
- ‚úÖ –ó–∞–ø–∏—Å—å –≤ `daily_bonus_logs`

### 5. –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **‚ùå –ö–†–ò–¢–ò–ß–ù–û: API —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —á—É–∂–∏–µ –¥–∞–Ω–Ω—ã–µ**
   - `/api/v2/transactions?user_id=74` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ user_id=77
   - –≠—Ç–æ –º–æ–∂–µ—Ç –æ–∑–Ω–∞—á–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –∏–ª–∏ SQL –∑–∞–ø—Ä–æ—Å–æ–º

2. **‚ö†Ô∏è –ù–µ—Ç –≤–∏–¥–∏–º—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π daily_bonus –≤ –ª–æ–≥–∞—Ö**
   - –í–æ–∑–º–æ–∂–Ω–æ, –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å API —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
   - –ò–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –∏–∑-–∑–∞ —Å—Ç–∞—Ä–æ–≥–æ –±–∞–≥–∞

3. **‚úÖ –ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
   - Daily Bonus –±—ã–ª –ø–æ–ª—É—á–µ–Ω (—Ç–∞–π–º–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 3.7 —á–∞—Å–∞ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ)
   - –ë–∞–ª–∞–Ω—Å –∏–∑–º–µ–Ω–∏–ª—Å—è (—Ö–æ—Ç—è –Ω–∞ -5000 –∏–∑-–∑–∞ –¥–µ–ø–æ–∑–∏—Ç–∞ –≤ —Ñ–∞—Ä–º–∏–Ω–≥)

### 6. –î–µ—Ç–∞–ª—å–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ API

#### 6.1 –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 74:
```json
{
  "transactions": [{
    "id": 599246,
    "type": "MISSION_REWARD",
    "amount": 500,
    "currency": "UNI",
    "status": "completed",
    "description": "Mission 3 reward",
    "createdAt": "2025-07-11T17:05:35.232"
  }],
  "total": 1,
  "hasMore": false
}
```
- ‚úÖ API —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (—Ä–∞–Ω—å—à–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª user_id 77)
- ‚ùå –ù–ï–¢ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Ç–∏–ø–∞ `daily_bonus` - –Ω–∏ –æ–¥–Ω–æ–π!

#### 6.2 –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Daily Bonus:
```json
{
  "total_days_claimed": 25,
  "total_amount_claimed": "3750",
  "current_streak": 3,
  "max_streak_achieved": 12,
  "average_daily_bonus": "150",
  "this_month_claimed": "850",
  "this_week_claimed": "420"
}
```
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 25 –¥–Ω–µ–π –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–Ω—É—Å–æ–≤
- ‚úÖ –û–±—â–∞—è —Å—É–º–º–∞ 3750 UNI
- ‚úÖ –¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è 3 –¥–Ω—è

#### 6.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–ª—É—á–µ–Ω–∏—è:
```json
{
  "canClaim": true,
  "streak": 0,  // ‚ùå –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π!
  "bonusAmount": 550
}
```
- ‚ö†Ô∏è –ü–†–û–¢–ò–í–û–†–ï–ß–ò–ï: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç streak=3, –∞ check –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç streak=0
- ‚úÖ –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å (canClaim: true)

### 7. –ò–¢–û–ì–û–í–´–ô –í–´–í–û–î

**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ —Ñ–∞–∫—Ç—ã:**
1. ‚úÖ **–ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - 3 –±–∞–≥–∞ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã (—Ç–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, undefined –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –ø–æ–ª–µ –æ—à–∏–±–∫–∏)
2. ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç** - API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ 25 –¥–Ω—è—Ö –±–æ–Ω—É—Å–æ–≤
3. ‚ùå **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ù–ï —Å–æ–∑–¥–∞—é—Ç—Å—è** - –≤ –∏—Å—Ç–æ—Ä–∏–∏ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ç–∏–ø–∞ `daily_bonus`
4. ‚ö†Ô∏è **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** - —Ä–∞–∑–Ω—ã–µ endpoints –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è streak

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ daily_bonus –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –ë–î** - –≤–µ—Ä–æ—è—Ç–Ω–æ, –∏–∑-–∑–∞ —Å—Ç–∞—Ä–æ–≥–æ –±–∞–≥–∞ —Å —Ç–∏–ø–æ–º 'DAILY_BONUS'
2. **–î–∞–Ω–Ω—ã–µ –æ streak –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã** –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —á–∞—Å—Ç—è–º–∏ —Å–∏—Å—Ç–µ–º—ã
3. **–ë–∞–ª–∞–Ω—Å –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è, –Ω–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è** - –Ω–∞—Ä—É—à–µ–Ω–∏–µ –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–í—ã–≤–æ–¥ –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- ‚ùå –°–∏—Å—Ç–µ–º–∞ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤, –≤–µ—Ä–æ—è—Ç–Ω–æ, —Ä–∞–±–æ—Ç–∞–µ—Ç (—Å—É–¥—è –ø–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ)
- ‚ùå –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ù–ï –≤–µ–¥–µ—Ç—Å—è

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ:**
–ü—Ä–∏–∑–Ω–∞—é –æ—à–∏–±–∫—É –≤ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–µ. –ë–µ–∑ –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–∏ (UI ‚Üí Backend ‚Üí –ë–î ‚Üí –ò—Å—Ç–æ—Ä–∏—è) –Ω–µ–ª—å–∑—è —É—Ç–≤–µ—Ä–∂–¥–∞—Ç—å –æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å–∏—Å—Ç–µ–º—ã.