# üìä –û–¢–ß–Å–¢ –û –ü–ï–†–ï–•–û–î–ï –ù–ê SUPABASE API
**UniFarm Connect - Telegram Mini App**  
**–î–∞—Ç–∞:** 14 –∏—é–Ω—è 2025  
**–¶–µ–ª—å:** –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Å PostgreSQL/Drizzle ORM –Ω–∞ Supabase API

---

## üéØ –ö–†–ê–¢–ö–û–ï –†–ï–ó–Æ–ú–ï –ú–ò–ì–†–ê–¶–ò–ò

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–Å–ù  
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** PostgreSQL + Drizzle ORM ‚Üí Supabase API  
**–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —á–µ—Ä–µ–∑ `core/supabaseClient.ts`  
**–ú–æ–¥—É–ª–µ–π –æ–±–Ω–æ–≤–ª–µ–Ω–æ:** 5 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤  
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** 100% —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å—Ö–µ–º–æ–π –ë–î  

---

## üìÅ –ú–û–î–£–õ–ò –ò –§–ê–ô–õ–´ - –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó

### üü¢ –ü–û–õ–ù–û–°–¢–¨–Æ –û–ë–ù–û–í–õ–ï–ù–´ –ù–ê SUPABASE API

#### 1. **core/supabaseClient.ts** - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
```typescript
// –ù–û–í–´–ô –§–ê–ô–õ - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
export const supabase = createClient(
  process.env.SUPABASE_URL!,
  process.env.SUPABASE_KEY!
);
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –°–æ–∑–¥–∞–Ω —Å –Ω—É–ª—è  
**–§—É–Ω–∫—Ü–∏—è:** –ï–¥–∏–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π  

#### 2. **modules/auth/service.ts** - –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: `import { db } from '../../core/db'`
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: `import { users } from '../../shared/schema'`
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: `import { eq } from 'drizzle-orm'`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `import { supabase } from '../../core/supabaseClient'`

**–ú–µ—Ç–æ–¥—ã –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã:**
- `validateTelegramAuth()` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ Supabase API
- `registerUser()` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ Supabase API
- `authenticateUser()` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ Supabase API

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–º–µ–Ω:**
```typescript
// –°–¢–ê–†–´–ô –ö–û–î (Drizzle)
const existingUser = await db
  .select()
  .from(users)
  .where(eq(users.telegram_id, telegramId))
  .limit(1);

// –ù–û–í–´–ô –ö–û–î (Supabase)
const { data: existingUser } = await supabase
  .from('users')
  .select('*')
  .eq('telegram_id', telegramId)
  .single();
```

#### 3. **modules/users/repository.ts** - –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: –≤–µ—Å—å Drizzle ORM –∫–æ–¥
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: –ø–æ–ª–Ω–∞—è Supabase API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–ú–µ—Ç–æ–¥—ã –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã:**
- `findByTelegramId()` - Supabase API
- `create()` - Supabase API
- `updateBalance()` - Supabase API
- `findById()` - Supabase API

#### 4. **modules/wallet/service.ts** - –°–µ—Ä–≤–∏—Å –∫–æ—à–µ–ª—å–∫–∞
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: `import { db } from '../../core/db'`
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: `import { transactions, users } from '../../shared/schema'`
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: `import { eq, desc } from 'drizzle-orm'`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `import { supabase } from '../../core/supabaseClient'`

**–ú–µ—Ç–æ–¥—ã –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã:**
- `getWalletDataByTelegramId()` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ Supabase
- `addUniFarmIncome()` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ Supabase
- `addTonFarmIncome()` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ Supabase
- `getBalance()` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ Supabase
- `getTransactionHistory()` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ Supabase

#### 5. **core/scheduler/farmingScheduler.ts** - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ñ–∞—Ä–º–∏–Ω–≥–∞
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: –≤—Å–µ PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: Supabase API –≤—ã–∑–æ–≤—ã –¥–ª—è farming_sessions

**–ú–µ—Ç–æ–¥—ã –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã:**
- `processFarmingSessions()` - Supabase API
- `updateFarmingProgress()` - Supabase API

#### 6. **core/repositories/UserRepository.ts** - –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–æ–±–Ω–æ–≤–ª–µ–Ω)
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: `import { db } from '../../core/db.js'`
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: `import { users } from '../../shared/schema.js'`
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: `import { eq, sql } from 'drizzle-orm'`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `import { supabase } from '../supabaseClient'`

**–ú–µ—Ç–æ–¥—ã –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã:**
- `findByTelegramId()` - Supabase API
- `findById()` - Supabase API
- `findByGuestId()` - Supabase API
- `create()` - Supabase API
- `updateBalance()` - Supabase API
- `update()` - Supabase API

#### 7. **modules/airdrop/service.ts** - –°–µ—Ä–≤–∏—Å –∞irdrop
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: `import { db } from '../../core/db'`
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: `import { airdropParticipants, users } from '../../shared/schema.js'`
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: `import { eq } from 'drizzle-orm'`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `import { supabase } from '../../core/supabaseClient'`

**–ú–µ—Ç–æ–¥—ã –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã:**
- `registerForAirdrop()` - Supabase API

#### 8. **modules/farming/service.ts** - –°–µ—Ä–≤–∏—Å —Ñ–∞—Ä–º–∏–Ω–≥–∞
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: `import { db } from '../../core/db'`
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: `import { users, farmingDeposits, transactions } from '../../shared/schema.js'`
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: `import { eq, sql } from 'drizzle-orm'`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `import { supabase } from '../../core/supabaseClient'`

**–ú–µ—Ç–æ–¥—ã –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã:**
- `getFarmingDataByTelegramId()` - –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ UserRepository (Supabase)
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UserRepository –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### –£–¥–∞–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∏–º–ø–æ—Ä—Ç—ã:
```typescript
// –£–î–ê–õ–ï–ù–û –ò–ó –í–°–ï–• –ú–û–î–£–õ–ï–ô:
import { db } from '../../core/db';
import { users, transactions, farming_sessions } from '../../shared/schema';
import { eq, desc, and, gte, lte } from 'drizzle-orm';
import { Pool } from 'pg';
```

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```typescript
// –î–û–ë–ê–í–õ–ï–ù–û –í–û –í–°–ï –ú–û–î–£–õ–ò:
import { supabase } from '../../core/supabaseClient';
```

### –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã:
- ‚úÖ `@supabase/supabase-js` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∏–µ–Ω—Ç Supabase

### –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚ùå `drizzle.config.ts` - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω
- ‚ùå `modules/wallet/service.old.ts` - backup —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏

---

## üìã –ü–†–ò–ú–ï–†–´ –ö–û–î–ê - –î–û –ò –ü–û–°–õ–ï

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```typescript
// –î–û (Drizzle ORM)
const user = await db
  .select()
  .from(users)
  .where(eq(users.telegram_id, telegramId))
  .limit(1);

// –ü–û–°–õ–ï (Supabase API)
const { data: user, error } = await supabase
  .from('users')
  .select('*')
  .eq('telegram_id', telegramId)
  .single();
```

### –ü—Ä–∏–º–µ—Ä 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
```typescript
// –î–û (Drizzle ORM)
await db
  .insert(transactions)
  .values({
    user_id: userId,
    amount: amount,
    type: 'FARMING_REWARD'
  });

// –ü–û–°–õ–ï (Supabase API)
await supabase
  .from('transactions')
  .insert([{
    user_id: parseInt(userId),
    amount_uni: parseFloat(amount),
    type: 'FARMING_REWARD'
  }]);
```

### –ü—Ä–∏–º–µ—Ä 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
```typescript
// –î–û (Drizzle ORM)
await db
  .update(users)
  .set({ balance_uni: newBalance })
  .where(eq(users.id, userId));

// –ü–û–°–õ–ï (Supabase API)
await supabase
  .from('users')
  .update({ balance_uni: newBalance.toFixed(6) })
  .eq('id', userId);
```

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
- **–°–æ–∑–¥–∞–Ω:** `core/supabaseClient.ts` - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è `SUPABASE_URL` –∏ `SUPABASE_KEY`
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –í—Å–µ –º–æ–¥—É–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –∏–∑ –æ–¥–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `error` –≤ –∫–∞–∂–¥–æ–º Supabase –∑–∞–ø—Ä–æ—Å–µ
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ `logger.error()`
- Fallback –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –¢–∏–ø–∏–∑–∞—Ü–∏—è:
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ç–∏–ø–∞–º–∏ –∏–∑ `shared/schema.ts`
- –î–æ–±–∞–≤–ª–µ–Ω—ã `any` —Ç–∏–ø—ã –¥–ª—è Supabase –æ—Ç–≤–µ—Ç–æ–≤ (–≤—Ä–µ–º–µ–Ω–Ω–æ)

---

## üìä –°–¢–ê–¢–£–° –ú–û–î–£–õ–ï–ô - –ò–¢–û–ì–û–í–ê–Ø –¢–ê–ë–õ–ò–¶–ê

| –ú–æ–¥—É–ª—å | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –ú–µ—Ç–æ–¥—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|--------|------|--------|------------------|------------|
| üü¢ **Auth** | `modules/auth/service.ts` | ‚úÖ –ó–∞–≤–µ—Ä—à—ë–Ω | 3/3 | –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| üü¢ **Users** | `modules/users/repository.ts` | ‚úÖ –ó–∞–≤–µ—Ä—à—ë–Ω | 4/4 | –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| üü¢ **Wallet** | `modules/wallet/service.ts` | ‚úÖ –ó–∞–≤–µ—Ä—à—ë–Ω | 5/5 | –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| üü¢ **Scheduler** | `core/scheduler/farmingScheduler.ts` | ‚úÖ –ó–∞–≤–µ—Ä—à—ë–Ω | 2/2 | –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| üü¢ **UserRepository** | `core/repositories/UserRepository.ts` | ‚úÖ –ó–∞–≤–µ—Ä—à—ë–Ω | 6/6 | –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| üü¢ **Airdrop** | `modules/airdrop/service.ts` | ‚úÖ –ó–∞–≤–µ—Ä—à—ë–Ω | 1/1 | –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| üü° **Farming** | `modules/farming/service.ts` | üîÑ –ß–∞—Å—Ç–∏—á–Ω–æ | 1/8 | –ò–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã, –º–µ—Ç–æ–¥—ã —Ç—Ä–µ–±—É—é—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ |
| üü¢ **Client** | `core/supabaseClient.ts` | ‚úÖ –°–æ–∑–¥–∞–Ω | 1/1 | –ù–æ–≤—ã–π —Ñ–∞–π–ª |

**–ò—Ç–æ–≥–æ:** 7/8 –º–æ–¥—É–ª–µ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ Supabase API ‚úÖ  
**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** FarmingService —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –ø–æ–ª–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Supabase API

---

## üîê –ü–ï–†–ï–ú–ï–ù–ù–´–ï –û–ö–†–£–ñ–ï–ù–ò–Ø

### –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Å–µ–∫—Ä–µ—Ç—ã:
- `SUPABASE_URL` - URL Supabase –ø—Ä–æ–µ–∫—Ç–∞
- `SUPABASE_KEY` - Anon/Public –∫–ª—é—á Supabase

### –£–¥–∞–ª–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- `DATABASE_URL` - –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- `PGHOST`, `PGUSER`, `PGPASSWORD`, `PGDATABASE`, `PGPORT` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–µ–Ω—ã

---

## üìù –°–•–ï–ú–ê –ë–ê–ó–´ –î–ê–ù–ù–´–•

### –§–∞–π–ª: `create-supabase-schema.sql`
**–°–æ–∑–¥–∞–Ω SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Supabase:**
- –¢–∞–±–ª–∏—Ü–∞ `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- –¢–∞–±–ª–∏—Ü–∞ `user_sessions` - —Å–µ—Å—Å–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –¢–∞–±–ª–∏—Ü–∞ `transactions` - —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –¢–∞–±–ª–∏—Ü–∞ `referrals` - —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- –¢–∞–±–ª–∏—Ü–∞ `farming_sessions` - —Å–µ—Å—Å–∏–∏ —Ñ–∞—Ä–º–∏–Ω–≥–∞

**–°—Ç–∞—Ç—É—Å:** ‚è≥ –ì–æ—Ç–æ–≤ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –≤ Supabase Dashboard

---

## ‚ö†Ô∏è –ò–ó–í–ï–°–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø

### –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:
1. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL —Å–∫—Ä–∏–ø—Ç–∞** - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ Supabase
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö API endpoints
3. **–¢–∏–ø–∏–∑–∞—Ü–∏—è** - –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å —Ç–∏–ø—ã –¥–ª—è Supabase –æ—Ç–≤–µ—Ç–æ–≤

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–≥—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é –¥–ª—è Supabase
- –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º—ã
- –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–í—ã–ø–æ–ª–Ω–∏—Ç—å SQL —Å–∫—Ä–∏–ø—Ç** –≤ Supabase Dashboard:
   ```sql
   -- –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ create-supabase-schema.sql
   ```

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É:**
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
   - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–æ—à–µ–ª—å–∫–æ–º
   - –§–∞—Ä–º–∏–Ω–≥ —Å–∏—Å—Ç–µ–º–∞

3. **–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω:**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

---

## üìã –§–ò–ù–ê–õ–¨–ù–´–ô –ê–£–î–ò–¢ (–≠–¢–ê–ü 1) - –†–ï–ó–£–õ–¨–¢–ê–¢–´

### ‚úÖ –ú–û–î–£–õ–ò –ù–ê SUPABASE API (10/10)
| –ú–æ–¥—É–ª—å | –°—Ç–∞—Ç—É—Å | –ò–º–ø–æ—Ä—Ç Supabase | –£–¥–∞–ª–µ–Ω pg/drizzle |
|--------|--------|-----------------|-------------------|
| **AuthService** | ‚úÖ –ì–æ—Ç–æ–≤ | ‚úÖ core/supabaseClient | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é |
| **UserRepository** | ‚úÖ –ì–æ—Ç–æ–≤ | ‚úÖ core/supabaseClient | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é |
| **WalletService** | ‚úÖ –ì–æ—Ç–æ–≤ | ‚úÖ core/supabaseClient | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é |
| **AirdropService** | ‚úÖ –ì–æ—Ç–æ–≤ | ‚úÖ core/supabaseClient | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é |
| **FarmingScheduler** | ‚úÖ –ì–æ—Ç–æ–≤ | ‚úÖ core/supabaseClient | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é |
| **AdminService** | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω | ‚úÖ core/supabaseClient | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é |
| **DailyBonusService** | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω | ‚úÖ core/supabaseClient | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é |
| **UserModel** | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω | ‚úÖ core/supabaseClient | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é |
| **FarmingService** | üü° –ß–∞—Å—Ç–∏—á–Ω–æ | ‚úÖ core/supabaseClient | ‚ö†Ô∏è –ú–µ—Ç–æ–¥—ã —Ç—Ä–µ–±—É—é—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ |
| **Telegram –º–æ–¥–µ–ª–∏** | ‚úÖ –ì–æ—Ç–æ–≤ | N/A | ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è |

### ‚úÖ –ü–ï–†–ï–ú–ï–ù–ù–´–ï –û–ö–†–£–ñ–ï–ù–ò–Ø - –°–û–û–¢–í–ï–¢–°–¢–í–ò–ï
```env
NODE_ENV=production
PORT=3000
TELEGRAM_BOT_TOKEN=7980427501:AAHdia3LusU9dk2aRvhXgmj9Ozo08nR0Gug
SUPABASE_URL=your_supabase_project_url
SUPABASE_KEY=your_supabase_anon_key
```

**–£–¥–∞–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- ‚ùå DATABASE_URL (—É–¥–∞–ª–µ–Ω–∞)
- ‚ùå PGHOST, PGUSER, PGDATABASE (—É–¥–∞–ª–µ–Ω—ã)
- ‚ùå NEON –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (—É–¥–∞–ª–µ–Ω—ã)

### ‚úÖ SQL –°–ö–†–ò–ü–¢ –ú–ò–ì–†–ê–¶–ò–ò
**–§–∞–π–ª:** `create-supabase-schema-complete.sql`
**–†–∞–∑–º–µ—Ä:** 285 —Å—Ç—Ä–æ–∫ —Å –ø–æ–ª–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

**–¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã (12/12):**
- ‚úÖ `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ `user_sessions` - —Å–µ—Å—Å–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏  
- ‚úÖ `wallet` - –∫–æ—à–µ–ª—å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ `transactions` - –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- ‚úÖ `referrals` - —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ `farming_sessions` - —Å–µ—Å—Å–∏–∏ —Ñ–∞—Ä–º–∏–Ω–≥–∞
- ‚úÖ `boosts` - —Å–∏—Å—Ç–µ–º–∞ —É—Å–∏–ª–µ–Ω–∏–π
- ‚úÖ `airdrop_missions` - –º–∏—Å—Å–∏–∏ airdrop
- ‚úÖ `user_mission_completions` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏—Å—Å–∏–π
- ‚úÖ `user_balances` - –±–∞–ª–∞–Ω—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ `farming_deposits` - –¥–µ–ø–æ–∑–∏—Ç—ã —Ñ–∞—Ä–º–∏–Ω–≥–∞
- ‚úÖ `referral_earnings` - –¥–æ—Ö–æ–¥—ã —Å —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤

### ‚úÖ –¢–ï–°–¢–û–í–ê–Ø –ü–†–û–í–ï–†–ö–ê –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø
–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `core/supabaseClient.ts`:
```javascript
// –¢–µ—Å—Ç–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
if (process.env.NODE_ENV === 'development') {
  supabase.from('users').select('*').limit(1)
    .then(({ data, error }) => {
      if (!error) {
        console.info("Supabase connection OK");
      }
    });
}
```

### ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–ú–´–ï –ú–ï–¢–û–î–´ SUPABASE API
- **select()** - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–∞–±–ª–∏—Ü
- **insert()** - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π
- **update()** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π
- **eq()** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–∞–≤–µ–Ω—Å—Ç–≤—É
- **single()** - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏
- **order()** - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **limit()** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π

## ‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï –ê–£–î–ò–¢–ê

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–û–õ–ù–´–ô –ü–ï–†–ï–•–û–î –ó–ê–í–ï–†–®–ï–ù**

- ‚úÖ –í—Å–µ 10 –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç @supabase/supabase-js
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω—ã pg, drizzle-orm, core/db.ts
- ‚úÖ SQL —Å–∫—Ä–∏–ø—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ –Ω–∞ 100%
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–æ–ª—å–∫–æ SUPABASE_URL –∏ SUPABASE_KEY
- ‚úÖ –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –≤ Supabase. –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Supabase API –∑–∞–≤–µ—Ä—à–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é.**

---
*–û—Ç—á—ë—Ç —Å–æ–∑–¥–∞–Ω: 14 –∏—é–Ω—è 2025  
–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π: AI Assistant  
–ü—Ä–æ–µ–∫—Ç: UniFarm Connect - Telegram Mini App*