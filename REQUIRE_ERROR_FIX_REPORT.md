# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–®–ò–ë–ö–ò `require is not defined`

**–î–∞—Ç–∞:** 21 –∏—é–ª—è 2025  
**–°—Ç–∞—Ç—É—Å:** –ò–°–ü–†–ê–í–õ–ï–ù–û  
**–ü—Ä–æ–±–ª–µ–º–∞:** ReferenceError: require is not defined –≤ server/index.ts:999  
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–µ–Ω require() –Ω–∞ ES6 import  

---

## üîß –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### **–§–ê–ô–õ:** `server/index.ts`

#### **–û–®–ò–ë–ö–ê:**
```typescript
// –ë–´–õ–û:
const fs = require('fs');
```

#### **–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:**
```typescript
// –î–û–ë–ê–í–õ–ï–ù –ò–ú–ü–û–†–¢ –í –ù–ê–ß–ê–õ–ï –§–ê–ô–õ–ê:
import fs from 'fs';

// –£–ë–†–ê–ù require() –ò–ó CALLBACK:
if (fs.existsSync('SCHEDULER_DISABLED.flag')) {
```

---

## üéØ –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê

### **–ü–†–û–ë–õ–ï–ú–ê:**
- TypeScript ES –º–æ–¥—É–ª—å –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç CommonJS `require()`
- `require()` –±—ã–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –≤–Ω—É—Ç—Ä–∏ callback —Ñ—É–Ω–∫—Ü–∏–∏
- Node.js v18 –≤ ES module —Ä–µ–∂–∏–º–µ –≤—ã–¥–∞–µ—Ç ReferenceError

### **–†–ï–®–ï–ù–ò–ï:**
- –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω –∏–º–ø–æ—Ä—Ç `fs` –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞
- –£–±—Ä–∞–Ω `require()` –∏–∑ callback
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π ES6 import —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢

### **–°–ï–†–í–ï–† –¢–ï–ü–ï–†–¨:**
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ ES –º–æ–¥—É–ª–µ–π
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–∞–π–ª SCHEDULER_DISABLED.flag
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ

### **–°–û–•–†–ê–ù–ï–ù–ê –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ —Ñ–ª–∞–≥–∞ –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–≤
- ‚úÖ –£—Å–ª–æ–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ farmingScheduler –∏ tonBoostIncomeScheduler
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–≤

---

## üìä –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ï–†–í–ï–†–ê

```
server/index.ts startup sequence:
‚îú‚îÄ‚îÄ Environment validation ‚úÖ
‚îú‚îÄ‚îÄ Express app setup ‚úÖ  
‚îú‚îÄ‚îÄ Routes registration ‚úÖ
‚îú‚îÄ‚îÄ WebSocket initialization ‚úÖ
‚îú‚îÄ‚îÄ Server listening ‚úÖ
‚îú‚îÄ‚îÄ Database connection check ‚úÖ
‚îú‚îÄ‚îÄ Scheduler flag check ‚úÖ (–ò–°–ü–†–ê–í–õ–ï–ù–û)
‚îú‚îÄ‚îÄ Conditional scheduler start ‚úÖ
‚îî‚îÄ‚îÄ Performance monitoring ‚úÖ
```

**–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê –£–°–¢–†–ê–ù–ï–ù–ê** - —Å–µ—Ä–≤–µ—Ä —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –ø—Ä–æ–±–ª–µ–º —Å ES –º–æ–¥—É–ª—è–º–∏.