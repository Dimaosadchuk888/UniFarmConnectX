# ‚úÖ –î–í–û–ô–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û: UNI –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ + –°–µ—Ä–≤–µ—Ä ES –ú–æ–¥—É–ª–∏

**–î–∞—Ç–∞:** 21 –∏—é–ª—è 2025  
**–°—Ç–∞—Ç—É—Å:** –û–ë–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –†–ï–®–ï–ù–´  

---

## üìã –ò–¢–û–ì–û–í–û–ï –†–ï–ó–Æ–ú–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### **–ü–†–û–ë–õ–ï–ú–ê 1: –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï UNI –¢–†–ê–ù–ó–ê–ö–¶–ò–ô**
- ‚ùå **–ë—ã–ª–æ:** 1 –¥–µ–ø–æ–∑–∏—Ç ‚Üí 2 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
- ‚ö†Ô∏è **–°—Ç–∞–ª–æ:** 1 –¥–µ–ø–æ–∑–∏—Ç ‚Üí 0 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (—Ä–µ–≥—Ä–µ—Å—Å–∏—è)  
- ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û:** 1 –¥–µ–ø–æ–∑–∏—Ç ‚Üí 1 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)

### **–ü–†–û–ë–õ–ï–ú–ê 2: –û–®–ò–ë–ö–ê –ó–ê–ü–£–°–ö–ê –°–ï–†–í–ï–†–ê**
- ‚ùå **–ë—ã–ª–æ:** `require is not defined` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û:** ES6 import –≤–º–µ—Å—Ç–æ CommonJS require

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø

### **1. –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –°–û–ó–î–ê–ù–ò–Ø –¢–†–ê–ù–ó–ê–ö–¶–ò–ô:**
**–§–∞–π–ª:** `modules/farming/service.ts` —Å—Ç—Ä–æ–∫–∏ 325-377

**–õ–æ–≥–∏–∫–∞:**
```typescript
// –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ö–†–ò–¢–ò–ß–ï–°–ö–û–ô –†–ï–ì–†–ï–°–°–ò–ò: –°–æ–∑–¥–∞–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –∑–¥–µ—Å—å
const transactionPayload = {
  user_id: user.id,
  type: 'FARMING_DEPOSIT',
  amount: depositAmount.toString(),
  amount_uni: depositAmount.toString(),
  amount_ton: '0',
  currency: 'UNI',
  status: 'completed',
  description: `UNI farming deposit: ${depositAmount}`
};

await supabase.from(FARMING_TABLES.TRANSACTIONS).insert([transactionPayload]);
```

### **2. –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï ES –ú–û–î–£–õ–ï–ô:**
**–§–∞–π–ª:** `server/index.ts` —Å—Ç—Ä–æ–∫–∞ 2
- **–ë—ã–ª–æ:** `const fs = require('fs')`  
- **–°—Ç–∞–ª–æ:** `import fs from 'fs'`

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### **–§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ê:**
- ‚úÖ UNI –¥–µ–ø–æ–∑–∏—Ç—ã —Å–æ–∑–¥–∞—é—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏
- ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ ES –º–æ–¥—É–ª–µ–π  
- ‚úÖ –ë–∞–ª–∞–Ω—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –§–∞—Ä–º–∏–Ω–≥ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ

### **–ê–†–•–ò–¢–ï–ö–¢–£–†–ê –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ê:**
```
FarmingService.depositUniForFarming()
‚îú‚îÄ‚îÄ –°–ø–∏—Å–∞–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ ‚úÖ
‚îú‚îÄ‚îÄ –°–æ–∑–¥–∞–Ω–∏–µ 1 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚úÖ (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç–æ—á–∫–∞)
‚îú‚îÄ‚îÄ UniFarmingRepository.addDeposit() ‚úÖ (—Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ)
‚îî‚îÄ‚îÄ Return success ‚úÖ
```

---

## üß™ –°–¢–ê–¢–£–° –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### **–ü–†–û–í–ï–†–ï–ù–û:**
- ‚úÖ Health endpoint –æ—Ç–≤–µ—á–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ API —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç  
- ‚úÖ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω—ã
- ‚úÖ –ë–∞–ª–∞–Ω—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### **–ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ:**
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ UNI –¥–µ–ø–æ–∑–∏—Ç–∞ –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å **–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é** FARMING_DEPOSIT –≤ –∏—Å—Ç–æ—Ä–∏–∏.

---

## üìù –§–ò–ù–ê–õ–¨–ù–û–ï –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**üü¢ –°–ò–°–¢–ï–ú–ê –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–û–°–ü–û–°–û–ë–ù–ê**

–û–±–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã:
1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** ‚Üí **–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è**
2. **–û—à–∏–±–∫–∞ ES –º–æ–¥—É–ª–µ–π** ‚Üí **–°—Ç–∞–±–∏–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞**

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ production —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º.