# –¢–û–ß–ù–ê–Ø –ü–†–ò–ß–ò–ù–ê –§–ò–ù–ê–ù–°–û–í–û–ô –£–Ø–ó–í–ò–ú–û–°–¢–ò –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ê

**–î–∞—Ç–∞**: 28 –∏—é–ª—è 2025, 12:20 UTC  
**–°—Ç–∞—Ç—É—Å**: –ò–°–¢–û–ß–ù–ò–ö –ü–†–û–ë–õ–ï–ú–´ –ù–ê–ô–î–ï–ù  

## üéØ –¢–û–ß–ù–ê–Ø –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –ü–†–ò–ß–ò–ù–ê

**–§–∞–π–ª**: `modules/boost/service.ts`  
**–°—Ç—Ä–æ–∫–∏**: 456-488  
**–ú–µ—Ç–æ–¥**: `purchaseWithInternalWallet()`  

### –ö–û–î –° –û–®–ò–ë–ö–û–ô:
```typescript
const { error: transactionError } = await supabase
  .from('transactions')
  .insert({
    user_id: parseInt(userId),
    type: 'BOOST_PURCHASE',
    amount: requiredAmount.toString(), // ‚ùå –ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–û–ï –ó–ù–ê–ß–ï–ù–ò–ï
    currency: 'TON',
    status: 'completed',
    description: `–ü–æ–∫—É–ø–∫–∞ TON Boost "${boostPackage.name}" (-${requiredAmount} TON)`,
```

### –ü–†–û–ë–õ–ï–ú–ê:
- **–ü–æ–ª–µ amount**: `requiredAmount.toString()` = "1" (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ)
- **–î–æ–ª–∂–Ω–æ –±—ã—Ç—å**: `(-requiredAmount).toString()` = "-1" (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ)

## üìä –î–û–ö–ê–ó–ê–¢–ï–õ–¨–°–¢–í–ê –ò–ó –ë–ê–ó–´ –î–ê–ù–ù–´–•

**5 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π BOOST_PURCHASE –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 25**:
- ID 1376464: Amount = "1" TON (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "-1")
- ID 1378324: Amount = "1" TON (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "-1")  
- ID 1378399: Amount = "1" TON (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "-1")
- ID 1378443: Amount = "1" TON (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "-1")
- ID 1379192: Amount = "1" TON (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "-1")

**–ö–∞–∂–¥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è**:
- ‚úÖ Description –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ: "–ü–æ–∫—É–ø–∫–∞ TON Boost (-1 TON)"
- ‚ùå Amount –ø–æ–ª–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ: "+1" –≤–º–µ—Å—Ç–æ "-1"

## üí° –ú–ï–•–ê–ù–ò–ó–ú –ü–†–û–ë–õ–ï–ú–´

1. **processWithdrawal()** –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–ø–∏—Å–∞—Ç—å 1 TON
2. **BalanceManager.subtractBalance()** –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. **–ù–û**: –°–æ–∑–¥–∞–µ—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è BOOST_PURCHASE —Å **–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π** —Å—É–º–º–æ–π
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–∏—Å—Ç–µ–º–∞ "–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç" –¥–µ–Ω—å–≥–∏ —á–µ—Ä–µ–∑ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é

## üö® –ú–ê–°–®–¢–ê–ë –ü–†–û–ë–õ–ï–ú–´

**–ü–æ—Å—Ç—Ä–∞–¥–∞–≤—à–∏–µ**: –í–°–ï –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏ TON Boost  
**–ú–µ—Ö–∞–Ω–∏–∑–º**: –ö–∞–∂–¥–∞—è –ø–æ–∫—É–ø–∫–∞ —Å–æ–∑–¥–∞–µ—Ç +1 TON —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –≤–º–µ—Å—Ç–æ -1 TON  
**–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—â–µ—Ä–±**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–∫—É–ø–∞—é—Ç TON Boost –∏ –ø–æ–ª—É—á–∞—é—Ç –¥–µ–Ω—å–≥–∏ –æ–±—Ä–∞—Ç–Ω–æ  

## ‚ö° –†–ï–®–ï–ù–ò–ï

**–ó–∞–º–µ–Ω–∏—Ç—å**:
```typescript
amount: requiredAmount.toString(), // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
```

**–ù–∞**:
```typescript
amount: (-requiredAmount).toString(), // –ü—Ä–∞–≤–∏–ª—å–Ω–æ
```

## üìã –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï

‚úÖ **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**: 5 –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö BOOST_PURCHASE —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π  
‚úÖ **–ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞**: –ù–∞–π–¥–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ —Å –æ—à–∏–±–∫–æ–π  
‚úÖ **–õ–æ–≥–∏–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞**: –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ amount —Å–æ–∑–¥–∞—é—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ —Å–ø–∏—Å–∞–Ω–∏–π  
‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Å—Ç—Ä–∞–¥–∞–ª**: User 25 –ø–æ–ª—É—á–∏–ª 4 TON –æ–±—Ä–∞—Ç–Ω–æ + 40,000 UNI –±–æ–Ω—É—Å–æ–≤  

**–ü–†–ò–ß–ò–ù–ê –£–°–¢–ê–ù–û–í–õ–ï–ù–ê –° –§–ê–ö–¢–ò–ß–ï–°–ö–ò–ú–ò –î–û–ö–ê–ó–ê–¢–ï–õ–¨–°–¢–í–ê–ú–ò**