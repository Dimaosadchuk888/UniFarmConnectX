# ‚úÖ –§–ê–ó–ê 1 –ó–ê–í–ï–†–®–ï–ù–ê: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è tonDeposit() –º–µ—Ç–æ–¥–æ–≤

**–î–∞—Ç–∞**: 19 —è–Ω–≤–∞—Ä—è 2025  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: 5 –º–∏–Ω—É—Ç  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û  
**–†–∏—Å–∫**: –ú–ò–ù–ò–ú–ê–õ–¨–ù–´–ô

---

## üéØ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø

### **–ü—Ä–æ–±–ª–µ–º–∞**:
–í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ `modules/wallet/controller.ts` —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∏ **–¥–≤–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–∞** `tonDeposit()`:
- –ü–µ—Ä–≤—ã–π –º–µ—Ç–æ–¥ (—Å—Ç—Ä–æ–∫–∏ 283-345) - –ø—Ä—è–º–æ–π –ø–æ–¥—Ö–æ–¥
- –í—Ç–æ—Ä–æ–π –º–µ—Ç–æ–¥ (—Å—Ç—Ä–æ–∫–∏ 360-486) - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–æ–¥—Ö–æ–¥

### **–†–µ—à–µ–Ω–∏–µ**:
–£–¥–∞–ª–µ–Ω **–ø–µ—Ä–≤—ã–π –º–µ—Ç–æ–¥** (—Å—Ç—Ä–æ–∫–∏ 283-345) –∫–∞–∫ –º–µ–Ω–µ–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π

### **–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏**:
```bash
$ grep -n "async tonDeposit" modules/wallet/controller.ts
360:  async tonDeposit(req: Request, res: Response, next: NextFunction) {
```

‚úÖ **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ**: –æ—Å—Ç–∞–ª—Å—è —Ç–æ–ª—å–∫–æ **–æ–¥–∏–Ω –º–µ—Ç–æ–¥** –Ω–∞ —Å—Ç—Ä–æ–∫–µ 360

---

## üîç –î–ï–¢–ê–õ–ò –£–î–ê–õ–ï–ù–ù–û–ì–û –ö–û–î–ê

**–£–¥–∞–ª–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª**:
- –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ `balanceManager.addBalance()`
- –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ `UnifiedTransactionService.createTransaction()`
- –û–±—Ö–æ–¥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å–ª–æ—è

**–û—Å—Ç–∞–≤—à–∏–π—Å—è –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç**:
- –ü—Ä–∞–≤–∏–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —á–µ—Ä–µ–∑ `handleRequest()`
- –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `walletService.processTonDeposit()`
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê

### **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ**:
- [ ] ‚úÖ –û—Å—Ç–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –º–µ—Ç–æ–¥ tonDeposit() –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ
- [ ] ‚úÖ –§–∞–π–ª —É—Å–ø–µ—à–Ω–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –±–µ–∑ –æ—à–∏–±–æ–∫ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞  
- [ ] ‚úÖ –£–¥–∞–ª–µ–Ω–Ω—ã–π –∫–æ–¥ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã

### **–¢—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**:
- [ ] ‚è≥ TON –¥–µ–ø–æ–∑–∏—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ –≤—Ç–æ—Ä–æ–π –º–µ—Ç–æ–¥
- [ ] ‚è≥ –ù–µ—Ç –Ω–æ–≤—ã—Ö –æ—à–∏–±–æ–∫ –≤ server logs
- [ ] ‚è≥ API endpoint /api/v2/wallet/ton-deposit –æ—Ç–≤–µ—á–∞–µ—Ç 200

---

## üõ°Ô∏è –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π**:
- ‚úÖ –£–¥–∞–ª–µ–Ω —Ç–æ–ª—å–∫–æ –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∫–æ–¥
- ‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç–∞
- ‚úÖ API –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Å—Ç–∞–ª—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º
- ‚úÖ –í—Ç–æ—Ä–æ–π –º–µ—Ç–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω

### **–û—Ç–∫–∞—Ç**:
–í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –∏–∑ git –∏—Å—Ç–æ—Ä–∏–∏.

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–ó–ú–ï–ù–ï–ù–ò–ô

**–£–¥–∞–ª–µ–Ω–æ**:
- 81 —Å—Ç—Ä–æ–∫–∞ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ –∫–æ–¥–∞
- 1 –º–µ—Ç–æ–¥ —Å –ø—Ä—è–º—ã–º –¥–æ—Å—Ç—É–ø–æ–º –∫ —Å–µ—Ä–≤–∏—Å–∞–º

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ**:
- 1 –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥
- –í—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

**–†–∞–∑–º–µ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π**: -81 —Å—Ç—Ä–æ–∫–∞ –∫–æ–¥–∞ (—Ç–æ–ª—å–∫–æ —É–¥–∞–ª–µ–Ω–∏–µ)

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

**–î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
```typescript
// modules/wallet/controller.ts
283:  async tonDeposit(req: Request, res: Response, next: NextFunction) { // –ü–ï–†–í–´–ô
440:  async tonDeposit(req: Request, res: Response, next: NextFunction) { // –í–¢–û–†–û–ô
```

**–ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
```typescript
// modules/wallet/controller.ts  
360:  async tonDeposit(req: Request, res: Response, next: NextFunction) { // –ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô
```

### **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**:
1. ‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API endpoint /api/v2/wallet/ton-deposit
2. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫
3. ‚è≥ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ TON –¥–µ–ø–æ–∑–∏—Ç–æ–≤

**–§–∞–∑–∞ 1 –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.**

---

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.*