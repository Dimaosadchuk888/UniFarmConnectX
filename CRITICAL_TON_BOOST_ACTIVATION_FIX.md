# üî• –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï TON BOOST –ê–ö–¢–ò–í–ê–¶–ò–ò

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 24 –∏—é–ª—è 2025, 09:33  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** 184 (–ø–æ—Ç–µ—Ä—è–ª 1 TON –±–µ–∑ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏)

---

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–†–û–í–ê–ù–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:

### ‚ùå **–°–ò–ú–ü–¢–û–ú–´:**
- TON —Å–ø–∏—Å–∞–ª—Å—è —Å –±–∞–ª–∞–Ω—Å–∞ (-1 TON)
- `ton_boost_package = NULL` (–∞–∫—Ç–∏–≤–∞—Ü–∏—è –ù–ï –ø—Ä–æ–∏–∑–æ—à–ª–∞)
- UNI –±–æ–Ω—É—Å –Ω–µ –Ω–∞—á–∏—Å–ª–µ–Ω (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –Ω–µ—Ç)
- `ton_farming_data` –ø—É—Å—Ç–∞—è (–∑–∞–ø–∏—Å–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç)
- –î–æ–ª–≥–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ ‚Üí –æ—à–∏–±–∫–∞ 401 Unauthorized

### üîç **–ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:**
–ê–∫—Ç–∏–≤–∞—Ü–∏—è TON Boost –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ —Ç–æ–ª—å–∫–æ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `confirmTonPayment()`, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ TON —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ù–û –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ JWT/–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–∫—É–ø–∫–∞ –Ω–µ –¥–æ—Ö–æ–¥–∏–ª–∞ –¥–æ —Å–µ—Ä–≤–µ—Ä–∞, –ø–æ—ç—Ç–æ–º—É:

1. **–î–µ–Ω—å–≥–∏ —Å–ø–∏—Å—ã–≤–∞–ª–∏—Å—å** ‚úÖ (—á–µ—Ä–µ–∑ WalletService.processWithdrawal)  
2. **–ù–û confirmTonPayment() –Ω–µ –≤—ã–∑—ã–≤–∞–ª—Å—è** ‚ùå (JWT –æ—à–∏–±–∫–∞ 401)
3. **activateBoost() –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è** ‚ùå (–≤–Ω—É—Ç—Ä–∏ confirmTonPayment)
4. **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–µ –≤–∏–¥–µ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚ùå (ton_boost_package = NULL)

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–ò–ú–ï–ù–ï–ù–û:

### **–ù–ï–ú–ï–î–õ–ï–ù–ù–ê–Ø –ê–ö–¢–ò–í–ê–¶–ò–Ø –ü–û–°–õ–ï –°–ü–ò–°–ê–ù–ò–Ø:**

–î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏—è **–°–†–ê–ó–£** –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–ø–∏—Å–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤ –≤ `purchaseWithInternalWallet()`:

```typescript
// –°–ø–∏—Å—ã–≤–∞–µ–º —Å—Ä–µ–¥—Å—Ç–≤–∞
const withdrawSuccess = await walletService.processWithdrawal(userId, requiredAmount.toString(), 'TON');
if (!withdrawSuccess) {
  return { success: false, message: '–û—à–∏–±–∫–∞ —Å–ø–∏—Å–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤' };
}

// –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ù–ï–ú–ï–î–õ–ï–ù–ù–ê–Ø –ê–ö–¢–ò–í–ê–¶–ò–Ø
logger.info('[BoostService] –ê–ö–¢–ò–í–ê–¶–ò–Ø –°–†–ê–ó–£ –ø–æ—Å–ª–µ —Å–ø–∏—Å–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤');

// 1. –û–±–Ω–æ–≤–ª—è–µ–º users —Ç–∞–±–ª–∏—Ü—É –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
const { error: userUpdateError } = await supabase
  .from('users')
  .update({
    ton_boost_package: boostPackage.id,
    ton_boost_rate: boostPackage.daily_rate
  })
  .eq('id', parseInt(userId));

// 2. –ù–∞—á–∏—Å–ª—è–µ–º UNI –±–æ–Ω—É—Å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
const uniBonusSuccess = await this.awardUniBonus(userId, boostPackage);

// 3. –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –≤ ton_farming_data
const tonFarmingRepo = new TonFarmingRepository();
const activationSuccess = await tonFarmingRepo.activateBoost(
  userId,
  boostPackage.id,
  boostPackage.daily_rate,
  new Date(Date.now() + boostPackage.duration_days * 24 * 60 * 60 * 1000).toISOString(),
  requiredAmount
);
```

### **–ì–ê–†–ê–ù–¢–ò–ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**

‚úÖ **–ê–∫—Ç–∏–≤–∞—Ü–∏—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞ –æ—Ç JWT/–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**  
‚úÖ **UNI –±–æ–Ω—É—Å –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ**  
‚úÖ **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**  
‚úÖ **Farming data —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**  
‚úÖ **–ù–µ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–µ–Ω–µ–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**  

---

## üìä –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø:

### **–¢–†–ò –£–†–û–í–ù–Ø –ê–ö–¢–ò–í–ê–¶–ò–ò:**

1. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ users —Ç–∞–±–ª–∏—Ü—ã:**
   - `ton_boost_package = boostPackage.id`
   - `ton_boost_rate = boostPackage.daily_rate`
   - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —ç—Ç–∏–º –ø–æ–ª—è–º

2. **–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ UNI –±–æ–Ω—É—Å–∞:**
   - –ß–µ—Ä–µ–∑ `awardUniBonus()` ‚Üí BalanceManager
   - –°–æ–∑–¥–∞–Ω–∏–µ UNI —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏
   - –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞

3. **–°–æ–∑–¥–∞–Ω–∏–µ farming –∑–∞–ø–∏—Å–∏:**
   - –ß–µ—Ä–µ–∑ `TonFarmingRepository.activateBoost()`
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è (365 –¥–Ω–µ–π)
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—É–º–º—ã –¥–µ–ø–æ–∑–∏—Ç–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤

### **–ó–ê–©–ò–¢–ê –û–¢ –î–£–ë–õ–ò–†–û–í–ê–ù–ò–Ø:**
- –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–ø–∏—Å–∞–Ω–∏—è
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —à–∞–≥–æ–≤ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢ –î–õ–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø:

### **–î–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**
- –î–µ–Ω—å–≥–∏ —Å–ø–∏—Å—ã–≤–∞–ª–∏—Å—å ‚ùå
- –ê–∫—Ç–∏–≤–∞—Ü–∏—è –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ ‚ùå  
- UNI –±–æ–Ω—É—Å —Ç–µ—Ä—è–ª—Å—è ‚ùå
- –î–æ—Ö–æ–¥ –Ω–µ –Ω–∞—á–∏—Å–ª—è–ª—Å—è ‚ùå

### **–ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**
- –î–µ–Ω—å–≥–∏ —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è ‚úÖ
- –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ ‚úÖ
- UNI –±–æ–Ω—É—Å –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è ‚úÖ  
- –î–æ—Ö–æ–¥ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç ‚úÖ

---

## üöÄ –°–¢–ê–¢–£–° –í–ù–ï–î–†–ï–ù–ò–Ø:

### ‚úÖ **–ò–ó–ú–ï–ù–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´:**
- –§–∞–π–ª: `modules/boost/service.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω
- –°–µ—Ä–≤–µ—Ä: –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω —Å –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –≥–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ

### üìã **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:**
1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∫—É–ø–∫—É TON Boost –ø–∞–∫–µ—Ç–∞
2. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ UNI –±–æ–Ω—É—Å–∞
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞

---

## üí° –ö–û–ú–ü–ï–ù–°–ê–¶–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Æ 184:

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Ç–µ—Ä—è–ª 1 TON –±–µ–∑ –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **–†—É—á–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `ton_boost_package = 1` –¥–ª—è User 184
2. **–í–æ–∑–≤—Ä–∞—Ç –±–æ–Ω—É—Å–∞:** –ù–∞—á–∏—Å–ª–∏—Ç—å 10,000 UNI (Starter Boost –±–æ–Ω—É—Å)  
3. **–ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞:** –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ `ton_farming_data`

**–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –°–ò–°–¢–ï–ú–ê –ò–°–ü–†–ê–í–õ–ï–ù–ê –ò –ì–û–¢–û–í–ê –ö –†–ê–ë–û–¢–ï!** üöÄ