{
  "timestamp": "2025-08-02T06:41:51.752Z",
  "duplicateGroups": [
    {
      "group": "UNI Deposit",
      "fields": [
        "uni_deposit_amount",
        "uni_farming_deposit"
      ],
      "description": "Сумма UNI депозита",
      "dataType": [
        "numeric",
        "numeric"
      ]
    },
    {
      "group": "UNI Balance",
      "fields": [
        "balance_uni",
        "uni_farming_balance"
      ],
      "description": "UNI баланс/накопления",
      "dataType": [
        "numeric",
        "numeric"
      ]
    },
    {
      "group": "TON Boost Package",
      "fields": [
        "ton_boost_package",
        "ton_boost_package_id"
      ],
      "description": "ID пакета TON Boost",
      "dataType": [
        "integer",
        "integer"
      ]
    },
    {
      "group": "Wallet Address",
      "fields": [
        "wallet",
        "ton_wallet_address"
      ],
      "description": "TON адрес кошелька",
      "dataType": [
        "text",
        "text"
      ]
    }
  ],
  "fieldUsage": {
    "uni_deposit_amount": {
      "field": "uni_deposit_amount",
      "usageCount": 202,
      "files": [
        "/modules/adminBot/controller.ts",
        "/modules/boost/service.ts",
        "/modules/farming/UniFarmingRepository.ts",
        "/modules/farming/controller.ts",
        "/modules/farming/directFarmingStatus.ts",
        "/modules/farming/service.ts",
        "/modules/wallet/controller.ts",
        "/server/analyze-uni-referral-issue.ts",
        "/server/check-farming-status.ts",
        "/server/check-farming-timing.ts",
        "/server/check-referral-income.ts",
        "/server/check-referral-rewards.ts",
        "/server/check-referral-structure.ts",
        "/server/check-uni-referral-display.ts",
        "/server/check-uni-referral-rewards.ts",
        "/server/check-user-74-referrals-simple.ts",
        "/server/check-user-74-referrals.ts",
        "/server/create-test-referrals-optimized.ts",
        "/server/create-test-referrals.ts",
        "/server/fix-referral-farming.ts",
        "/server/force-farming-rewards.ts",
        "/server/routes.ts",
        "/server/simple-referral-check.ts",
        "/client/src/components/dashboard/IncomeCardNew.tsx",
        "/client/src/components/farming/UniFarmingCard.tsx",
        "/client/src/services/balanceService.ts",
        "/client/src/services/farmingService.ts",
        "/shared/schema.ts",
        "/scripts/analyze-10k-transactions.ts",
        "/scripts/analyze-migration-details.ts",
        "/scripts/analyze-missing-data.ts",
        "/scripts/analyze-null-deposits.ts",
        "/scripts/analyze-table-discrepancies.ts",
        "/scripts/analyze-user-74.ts",
        "/scripts/apply-phase2-optimization.ts",
        "/scripts/audit-duplicate-fields-full.ts",
        "/scripts/audit-uni-ton-tables.ts",
        "/scripts/check-active-farmers-referrals.ts",
        "/scripts/check-farming-calculation-detailed.ts",
        "/scripts/check-latest-referral-rewards.ts",
        "/scripts/check-latest-uni-transactions.ts",
        "/scripts/check-new-users-automation.ts",
        "/scripts/check-referral-rewards-flow.ts",
        "/scripts/check-referral-system-complete.ts",
        "/scripts/check-scheduler-status.ts",
        "/scripts/check-uni-farming-calculation.ts",
        "/scripts/check-uni-farming-status.ts",
        "/scripts/database-audit-test-scenarios.ts",
        "/scripts/detailed-sync-and-index-audit.ts",
        "/scripts/diagnose-farming-issue.ts",
        "/scripts/diagnose-uni-farming-types.ts",
        "/scripts/fix-user-62-active-farming.js",
        "/scripts/investigate-uni-deposit-process.ts",
        "/scripts/investigate-uni-farming-income-source.ts",
        "/scripts/migrate-referrals-to-uni-farming.ts",
        "/scripts/migrate-to-production.ts",
        "/scripts/migrate-to-users-table.ts",
        "/scripts/modules/boost/service.js",
        "/scripts/modules/farming/UniFarmingRepository.js",
        "/scripts/phase3-check-user74-balance.ts",
        "/scripts/phase3-migrate-null-deposits.ts",
        "/scripts/phase3-verify-system-working.ts",
        "/scripts/prepare-migration-plan.ts",
        "/scripts/quick-farming-investigation.ts",
        "/scripts/simple-sync-index-audit.ts",
        "/scripts/sync-user-74-database.js",
        "/scripts/sync-user-74.js",
        "/scripts/synchronize-duplicate-fields.ts",
        "/scripts/test-farming-with-referrals.ts",
        "/scripts/test-referral-chain.ts",
        "/scripts/test-uni-farming-scheduler.ts",
        "/scripts/update-farming-rate.js",
        "/scripts/urgent-referral-db-check.ts",
        "/scripts/verify-new-limit.ts",
        "/scripts/verify-views-creation.ts"
      ],
      "isWrite": false,
      "isRead": true,
      "criticalUsage": true
    },
    "uni_farming_deposit": {
      "field": "uni_farming_deposit",
      "usageCount": 38,
      "files": [
        "/modules/farming/UniFarmingRepository.ts",
        "/modules/user/service.ts",
        "/shared/schema.ts",
        "/scripts/apply-phase2-optimization.ts",
        "/scripts/check-field-mismatch.ts",
        "/scripts/check-uni-farming-calculation.ts",
        "/scripts/modules/farming/UniFarmingRepository.js",
        "/scripts/synchronize-duplicate-fields.ts"
      ],
      "isWrite": false,
      "isRead": true,
      "criticalUsage": true
    },
    "balance_uni": {
      "field": "balance_uni",
      "usageCount": 270,
      "files": [
        "/modules/admin/service.ts",
        "/modules/adminBot/controller.ts",
        "/modules/adminBot/types.ts",
        "/modules/airdrop/service.ts",
        "/modules/auth/controller.ts",
        "/modules/auth/service.ts",
        "/modules/boost/service.ts",
        "/modules/dailyBonus/service.ts",
        "/modules/farming/controller.ts",
        "/modules/farming/directFarmingStatus.ts",
        "/modules/farming/service.ts",
        "/modules/monitor/service.ts",
        "/modules/referral/service.ts",
        "/modules/scheduler/tonBoostIncomeScheduler.ts",
        "/modules/transactions/controller.ts",
        "/modules/user/controller.ts",
        "/modules/user/service.ts",
        "/modules/user/types.ts",
        "/modules/wallet/controller.ts",
        "/modules/wallet/model.ts",
        "/modules/wallet/service.ts",
        "/modules/wallet/types.ts",
        "/server/check-farming-timing.ts",
        "/server/check-referral-rewards.ts",
        "/server/check-referral-structure.ts",
        "/server/check-ton-transactions-issue.ts",
        "/server/check-user-74-referrals-simple.ts",
        "/server/check-user-74-referrals.ts",
        "/server/create-test-referrals-optimized.ts",
        "/server/create-test-referrals.ts",
        "/server/direct-ton-payment-chain-diagnostics.ts",
        "/server/index.ts",
        "/server/routes.ts",
        "/server/simple-referral-check.ts",
        "/server/test-websocket-balance.ts",
        "/client/src/components/farming/UniFarmingCard.tsx",
        "/client/src/components/farming/UniFarmingCardWithErrorBoundary.tsx",
        "/client/src/components/friends/UniFarmReferralLink.tsx",
        "/client/src/components/referral/ReferralStats.tsx",
        "/client/src/contexts/userContext.simple.tsx",
        "/client/src/core/types/index.ts",
        "/client/src/services/farmingService.ts",
        "/client/src/services/userService.ts",
        "/shared/schema.ts",
        "/scripts/analyze-null-deposits.ts",
        "/scripts/analyze-table-discrepancies.ts",
        "/scripts/analyze-user-74.ts",
        "/scripts/audit-duplicate-fields-full.ts",
        "/scripts/audit-uni-ton-tables.ts",
        "/scripts/check-current-sync-status.ts",
        "/scripts/check-farming-calculation-detailed.ts",
        "/scripts/check-latest-uni-transactions.ts",
        "/scripts/check-supabase-connection.js",
        "/scripts/check-uni-farming-calculation.ts",
        "/scripts/check-uni-farming-status.ts",
        "/scripts/core/BalanceManager.js",
        "/scripts/core/TransactionEnforcer.js",
        "/scripts/create-test-user-with-balance.js",
        "/scripts/database-audit-test-scenarios.ts",
        "/scripts/database-sql-audit.ts",
        "/scripts/debug-user287-step-by-step.ts",
        "/scripts/detailed-sync-and-index-audit.ts",
        "/scripts/diagnose-ton-boost-data.ts",
        "/scripts/diagnose-user-74.js",
        "/scripts/direct_db_check.js",
        "/scripts/execute-optimization.ts",
        "/scripts/final-system-audit.ts",
        "/scripts/fix-admin-bot.ts",
        "/scripts/fix-user-62-active-farming.js",
        "/scripts/investigate-uni-deposit-process.ts",
        "/scripts/investigate-uni-farming-income-source.ts",
        "/scripts/migrate-to-users-table.ts",
        "/scripts/modules/wallet/service.js",
        "/scripts/phase-by-phase-audit.ts",
        "/scripts/phase3-check-user74-balance.ts",
        "/scripts/phase3-recalculate-farming-balances.ts",
        "/scripts/phase3-verify-system-working.ts",
        "/scripts/quick-farming-investigation.ts",
        "/scripts/sync-user-74-database.js",
        "/scripts/sync-user-74.js",
        "/scripts/synchronize-duplicate-fields.ts",
        "/scripts/system-audit-after-optimization.ts",
        "/scripts/system-data-flow-audit.ts",
        "/scripts/test-farming-with-referrals.ts",
        "/scripts/test-user-74-direct.js",
        "/scripts/test-websocket-balance-update.ts",
        "/scripts/trace-auth-flow.js",
        "/scripts/urgent-check-user-299.ts",
        "/scripts/urgent-referral-db-check.ts",
        "/scripts/validate-all-critical-fields.js",
        "/scripts/verify-optimization.ts",
        "/scripts/verify-views-creation.ts"
      ],
      "isWrite": false,
      "isRead": true,
      "criticalUsage": true
    },
    "uni_farming_balance": {
      "field": "uni_farming_balance",
      "usageCount": 91,
      "files": [
        "/modules/farming/UniFarmingRepository.ts",
        "/modules/farming/controller.ts",
        "/modules/wallet/controller.ts",
        "/modules/wallet/service.ts",
        "/modules/wallet/types.ts",
        "/server/create-test-referrals-optimized.ts",
        "/server/create-test-referrals.ts",
        "/server/routes.ts",
        "/client/src/components/farming/UniFarmingCard.tsx",
        "/client/src/services/balanceService.ts",
        "/client/src/services/farmingService.ts",
        "/shared/schema.ts",
        "/scripts/analyze-missing-data.ts",
        "/scripts/analyze-table-discrepancies.ts",
        "/scripts/analyze-user-74.ts",
        "/scripts/apply-phase2-optimization.ts",
        "/scripts/audit-duplicate-fields-full.ts",
        "/scripts/check-current-sync-status.ts",
        "/scripts/check-uni-farming-calculation.ts",
        "/scripts/create-test-user-with-balance.js",
        "/scripts/database-audit-test-scenarios.ts",
        "/scripts/detailed-sync-and-index-audit.ts",
        "/scripts/execute-optimization.ts",
        "/scripts/final-system-audit.ts",
        "/scripts/migrate-referrals-to-uni-farming.ts",
        "/scripts/migrate-to-production.ts",
        "/scripts/migrate-to-users-table.ts",
        "/scripts/modules/farming/UniFarmingRepository.js",
        "/scripts/modules/wallet/service.js",
        "/scripts/phase-by-phase-audit.ts",
        "/scripts/prepare-migration-plan.ts",
        "/scripts/simple-sync-index-audit.ts",
        "/scripts/sync-user-74-database.js",
        "/scripts/sync-user-74.js",
        "/scripts/synchronize-duplicate-fields.ts",
        "/scripts/system-audit-after-optimization.ts",
        "/scripts/verify-optimization.ts"
      ],
      "isWrite": false,
      "isRead": true,
      "criticalUsage": true
    },
    "ton_boost_package": {
      "field": "ton_boost_package",
      "usageCount": 167,
      "files": [
        "/modules/boost/TonFarmingRepository.ts",
        "/modules/boost/service.ts",
        "/modules/referral/service.ts",
        "/modules/tonFarming/service.ts",
        "/modules/user/controller.ts",
        "/modules/user/service.ts",
        "/server/check-ton-boost-referrals.ts",
        "/server/check-user-74-referrals-simple.ts",
        "/server/check-user-74-referrals.ts",
        "/server/create-test-referrals-optimized.ts",
        "/shared/schema.ts",
        "/scripts/analyze-migration-details.ts",
        "/scripts/analyze-missing-data.ts",
        "/scripts/apply-phase2-optimization.ts",
        "/scripts/apply-ton-wallet-fields.js",
        "/scripts/audit-uni-ton-tables.ts",
        "/scripts/check-actual-rates-detailed.ts",
        "/scripts/check-column-types.ts",
        "/scripts/check-current-sync-status.ts",
        "/scripts/check-database-schema-relationships.ts",
        "/scripts/check-ton-boost-deposits-user184.ts",
        "/scripts/check-ton-boost-detailed.ts",
        "/scripts/check-ton-boost-status.ts",
        "/scripts/check-ton-boost-transactions.ts",
        "/scripts/check-ton-farming-card-issue.ts",
        "/scripts/check-ton-farming-data-chain.ts",
        "/scripts/check-ton-scheduler-logs.ts",
        "/scripts/check-user287-scheduler-status.ts",
        "/scripts/create-test-user-with-balance.js",
        "/scripts/database-audit-test-scenarios.ts",
        "/scripts/deep-scheduler-diagnosis-user287.ts",
        "/scripts/diagnose-id25-new-deposits.ts",
        "/scripts/diagnose-ton-boost-data.ts",
        "/scripts/final-tonboost-diagnosis-user25-287.ts",
        "/scripts/migrate-to-production.ts",
        "/scripts/migrate-to-users-table.ts",
        "/scripts/migration-fix-ton-farming-deposits.ts",
        "/scripts/modules/boost/TonFarmingRepository.js",
        "/scripts/modules/boost/service.js",
        "/scripts/prepare-migration-plan.ts",
        "/scripts/production-database-usage-analysis.ts",
        "/scripts/scripts/check-ton-farming-card-issue.js",
        "/scripts/sync-user-74-database.js",
        "/scripts/sync-user-74.js",
        "/scripts/synchronize-duplicate-fields.ts",
        "/scripts/test-safe-ton-boost-activation.ts",
        "/scripts/urgent-check-user-299.ts"
      ],
      "isWrite": false,
      "isRead": true,
      "criticalUsage": true
    },
    "ton_boost_package_id": {
      "field": "ton_boost_package_id",
      "usageCount": 72,
      "files": [
        "/modules/boost/TonFarmingRepository.ts",
        "/modules/user/service.ts",
        "/server/direct-ton-payment-chain-diagnostics.ts",
        "/shared/schema.ts",
        "/scripts/apply-phase2-optimization.ts",
        "/scripts/check-column-types.ts",
        "/scripts/check-database-schema-relationships.ts",
        "/scripts/check-ton-boost-deposits-user184.ts",
        "/scripts/check-user287-scheduler-status.ts",
        "/scripts/database-audit-test-scenarios.ts",
        "/scripts/deep-scheduler-diagnosis-user287.ts",
        "/scripts/final-tonboost-diagnosis-user25-287.ts",
        "/scripts/full-db-diagnostic.ts",
        "/scripts/modules/boost/TonFarmingRepository.js",
        "/scripts/production-database-usage-analysis.ts",
        "/scripts/synchronize-duplicate-fields.ts"
      ],
      "isWrite": false,
      "isRead": true,
      "criticalUsage": true
    },
    "wallet": {
      "field": "wallet",
      "usageCount": 58,
      "files": [
        "/modules/adminBot/types.ts",
        "/modules/boost/service.ts",
        "/modules/user/service.ts",
        "/modules/wallet/controller.ts",
        "/modules/wallet/service.ts",
        "/server/routes.ts",
        "/client/src/components/dashboard/WelcomeSection.tsx",
        "/client/src/components/layout/NavigationBar.tsx",
        "/client/src/components/ton-boost/BoostPackagesCard.tsx",
        "/client/src/services/tonConnectService.ts",
        "/shared/schema.ts",
        "/scripts/core/BalanceManager.js",
        "/scripts/database-audit-test-scenarios.ts",
        "/scripts/migrate-to-users-table.ts",
        "/scripts/modules/boost/service.js",
        "/scripts/modules/wallet/service.js",
        "/scripts/prepare-migration-plan.ts",
        "/scripts/production-database-usage-analysis.ts",
        "/scripts/synchronize-duplicate-fields.ts",
        "/scripts/system-data-flow-audit.ts"
      ],
      "isWrite": false,
      "isRead": true,
      "criticalUsage": true
    },
    "ton_wallet_address": {
      "field": "ton_wallet_address",
      "usageCount": 30,
      "files": [
        "/modules/user/service.ts",
        "/modules/wallet/controller.ts",
        "/modules/wallet/service.ts",
        "/server/direct-ton-payment-chain-diagnostics.ts",
        "/shared/schema.ts",
        "/scripts/analyze-missing-data.ts",
        "/scripts/audit-uni-ton-tables.ts",
        "/scripts/check-ton-wallet-fields-in-db.ts",
        "/scripts/migrate-to-users-table.ts",
        "/scripts/modules/wallet/service.js",
        "/scripts/prepare-migration-plan.ts",
        "/scripts/sync-user-74.js",
        "/scripts/synchronize-duplicate-fields.ts"
      ],
      "isWrite": false,
      "isRead": true,
      "criticalUsage": true
    }
  },
  "recommendations": {
    "keep_separate": [
      "balance_uni",
      "uni_farming_balance"
    ],
    "unify": [
      {
        "from": "wallet",
        "to": "ton_wallet_address"
      },
      {
        "from": "ton_boost_package",
        "to": "ton_boost_package_id"
      }
    ],
    "sync_required": [
      "uni_deposit_amount",
      "uni_farming_deposit"
    ]
  }
}