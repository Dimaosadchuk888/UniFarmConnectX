# Уніфікований конфігураційний файл для UniFarm
# Найновіші налаштування для продакшену з підтримкою резервних варіантів

# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
TELEGRAM_BOT_USERNAME=UniFarming_Bot
# Пропускаємо валідацію Telegram у режимі розробки або при тестуванні
SKIP_TELEGRAM_CHECK=true
ALLOW_BROWSER_ACCESS=true

# Database Configuration - Neon
DATABASE_URL=postgresql://neondb_owner:npg_SpgdNBV70WKl@ep-lucky-boat-a463bggt-pooler.us-east-1.aws.neon.tech/neondb?sslmode=require
NEON_DATABASE_URL=postgresql://neondb_owner:npg_SpgdNBV70WKl@ep-lucky-boat-a463bggt.us-east-1.aws.neon.tech/neondb?sslmode=require
NEON_PROJECT_ID=br-gentle-snowflake-a4p4y6rz
NEON_DB_URL=postgresql://neondb_owner:npg_SpgdNBV70WKl@ep-lucky-boat-a463bggt-pooler.us-east-1.aws.neon.tech/neondb?sslmode=require

# Database Replit - використовується як резервний варіант, якщо Neon недоступний
BACKUP_DATABASE_URL=${DATABASE_URL}

# Database Storage Strategy
# Система дотримується такого порядку: 
# 1. Neon DB (якщо доступна)
# 2. Replit PostgreSQL (якщо доступна)
# 3. In-memory storage (резервний варіант)
DATABASE_PROVIDER=auto
USE_NEON_DB=true
USE_LOCAL_DB=true
ALLOW_MEMORY_FALLBACK=true
USE_MEMORY_SESSION=true

# SSL Settings
PGSSLMODE=require

# Application URLs
MINI_APP_URL=https://uni-farm-connect-x-lukyanenkolawfa.replit.app
APP_URL=https://uni-farm-connect-x-lukyanenkolawfa.replit.app
TELEGRAM_WEBHOOK_URL=https://uni-farm-connect-x-lukyanenkolawfa.replit.app/api/telegram/webhook

# Server Settings
PORT=3000
NODE_ENV=production

# Error Handling
IGNORE_PARTITION_ERRORS=true
SKIP_PARTITION_CREATION=true
DISABLE_PARTITION_CHECK=true
IGNORE_DB_CONNECTION_ERRORS=true

# Додаткові налаштування для обробки помилок
TELEGRAM_DEBUG=true
TELEGRAM_MAX_AGE_HOURS=48
SESSION_SECRET=unified_farm_session_key

# Експериментальні функції
# Налаштування для активних партицій
ACTIVE_PARTITION=transactions_2025_05_23