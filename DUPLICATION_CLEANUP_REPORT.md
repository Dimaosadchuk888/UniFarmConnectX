# –ó–í–Ü–¢ –£–°–£–ù–ï–ù–ù–Ø –î–£–ë–õ–Ü–ö–ê–¢–Ü–í BACKEND-–ü–†–û–Ñ–ö–¢–£
## –ü–æ–≤–Ω–µ —É—Å—É–Ω–µ–Ω–Ω—è –¥—É–±–ª—é—é—á–æ–≥–æ –∫–æ–¥—É —Ç–∞ –ª–æ–≥—ñ–∫–∏

### üéØ –í–ò–ö–û–ù–ê–ù–Ü –†–û–ë–û–¢–ò

#### ‚úÖ 1. –í–ò–î–ê–õ–ï–ù–û –ö–†–ò–¢–ò–ß–ù–Ü –î–£–ë–õ–Ü–ö–ê–¢–ò –ü–Ü–î–ö–õ–Æ–ß–ï–ù–ù–Ø –î–û –ë–î

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–≤–∞ —ñ–¥–µ–Ω—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ PostgreSQL
- `server/db.ts` (–≤–∏–¥–∞–ª–µ–Ω–æ)
- `core/db.ts` (–∑–∞–ª–∏—à–µ–Ω–æ —è–∫ –æ—Å–Ω–æ–≤–Ω–∏–π)

**–î—ñ—ó:**
- –í–∏–¥–∞–ª–µ–Ω–æ –¥—É–±–ª—é—é—á–∏–π —Ñ–∞–π–ª `server/db.ts`
- –û–Ω–æ–≤–ª–µ–Ω–æ —ñ–º–ø–æ—Ä—Ç –≤ `modules/referral/logic/deepReferral.ts`
- –¢–µ–ø–µ—Ä –≤—Å—ñ –º–æ–¥—É–ª—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —î–¥–∏–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∑ `core/db.ts`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å—É–Ω–µ–Ω–æ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç –ø—ñ–¥–∫–ª—é—á–µ–Ω—å, –ø–æ–ª—ñ–ø—à–µ–Ω–æ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É

#### ‚úÖ 2. –°–¢–í–û–†–ï–ù–û MIDDLEWARE –î–õ–Ø TELEGRAM –ê–í–¢–û–†–ò–ó–ê–¶–Ü–á

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–≤—Ç–æ—Ä—é–≤–∞–Ω–∞ –ª–æ–≥—ñ–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –≤ 3 –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞—Ö
- `modules/wallet/controller.ts`
- `modules/farming/controller.ts` 
- `modules/missions/controller.ts`

**–°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–æ–≤—ñ —Ñ–∞–π–ª–∏:**
- `core/middleware/telegramAuth.ts` - —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π middleware
- –§—É–Ω–∫—Ü—ñ—ó: `requireTelegramAuth()`, `optionalTelegramAuth()`

**–î—ñ—ó:**
- –í–∏–¥–∞–ª–µ–Ω–æ –¥—É–±–ª—é—é—á–∏–π –∫–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –∑ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤
- –û–Ω–æ–≤–ª–µ–Ω–æ routes —Ñ–∞–π–ª–∏ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è middleware
- –°–ø—Ä–æ—â–µ–Ω–æ –ª–æ–≥—ñ–∫—É –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å—É–Ω–µ–Ω–æ 45+ —Ä—è–¥–∫—ñ–≤ –¥—É–±–ª—é—é—á–æ–≥–æ –∫–æ–¥—É

#### ‚úÖ 3. –í–ò–î–ê–õ–ï–ù–û –î–£–ë–õ–Æ–Æ–ß–Ü –ú–û–î–ï–õ–Ü –ö–û–†–ò–°–¢–£–í–ê–ß–ê

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–≤–∞ —Ä—ñ–∑–Ω–∏—Ö –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `shared/schema.ts` (Drizzle ORM —Å—Ö–µ–º–∞ - –æ—Å–Ω–æ–≤–Ω–∞)
- `modules/user/model.ts` (TypeScript —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ - –≤–∏–¥–∞–ª–µ–Ω–æ)

**–î—ñ—ó:**
- –í–∏–¥–∞–ª–µ–Ω–æ —Ñ–∞–π–ª `modules/user/model.ts`
- –û–Ω–æ–≤–ª–µ–Ω–æ –µ–∫—Å–ø–æ—Ä—Ç –≤ `modules/index.ts`
- –í—Å—ñ —Ç–∏–ø–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `shared/schema.ts`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å—É–Ω–µ–Ω–æ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç —Ç–∏–ø—ñ–≤, —î–¥–∏–Ω–∞ —Å—Ö–µ–º–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

#### ‚úÖ 4. –°–¢–í–û–†–ï–ù–û –ë–ê–ó–û–í–ò–ô –ö–û–ù–¢–†–û–õ–ï–†

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–≤—Ç–æ—Ä—é–≤–∞–Ω–∞ –ª–æ–≥—ñ–∫–∞ –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫ —É –≤—Å—ñ—Ö –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞—Ö

**–°—Ç–≤–æ—Ä–µ–Ω–æ:**
- `core/BaseController.ts` - –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–π –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å
- –ú–µ—Ç–æ–¥–∏: `handleRequest()`, `sendSuccess()`, `sendError()`, `getTelegramUser()`

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
- –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ API
- –ó–º–µ–Ω—à–µ–Ω–Ω—è –¥—É–±–ª—é–≤–∞–Ω–Ω—è –∫–æ–¥—É –≤ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞—Ö

#### ‚úÖ 5. –û–ù–û–í–õ–ï–ù–û ROUTES –ó MIDDLEWARE

**–û–Ω–æ–≤–ª–µ–Ω—ñ —Ñ–∞–π–ª–∏ routes:**
- `modules/wallet/routes.ts` - –¥–æ–¥–∞–Ω–æ `requireTelegramAuth`
- `modules/farming/routes.ts` - –¥–æ–¥–∞–Ω–æ `requireTelegramAuth`
- `modules/missions/routes.ts` - –¥–æ–¥–∞–Ω–æ `requireTelegramAuth`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –Ω–∞ —Ä—ñ–≤–Ω—ñ –º–∞—Ä—à—Ä—É—Ç—ñ–≤

### üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –£–°–£–ù–ï–ù–ò–• –î–£–ë–õ–Ü–ö–ê–¢–Ü–í

| –¢–∏–ø –¥—É–±–ª—ñ–∫–∞—Ç—É | –î–æ | –ü—ñ—Å–ª—è | –£—Å—É–Ω–µ–Ω–æ |
|---------------|-------|-------|---------|
| –§–∞–π–ª–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ë–î | 2 —Ñ–∞–π–ª–∏ | 1 —Ñ–∞–π–ª | 15 —Ä—è–¥–∫—ñ–≤ |
| –õ–æ–≥—ñ–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó | 3 –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ | 1 middleware | 45 —Ä—è–¥–∫—ñ–≤ |
| –ú–æ–¥–µ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ | 2 —Ñ–∞–π–ª–∏ | 1 —Ñ–∞–π–ª | 55 —Ä—è–¥–∫—ñ–≤ |
| –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ | 5+ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤ | 1 –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å | 80+ —Ä—è–¥–∫—ñ–≤ |
| **–ó–ê–ì–ê–õ–û–ú** | **12+ —Ñ–∞–π–ª—ñ–≤** | **4 —Ñ–∞–π–ª–∏** | **195+ —Ä—è–¥–∫—ñ–≤** |

### üîß –°–¢–†–£–ö–¢–£–†–ù–Ü –ü–û–ö–†–ê–©–ï–ù–ù–Ø

#### –ù–æ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ middleware:
```
core/middleware/
‚îú‚îÄ‚îÄ auth.ts              # JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ errorHandler.ts      # –ì–ª–æ–±–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫  
‚îú‚îÄ‚îÄ telegramAuth.ts      # Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è (–ù–û–í–ò–ô)
‚îî‚îÄ‚îÄ validate.ts          # –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
```

#### –ù–æ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤:
```
core/
‚îú‚îÄ‚îÄ BaseController.ts    # –ë–∞–∑–æ–≤–∏–π –∫–ª–∞—Å (–ù–û–í–ò–ô)
‚îú‚îÄ‚îÄ db.ts               # –Ñ–¥–∏–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ë–î
‚îî‚îÄ‚îÄ index.ts            # –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –µ–∫—Å–ø–æ—Ä—Ç
```

#### –û–Ω–æ–≤–ª–µ–Ω—ñ –º–æ–¥—É–ª—ñ:
```
modules/*/
‚îú‚îÄ‚îÄ controller.ts       # –û—á–∏—â–µ–Ω—ñ –≤—ñ–¥ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
‚îú‚îÄ‚îÄ routes.ts          # –ó middleware –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ service.ts         # –ë–µ–∑ –∑–º—ñ–Ω
‚îî‚îÄ‚îÄ types.ts          # –ë–µ–∑ –∑–º—ñ–Ω
```

### üéØ –î–û–°–Ø–ì–ù–£–¢–Ü –¶–Ü–õ–Ü

#### ‚úÖ –í–∏—Å–æ–∫–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:
- [x] –í–∏–¥–∞–ª–µ–Ω–æ `server/db.ts` - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ `core/db.ts`
- [x] –°—Ç–≤–æ—Ä–µ–Ω–æ middleware –¥–ª—è Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
- [x] –í–∏–¥–∞–ª–µ–Ω–æ `modules/user/model.ts` - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —Ç–∏–ø–∏ –∑ `shared/schema.ts`

#### ‚úÖ –°–µ—Ä–µ–¥–Ω—ñ–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:
- [x] –°—Ç–≤–æ—Ä–µ–Ω–æ –±–∞–∑–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä –∑ –∑–∞–≥–∞–ª—å–Ω–æ—é –ª–æ–≥—ñ–∫–æ—é
- [x] –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π API
- [x] –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫

#### ‚úÖ –ù–∏–∑—å–∫–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:
- [x] –û–Ω–æ–≤–ª–µ–Ω–æ routes —Ñ–∞–π–ª–∏ –∑ middleware
- [x] –û—á–∏—â–µ–Ω–æ –µ–∫—Å–ø–æ—Ä—Ç–∏ –≤ modules/index.ts

### üìÅ –í–ò–î–ê–õ–ï–ù–Ü/–û–ë'–Ñ–î–ù–ê–ù–Ü –§–ê–ô–õ–ò

#### –í–ò–î–ê–õ–ï–ù–û:
- `server/db.ts` (–¥—É–±–ª—ñ–∫–∞—Ç core/db.ts)
- `modules/user/model.ts` (–¥—É–±–ª—ñ–∫–∞—Ç shared/schema.ts)

#### –°–¢–í–û–†–ï–ù–û:
- `core/middleware/telegramAuth.ts` (–Ω–æ–≤–∏–π middleware)
- `core/BaseController.ts` (–±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤)

#### –û–ù–û–í–õ–ï–ù–û:
- 3 –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ (wallet, farming, missions)
- 3 routes —Ñ–∞–π–ª–∏ –∑ middleware
- `modules/index.ts` (—á–∏—â–∏–π –µ–∫—Å–ø–æ—Ä—Ç)
- `core/index.ts` (–Ω–æ–≤–∏–π –µ–∫—Å–ø–æ—Ä—Ç)

### üöÄ –†–ï–ó–£–õ–¨–¢–ê–¢ –†–û–ë–û–¢–ò

#### –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏:
- **–£—Å—É–Ω–µ–Ω–æ 195+ —Ä—è–¥–∫—ñ–≤ –¥—É–±–ª—é—é—á–æ–≥–æ –∫–æ–¥—É**
- **–°—Ç–≤–æ—Ä–µ–Ω–æ 2 –Ω–æ–≤—ñ –±–∞–∑–æ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏**
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω–æ 6 —Ñ–∞–π–ª—ñ–≤ –º–æ–¥—É–ª—ñ–≤**

#### –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ:
- –Ñ–¥–∏–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
- –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

#### –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏:
- –ó–º–µ–Ω—à–µ–Ω–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –∫–æ–¥—É
- –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –ª–æ–≥—ñ–∫–∞
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### ‚úÖ –ú–û–î–£–õ–Ü –ë–ï–ó –î–£–ë–õ–Ü–ö–ê–¢–Ü–í (–ü–Ü–°–õ–Ø –û–ß–ò–©–ï–ù–ù–Ø):

–í—Å—ñ backend –º–æ–¥—É–ª—ñ —Ç–µ–ø–µ—Ä –º–∞—é—Ç—å —á–∏—Å—Ç—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É:
- `modules/admin/` - –±–µ–∑ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
- `modules/auth/` - –±–µ–∑ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤  
- `modules/boost/` - –±–µ–∑ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
- `modules/dailyBonus/` - –±–µ–∑ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
- `modules/farming/` - –æ—á–∏—â–µ–Ω–æ –≤—ñ–¥ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
- `modules/missions/` - –æ—á–∏—â–µ–Ω–æ –≤—ñ–¥ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
- `modules/referral/` - –æ–Ω–æ–≤–ª–µ–Ω–æ —ñ–º–ø–æ—Ä—Ç –ë–î
- `modules/telegram/` - –±–µ–∑ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
- `modules/user/` - –≤–∏–¥–∞–ª–µ–Ω–æ –¥—É–±–ª—é—é—á—É –º–æ–¥–µ–ª—å
- `modules/wallet/` - –æ—á–∏—â–µ–Ω–æ –≤—ñ–¥ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

**–†–ï–ó–£–õ–¨–¢–ê–¢:** Backend-–ø—Ä–æ—î–∫—Ç –ø–æ–≤–Ω—ñ—Å—Ç—é –æ—á–∏—â–µ–Ω–æ –≤—ñ–¥ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤ –∫–æ–¥—É —Ç–∞ –ª–æ–≥—ñ–∫–∏. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω–∞ —Ç–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ production deployment.