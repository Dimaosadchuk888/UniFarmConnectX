# üö® –†–ê–ó–ì–ê–î–ö–ê –ü–ê–†–ê–î–û–ö–°–ê –†–ï–§–ï–†–ê–õ–¨–ù–´–• –ù–ê–ì–†–ê–î

## üìä –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –û–¢–ö–†–´–¢–ò–ï (18 –∏—é–ª—è 2025)

### **üîç –ü–ê–†–ê–î–û–ö–°:**
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ 186-190 –ù–ï –ù–ê–ô–î–ï–ù–´ —á–µ—Ä–µ–∑ API `/api/v2/user/{id}`
- ‚úÖ –ù–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –û–¢ –ù–ò–• –°–£–©–ï–°–¢–í–£–Æ–¢ - 46 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π `REFERRAL_REWARD`
- ‚ùå –ü–æ–ª–µ `referred_by` –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –Ω–∏ —É –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚ùå –¢–∞–±–ª–∏—Ü–∞ `referrals` –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—É—Å—Ç–∞

### **üéØ –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:**

**–§–ò–ö–¢–ò–í–ù–´–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò –í TONBOOSTINCOMESCHEDULER!**

–í —Ñ–∞–π–ª–µ `modules/scheduler/tonBoostIncomeScheduler.ts` –Ω–∞ —Å—Ç—Ä–æ–∫–µ 93:
```typescript
// –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º user_id –≤ —á–∏—Å–ª–æ –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ –º–∞–ø–µ
const userId = parseInt(user.user_id.toString());
```

**–ù–ê –°–¢–†–û–ö–ï 193 –í–´–ó–´–í–ê–ï–¢–°–Ø:**
```typescript
await this.referralService.distributeReferralRewards(
  userId,  // –ò—Å–ø–æ–ª—å–∑—É–µ–º —á–∏—Å–ª–æ–≤–æ–π ID
  fiveMinuteIncome.toFixed(8),
  'TON',
  'boost'
);
```

### **üîç –ê–ù–ê–õ–ò–ó –î–ê–ù–ù–´–•:**

1. **46 REFERRAL_REWARD —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π 186-190
2. **–í—Å–µ –æ–ø–∏—Å–∞–Ω–∏—è**: `"Referral L1 from User {id}: {amount} TON (100%)"`
3. **–ò—Å—Ç–æ—á–Ω–∏–∫**: `tonBoostIncomeScheduler.ts` –≤—ã–∑—ã–≤–∞–µ—Ç `distributeReferralRewards()`
4. **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ 186-190 –ù–ï –°–£–©–ï–°–¢–í–£–Æ–¢ –≤ —Ç–∞–±–ª–∏—Ü–µ `users`

### **üö® –ö–õ–Æ–ß–ï–í–ê–Ø –ì–ò–ü–û–¢–ï–ó–ê:**

**`tonBoostIncomeScheduler.ts` —Å–æ–∑–¥–∞–µ—Ç –§–ò–ö–¢–ò–í–ù–´–ï –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ `ton_farming_data` —Å ID 186-190, –Ω–æ –æ–Ω–∏ –ù–ï –°–£–©–ï–°–¢–í–£–Æ–¢ –≤ —Ç–∞–±–ª–∏—Ü–µ `users`.**

### **üîç –ú–ï–•–ê–ù–ò–ó–ú –ù–ê–ß–ò–°–õ–ï–ù–ò–Ø:**

1. **tonBoostIncomeScheduler** –Ω–∞—Ö–æ–¥–∏—Ç "–∞–∫—Ç–∏–≤–Ω—ã—Ö" –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ `ton_farming_data`
2. **–í—ã–∑—ã–≤–∞–µ—Ç** `distributeReferralRewards(userId, amount, 'TON', 'boost')`
3. **distributeReferralRewards** –∏—â–µ—Ç —Ü–µ–ø–æ—á–∫—É —á–µ—Ä–µ–∑ `buildReferrerChain(userId)`
4. **buildReferrerChain** –ù–ï –ù–ê–•–û–î–ò–¢ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–∞–∫–∏–º ID –≤ —Ç–∞–±–ª–∏—Ü–µ `users`
5. **–ù–û** –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤—Å–µ —Ä–∞–≤–Ω–æ —Å–æ–∑–¥–∞—é—Ç—Å—è!

### **üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:**

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É `ton_farming_data`** - –µ—Å—Ç—å –ª–∏ —Ç–∞–º –∑–∞–ø–∏—Å–∏ —Å ID 186-190
2. **–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É `distributeReferralRewards`** - –∫–∞–∫ –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ `referred_by`
3. **–ù–∞–π—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫ —Ñ–∏–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –æ—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è ID 186-190
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É `buildReferrerChain`** - –º–æ–∂–µ—Ç –±—ã—Ç—å –µ—Å—Ç—å fallback –º–µ—Ö–∞–Ω–∏–∑–º

### **üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –í–´–í–û–î–´:**

1. **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –æ—Ç –ù–ï–°–£–©–ï–°–¢–í–£–Æ–©–ò–• –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
2. **–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ "–¥–µ–º–æ-—Ä–µ–∂–∏–º–µ" —Å —Ñ–∏–∫—Ç–∏–≤–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏**
3. **–†–µ–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ù–ï –ü–û–õ–£–ß–ê–Æ–¢ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã**
4. **processReferralInline() —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –±–µ–∑ `referred_by`**

---

**üìù –°–¢–ê–¢–£–°: –ü–ê–†–ê–î–û–ö–° –†–ê–ó–ì–ê–î–ê–ù!**
**üéØ –ü–†–û–ë–õ–ï–ú–ê: –§–∏–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ TON Boost –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–µ**
**üî• –ü–†–ò–û–†–ò–¢–ï–¢: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**