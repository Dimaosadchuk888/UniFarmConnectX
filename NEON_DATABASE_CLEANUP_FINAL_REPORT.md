# –ü–û–õ–ù–ê–Ø –û–ß–ò–°–¢–ö–ê –û–¢ NEON DATABASE - –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### 1. –£–¥–∞–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤:
- `DATABASE_URL` - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ SUPABASE_URL + SUPABASE_KEY
- `PGHOST` - —É–¥–∞–ª–µ–Ω
- `PGUSER` - —É–¥–∞–ª–µ–Ω  
- `PGPASSWORD` - —É–¥–∞–ª–µ–Ω
- `PGPORT` - —É–¥–∞–ª–µ–Ω
- `PGDATABASE` - —É–¥–∞–ª–µ–Ω

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

**config/database.ts:**
- –ó–∞–º–µ–Ω–µ–Ω databaseConfig –Ω–∞ supabaseConfig
- –£–±—Ä–∞–Ω—ã –≤—Å–µ PG –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ connection pool –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –î–æ–±–∞–≤–ª–µ–Ω—ã Supabase API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**core/monitoring.ts:**
- –ó–∞–º–µ–Ω–µ–Ω import { db, pool } –Ω–∞ import { supabase }
- –û–±–Ω–æ–≤–ª–µ–Ω checkDatabase() –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Supabase API
- –ò–∑–º–µ–Ω–µ–Ω—ã required environment variables –Ω–∞ SUPABASE_URL/SUPABASE_KEY

**production-server.js:**
- –ó–∞–º–µ–Ω–µ–Ω—ã required variables —Å DATABASE_URL –Ω–∞ SUPABASE_URL, SUPABASE_KEY
- –£–±—Ä–∞–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ PostgreSQL DATABASE_URL

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –≤ –º–æ–¥—É–ª—è—Ö:

**–§–∞–π–ª—ã —Å –∑–∞–º–µ–Ω–µ–Ω–Ω—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏:**
- `server/routes.ts` - –∑–∞–º–µ–Ω–µ–Ω db import –Ω–∞ supabase
- `server/index.ts` - –∑–∞–º–µ–Ω–µ–Ω db import –Ω–∞ supabase  
- `modules/user/service.ts` - –∑–∞–º–µ–Ω–µ–Ω db import –Ω–∞ supabase
- `modules/referral/logic/rewardDistribution.ts` - –∑–∞–º–µ–Ω–µ–Ω db import –Ω–∞ supabase
- `modules/missions/service.ts` - –∑–∞–º–µ–Ω–µ–Ω db import –Ω–∞ supabase

### 4. –°–æ—Å—Ç–æ—è–Ω–∏–µ core/db.ts:
- –§–∞–π–ª –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ DEPRECATED
- –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç db = null, pool = null –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ core/supabase.ts

### 5. –°–æ–∑–¥–∞–Ω —á–∏—Å—Ç—ã–π .env —Ñ–∞–π–ª:
```
NODE_ENV=production
PORT=3000
TELEGRAM_BOT_TOKEN=7980427501:AAHdia3LusU9dk2aRvhXgmj9Ozo08nR0Gug
SUPABASE_URL=https://wunnsvicbebssrjqedor.supabase.co
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

## ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ Supabase API

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥—É–ª–∏ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ Supabase API:
- AuthService - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç supabase.from('users')
- UserRepository - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç supabase.from('users') 
- WalletService - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç supabase.from('transactions')
- FarmingScheduler - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç supabase.from('users')
- ReferralService - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç supabase.from('users').eq('referred_by')
- DailyBonusService - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç supabase API –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- AdminService - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç supabase API –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## ‚ö†Ô∏è –ß—Ç–æ –æ—Å—Ç–∞–≤–ª–µ–Ω–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

1. **–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–æ–¥—É–ª–∏ —Å –æ—à–∏–±–∫–∞–º–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:**
   - –û—Å—Ç–∞–≤–ª–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ –∏–º–ø–æ—Ä—Ç—ã db –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø–æ–ª–æ–º–∫–∏ –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ—Ö–æ–¥–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞
   - –í—Å–µ db –≤—ã–∑–æ–≤—ã –∑–∞–º–µ–Ω—è—Ç—Å—è –Ω–∞ supabase API –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ

2. **–§–∞–π–ª—ã dist/:**
   - –°–æ–¥–µ—Ä–∂–∞—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞
   - –ë—É–¥—É—Ç –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω—ã –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º build

3. **Schema —Ñ–∞–π–ª—ã:**
   - shared/schema.ts –æ—Å—Ç–∞–≤–ª–µ–Ω –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è TypeScript —Ç–∏–ø–æ–≤, –Ω–µ –¥–ª—è database –æ–ø–µ—Ä–∞—Ü–∏–π

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã (—Ç–æ–ª—å–∫–æ —ç—Ç–∏):
- ‚úÖ `SUPABASE_URL`
- ‚úÖ `SUPABASE_KEY`
- ‚úÖ `TELEGRAM_BOT_TOKEN`
- ‚úÖ `NODE_ENV`
- ‚úÖ `PORT`

### –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã:
- ‚ùå `DATABASE_URL`
- ‚ùå `PGHOST`
- ‚ùå `PGUSER`
- ‚ùå `PGPASSWORD`
- ‚ùå `PGPORT`
- ‚ùå `PGDATABASE`

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
- **–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:** core/supabase.ts
- **API –º–µ—Ç–æ–¥:** @supabase/supabase-js SDK
- **–û–ø–µ—Ä–∞—Ü–∏–∏:** supabase.from('table_name').select/insert/update/delete
- **–ù–∏–∫–∞–∫–∏—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:** —Å—Ç–∞—Ä—ã–µ pg/drizzle –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –æ—Ç–∫–ª—é—á–µ–Ω—ã

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–µ–Ω–∞ –æ—Ç —Å—Ç–∞—Ä—ã—Ö NeonDB –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ –Ω–∞ Supabase API –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: 14 –∏—é–Ω—è 2025
–°—Ç–∞—Ç—É—Å: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û