# План исправления маршрутизации модуля Wallet

## Проблема
Модуль wallet не загружается через стандартную систему маршрутизации в `server/routes.ts`

## Решения

### Вариант 1: Прямая реализация всех endpoints (БЫСТРОЕ РЕШЕНИЕ)
Перенести все wallet endpoints в `server/index.ts` аналогично `/api/v2/wallet/ton-deposit`

**Преимущества:**
- Быстрое решение (30 минут)
- Гарантированно работает
- Нет риска сломать другие модули

**Недостатки:**
- Нарушение архитектуры
- Дублирование кода

### Вариант 2: Диагностика и исправление загрузки модуля
1. Добавить try-catch блоки в импорты
2. Проверить циклические зависимости
3. Упростить инициализацию WalletController

**Преимущества:**
- Сохранение правильной архитектуры
- Долгосрочное решение

**Недостатки:**
- Требует больше времени (1-2 часа)
- Риск сломать что-то еще

### Вариант 3: Создание нового упрощенного модуля wallet-v2
Создать новый модуль с нуля без сложных зависимостей

**Преимущества:**
- Чистая архитектура
- Избавление от технического долга

**Недостатки:**
- Требует много времени (3-4 часа)

## Рекомендация
Использовать **Вариант 1** для быстрого решения проблемы. Все критические функции (депозиты, выводы, балансы) будут работать через прямые endpoints в `server/index.ts`.

## Необходимые endpoints для переноса:
1. GET `/api/v2/wallet/balance` - получение баланса
2. POST `/api/v2/wallet/withdraw` - вывод средств
3. POST `/api/v2/wallet/transfer` - внутренние переводы
4. GET `/api/v2/wallet/transactions` - история транзакций