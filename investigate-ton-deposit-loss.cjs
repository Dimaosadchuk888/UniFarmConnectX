/**
 * –†–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–æ—Ç–µ—Ä–∏ TON –¥–µ–ø–æ–∑–∏—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è #184
 * –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 0.01 TON, –∑–∞—á–∏—Å–ª–µ–Ω–æ: 0.002082 TON
 */

const { execSync } = require('child_process');

console.log('\nüö® –†–ê–°–°–õ–ï–î–û–í–ê–ù–ò–ï –ü–û–¢–ï–†–ò TON –î–ï–ü–û–ó–ò–¢–ê');
console.log('='.repeat(50));
console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å #184 (REF_1750079004411_nddfp2)');
console.log('–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 0.01 TON');
console.log('–ó–∞—á–∏—Å–ª–µ–Ω–æ: 0.002082 TON');
console.log('–ü–û–¢–ï–†–Ø–ù–û: ~0.007918 TON (79.18%)');
console.log('='.repeat(50));

async function investigateTonDepositLoss() {
  try {
    // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–∏–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
    console.log('\n1Ô∏è‚É£ –ü–æ–∏—Å–∫ –ª–æ–≥–æ–≤ –¥–µ–ø–æ–∑–∏—Ç–∞...');
    
    try {
      const serverLogs = execSync('ps aux | grep "tsx server" | grep -v grep', { encoding: 'utf8' });
      console.log('üì° –°–µ—Ä–≤–µ—Ä –∞–∫—Ç–∏–≤–µ–Ω:', serverLogs.trim() !== '');
    } catch {
      console.log('‚ö†Ô∏è –ü—Ä–æ—Ü–µ—Å—Å —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω');
    }
    
    // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –∏–∑ –ª–æ–≥–æ–≤
    console.log('\n2Ô∏è‚É£ –ê–Ω–∞–ª–∏–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –±–∞–ª–∞–Ω—Å–∞...');
    console.log('üìä –ò–∑ webview_console_logs:');
    console.log('   - –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 1.866523 TON');
    console.log('   - –ü—Ä–µ–¥—ã–¥—É—â–µ–µ: 1.865135 TON');
    console.log('   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ: +0.001388 TON (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ)');
    
    // 3. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã
    console.log('\n3Ô∏è‚É£ –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´ –ü–û–¢–ï–†–ò:');
    console.log('üí∏ –ö–æ–º–∏—Å—Å–∏–∏ —Å–µ—Ç–∏ TON: ~0.001-0.005 TON');
    console.log('üîÑ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏: –≤–æ–∑–º–æ–∂–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–ø–∏—Å–∞–Ω–∏—è');
    console.log('‚öôÔ∏è –°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏: –≤–æ–∑–º–æ–∂–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–º–∏—Å—Å–∏–π');
    console.log('üêõ –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π parsing —Å—É–º–º—ã');
    
    // 4. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    console.log('\n4Ô∏è‚É£ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:');
    console.log('üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å backend –ª–æ–≥–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ TON –¥–µ–ø–æ–∑–∏—Ç–∞');
    console.log('üîó –ù–∞–π—Ç–∏ —Ä–µ–∞–ª—å–Ω—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –≤ TON blockchain');
    console.log('üìã –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–ø–∏—Å–∞–Ω–∏—è');
    console.log('üí∞ –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é');
    
    console.log('\n‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –ü–æ—Ç–µ—Ä—è 80% –¥–µ–ø–æ–∑–∏—Ç–∞ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–∞!');
    
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:', error.message);
  }
}

investigateTonDepositLoss();