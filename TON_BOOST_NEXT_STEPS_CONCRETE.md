# üö® TON BOOST: –ö–û–ù–ö–†–ï–¢–ù–´–ï –®–ê–ì–ò –î–õ–Ø –†–ï–®–ï–ù–ò–Ø

**–°—Ç–∞—Ç—É—Å:** –ö–æ–¥ —Å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ–º –≤–Ω–µ–¥—Ä–µ–Ω, –Ω–æ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞  
**–ü—Ä–æ–±–ª–µ–º–∞:** farming_balance = 25 TON –≤–º–µ—Å—Ç–æ 119 TON (–ø–æ—Ç–µ—Ä—è 79%)

---

## –ü–†–û–ë–õ–ï–ú–ê –ù–ê–ô–î–ï–ù–ê

–í `modules/boost/service.ts` —Å—Ç—Ä–æ–∫–∞ 330 –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö:
```typescript
boostPackage.duration_days,  // –≠—Ç–æ —á–∏—Å–ª–æ (30), –∞ –æ–∂–∏–¥–∞–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ –¥–∞—Ç—ã!
```

–ú–µ—Ç–æ–¥ `activateBoost` –æ–∂–∏–¥–∞–µ—Ç:
```typescript
async activateBoost(userId: string, packageId: number, rate: number, expiresAt?: string, depositAmount?: number)
```

---

## –†–ï–®–ï–ù–ò–ï #1: –ò–°–ü–†–ê–í–ò–¢–¨ –¢–ò–ü –î–ê–ù–ù–´–• (1 —Å—Ç—Ä–æ–∫–∞)

**–§–∞–π–ª:** `modules/boost/service.ts`  
**–°—Ç—Ä–æ–∫–∞:** 330  
**–ó–∞–º–µ–Ω–∏—Ç—å:**
```typescript
boostPackage.duration_days,
```
**–ù–∞:**
```typescript
undefined, // –∏–ª–∏ null
```

–ü–æ–ª–Ω—ã–π –≤—ã–∑–æ–≤ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
```typescript
const immediateActivation = await tonFarmingRepo.activateBoost(
  userId,
  boostPackage.id,
  boostPackage.daily_rate / 100,
  undefined,        // expiresAt - –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
  requiredAmount    // depositAmount - —Å—É–º–º–∞ –¥–µ–ø–æ–∑–∏—Ç–∞
);
```

---

## –†–ï–®–ï–ù–ò–ï #2: –ö–û–ú–ü–ï–ù–°–ê–¶–ò–Ø –ü–û–¢–ï–†–¨ (SQL)

–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 74 –ø–æ—Ç–µ—Ä—è–Ω–æ 94 TON. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å:

```sql
-- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π –±–∞–ª–∞–Ω—Å
UPDATE ton_farming_data 
SET farming_balance = '119' 
WHERE user_id = 74;

-- –ò–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback (—Ç–∞–±–ª–∏—Ü–∞ users)
UPDATE users 
SET ton_farming_balance = '119' 
WHERE id = 74;
```

---

## –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

1. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –≤ service.ts
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä**
3. **–°–¥–µ–ª–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –ø–æ–∫—É–ø–∫—É** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1 TON)
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å:**
   - –î–æ–ª–∂–µ–Ω —Å—Ç–∞—Ç—å 120 TON (119 + 1)
   - –ê –Ω–µ 1 TON (–∑–∞–º–µ–Ω–∞)

---

## –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê: –†–£–ß–ù–û–ï –ù–ê–ö–û–ü–õ–ï–ù–ò–ï

–ï—Å–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –ø–æ–º–æ–∂–µ—Ç, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `TonFarmingRepository.activateBoost()`:

```typescript
logger.info('[TonFarmingRepository] activateBoost –≤—ã–∑–≤–∞–Ω', {
  userId,
  packageId,
  rate,
  expiresAt,
  depositAmount,
  existingRecord,
  newFarmingBalance
});
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç, –ø–æ—á–µ–º—É –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

---

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–Ω–∞—á–∞–ª–∞ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –†–µ—à–µ–Ω–∏–µ #1 (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –ø–∞—Ä–∞–º–µ—Ç—Ä–∞).