# –ü–û–í–ù–ï –£–°–£–ù–ï–ù–ù–Ø –î–£–ë–õ–Ü–ö–ê–¢–Ü–í BACKEND-–ü–†–û–Ñ–ö–¢–£
## –î–µ—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç –ø—Ä–æ –≤–∏–∫–æ–Ω–∞–Ω—É —Ä–æ–±–æ—Ç—É

### ‚úÖ –ü–û–í–ù–Ü–°–¢–Æ –í–ò–ö–û–ù–ê–ù–û

#### 1. **–°—Ç–≤–æ—Ä–µ–Ω–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–∏–π BaseController**
**–§–∞–π–ª:** `core/BaseController.ts`
**–£—Å—É–Ω—É—Ç—ñ –¥—É–±–ª—ñ–∫–∞—Ç–∏:**
- –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —É –≤—Å—ñ—Ö –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞—Ö (150+ —Ä—è–¥–∫—ñ–≤)
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó (80+ —Ä—è–¥–∫—ñ–≤)
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π API (50+ —Ä—è–¥–∫—ñ–≤)

**–ù–æ–≤—ñ –º–µ—Ç–æ–¥–∏:**
- `handleRequest()` - —î–¥–∏–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
- `validateTelegramAuth()` - —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è
- `sendSuccess()` / `sendError()` - —É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- `validateRequiredFields()` - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–æ–ª—ñ–≤
- `validateParams()` - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
- `getPagination()` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è

#### 2. **–°—Ç–≤–æ—Ä–µ–Ω–æ UserRepository**
**–§–∞–π–ª:** `core/repositories/UserRepository.ts`
**–£—Å—É–Ω—É—Ç—ñ –¥—É–±–ª—ñ–∫–∞—Ç–∏:**
- –ü–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ø–æ Telegram ID (45+ —Ä—è–¥–∫—ñ–≤)
- –ü–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ø–æ ID —Ç–∞ Guest ID (30+ —Ä—è–¥–∫—ñ–≤)
- –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (25+ —Ä—è–¥–∫—ñ–≤)

**–¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –º–µ—Ç–æ–¥–∏:**
- `findByTelegramId()` - —î–¥–∏–Ω–∏–π –ø–æ—à—É–∫ –ø–æ Telegram
- `findById()` / `findByGuestId()` - —É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω—ñ –ø–æ—à—É–∫–∏
- `requireByTelegramId()` - –ø–æ—à—É–∫ –∑ –≥–∞—Ä–∞–Ω—Ç—ñ—î—é
- `updateBalance()` - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –±–∞–ª–∞–Ω—Å—É
- `updateFarmingTimestamps()` - —Ñ–∞—Ä–º—ñ–Ω–≥ timestamps

#### 3. **–û–Ω–æ–≤–ª–µ–Ω–æ –≤—Å—ñ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏**

**FarmingController:** `modules/farming/controller.ts`
- Extends BaseController
- –£—Å—É–Ω—É—Ç–æ 60+ —Ä—è–¥–∫—ñ–≤ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
- –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
- –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

**MissionsController:** `modules/missions/controller.ts`
- Extends BaseController  
- –£—Å—É–Ω—É—Ç–æ 70+ —Ä—è–¥–∫—ñ–≤ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è —á–µ—Ä–µ–∑ –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥—ñ–∫–∞

**WalletController:** `modules/wallet/controller.ts`
- Extends BaseController
- –£—Å—É–Ω—É—Ç–æ 55+ —Ä—è–¥–∫—ñ–≤ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —á–µ—Ä–µ–∑ –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å

**AuthController:** `modules/auth/controller.ts`
- Extends BaseController
- –£—Å—É–Ω—É—Ç–æ 120+ —Ä—è–¥–∫—ñ–≤ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
- –ü–æ–≤–Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü—ñ—è –≤—Å—ñ—Ö –º–µ—Ç–æ–¥—ñ–≤

**UserController:** `modules/user/controller.ts`
- Extends BaseController
- –£—Å—É–Ω—É—Ç–æ 140+ —Ä—è–¥–∫—ñ–≤ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
- –°–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥—ñ–∫–∞ —á–µ—Ä–µ–∑ –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å

#### 4. **–û–Ω–æ–≤–ª–µ–Ω–æ —Å–µ—Ä–≤—ñ—Å–∏**

**FarmingService:** `modules/farming/service.ts`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î UserRepository
- –£—Å—É–Ω—É—Ç–æ 30+ —Ä—è–¥–∫—ñ–≤ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤ –ø–æ—à—É–∫—É

**MissionsService:** `modules/missions/service.ts`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î UserRepository
- –£—Å—É–Ω—É—Ç–æ 25+ —Ä—è–¥–∫—ñ–≤ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤

**WalletService:** `modules/wallet/service.ts`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î UserRepository
- –£—Å—É–Ω—É—Ç–æ 20+ —Ä—è–¥–∫—ñ–≤ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤

### üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –£–°–£–ù–ï–ù–ò–• –î–£–ë–õ–Ü–ö–ê–¢–Ü–í

| –¢–∏–ø –¥—É–±–ª—ñ–∫–∞—Ç—É | –§–∞–π–ª—ñ–≤ –æ–Ω–æ–≤–ª–µ–Ω–æ | –†—è–¥–∫—ñ–≤ —É—Å—É–Ω—É—Ç–æ | –°—Ç–∞—Ç—É—Å |
|---------------|-----------------|----------------|---------|
| **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫** | 5 –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤ | ~150 —Ä—è–¥–∫—ñ–≤ | ‚úÖ –í–∏–∫–æ–Ω–∞–Ω–æ |
| **–ü–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤** | 3 —Å–µ—Ä–≤—ñ—Å–∏ | ~100 —Ä—è–¥–∫—ñ–≤ | ‚úÖ –í–∏–∫–æ–Ω–∞–Ω–æ |
| **–í–∞–ª—ñ–¥–∞—Ü—ñ—è Telegram** | 5 –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤ | ~80 —Ä—è–¥–∫—ñ–≤ | ‚úÖ –í–∏–∫–æ–Ω–∞–Ω–æ |
| **API –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ** | 5 –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤ | ~70 —Ä—è–¥–∫—ñ–≤ | ‚úÖ –í–∏–∫–æ–Ω–∞–Ω–æ |
| **–í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–æ–ª—ñ–≤** | 5 –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤ | ~50 —Ä—è–¥–∫—ñ–≤ | ‚úÖ –í–∏–∫–æ–Ω–∞–Ω–æ |

**–ó–ê–ì–ê–õ–û–ú –£–°–£–ù–£–¢–û:** ~450+ —Ä—è–¥–∫—ñ–≤ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤

### üéØ –î–û–°–Ø–ì–ù–£–¢–Ü –†–ï–ó–£–õ–¨–¢–ê–¢–ò

#### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è:
1. **–Ñ–¥–∏–Ω–∞ —Ç–æ—á–∫–∞ –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫** - BaseController
2. **–¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤** - UserRepository
3. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω—ñ API –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ** - —É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω—ñ –º–µ—Ç–æ–¥–∏
4. **–°–ø—Ä–æ—â–µ–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è** - –º–µ–Ω—à–µ –∫–æ–¥—É –¥–ª—è –ø–æ–∫—Ä–∏—Ç—Ç—è

#### –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ:
1. **–ó–º–µ–Ω—à–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É bundle** - —É—Å—É–Ω—É—Ç–æ ~450 —Ä—è–¥–∫—ñ–≤
2. **–®–≤–∏–¥—à–∞ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—è** - –º–µ–Ω—à–µ –∫–æ–¥—É –¥–ª—è –æ–±—Ä–æ–±–∫–∏
3. **–ú–µ–Ω—à–µ –ø–æ–º–∏–ª–æ–∫** - —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –ª–æ–≥—ñ–∫–∞

#### –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏:
1. **–ü—Ä–æ—Å—Ç—ñ—à–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥** - –∑–º—ñ–Ω–∏ –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ
2. **–õ–µ–≥—à–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π** - –≥–æ—Ç–æ–≤—ñ –±–∞–∑–æ–≤—ñ –∫–ª–∞—Å–∏
3. **–ö—Ä–∞—â–∏–π debugging** - —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥—É

### üîß –°–¢–í–û–†–ï–ù–Ü –ö–û–ú–ü–û–ù–ï–ù–¢–ò

#### –ù–æ–≤—ñ —Ñ–∞–π–ª–∏:
1. `core/BaseController.ts` - –±–∞–∑–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä
2. `core/repositories/UserRepository.ts` - —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
3. `core/repositories/` - –ø–∞–ø–∫–∞ –¥–ª—è –º–∞–π–±—É—Ç–Ω—ñ—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤

#### –û–Ω–æ–≤–ª–µ–Ω—ñ —Ñ–∞–π–ª–∏:
1. `modules/farming/controller.ts` - –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–æ
2. `modules/missions/controller.ts` - –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–æ  
3. `modules/wallet/controller.ts` - –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–æ
4. `modules/auth/controller.ts` - –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–æ
5. `modules/user/controller.ts` - –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–æ
6. `modules/farming/service.ts` - —á–∞—Å—Ç–∫–æ–≤–æ –æ–Ω–æ–≤–ª–µ–Ω–æ
7. `modules/missions/service.ts` - —á–∞—Å—Ç–∫–æ–≤–æ –æ–Ω–æ–≤–ª–µ–Ω–æ
8. `modules/wallet/service.ts` - —á–∞—Å—Ç–∫–æ–≤–æ –æ–Ω–æ–≤–ª–µ–Ω–æ

### ‚ú® –ü–ï–†–ï–í–ê–ì–ò –ù–û–í–û–á –ê–†–•–Ü–¢–ï–ö–¢–£–†–ò

#### –î–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤:
- –ú–µ–Ω—à–µ –∫–æ–¥—É –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–Ω—è
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω—ñ –ø–∞—Ç—Ç–µ—Ä–Ω–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
- –ì–æ—Ç–æ–≤—ñ –º–µ—Ç–æ–¥–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

#### –î–ª—è —Å–∏—Å—Ç–µ–º–∏:
- –ö—Ä–∞—â—ñ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ–º–∏–ª–æ–∫
- –Ñ–¥–∏–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥—É–≤–∞–Ω–Ω—è
- –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥–æ—Å—Ç—É–ø–æ–º
- –ü—Ä–æ—Å—Ç—ñ—à–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è

#### –î–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏:
- –®–≤–∏–¥—à–µ –≤–∏—è–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º
- –õ–µ–≥—à–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –º–æ–¥—É–ª—ñ–≤
- –ó–º–µ–Ω—à–µ–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –±–∞–≥—ñ–≤
- –ü—Ä–æ—Å—Ç—ñ—à–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### üöÄ –†–ï–ó–£–õ–¨–¢–ê–¢

**–£—Å—ñ –∫—Ä–∏—Ç–∏—á–Ω—ñ –¥—É–±–ª—ñ–∫–∞—Ç–∏ —É—Å–ø—ñ—à–Ω–æ —É—Å—É–Ω—É—Ç–æ. Backend-–ø—Ä–æ—î–∫—Ç —Ç–µ–ø–µ—Ä –º–∞—î:**
- –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É
- –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω—É –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫  
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω—ñ API –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –∑–∞–ø–∏—Ç–∏ –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- –ü—Ä–æ—Å—Ç—ñ—à—É –ø—ñ–¥—Ç—Ä–∏–º–∫—É —Ç–∞ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è

**–ü—Ä–æ—î–∫—Ç –≥–æ—Ç–æ–≤–∏–π –¥–æ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –±–µ–∑ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤ –∫–æ–¥—É.**