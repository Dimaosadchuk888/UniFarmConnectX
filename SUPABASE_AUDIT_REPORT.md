# SUPABASE AUDIT REPORT - UniFarm System
**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞**: 09 –∏—é–ª—è 2025
**–ê—É–¥–∏—Ç–æ—Ä**: AI Agent

## üìä –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–í—Å–µ–≥–æ —Ç–∞–±–ª–∏—Ü**: 11 (–Ω–æ —Ä–µ–∞–ª—å–Ω–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ 3)
- **–ê–∫—Ç–∏–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü**: 3 (`users`, `transactions`, `withdraw_requests`)
- **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü**: 8
- **–í—Å–µ–≥–æ –ø–æ–ª–µ–π**: 56
- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π**: 534,242

### –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
| –¢–∞–±–ª–∏—Ü–∞ | –°—Ç–∞—Ç—É—Å | –ó–∞–ø–∏—Å–µ–π | –ü–æ–ª–µ–π |
|---------|--------|---------|-------|
| users | ‚úÖ –°—É—â–µ—Å—Ç–≤—É–µ—Ç | 60 | 32 |
| transactions | ‚úÖ –°—É—â–µ—Å—Ç–≤—É–µ—Ç | 534,179 | 14 |
| withdraw_requests | ‚úÖ –°—É—â–µ—Å—Ç–≤—É–µ—Ç | 3 | 10 |
| user_sessions | ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | - | - |
| referrals | ‚ö†Ô∏è –°—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –ø—É—Å—Ç–∞—è | 0 | 0 |
| farming_sessions | ‚ö†Ô∏è –°—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –ø—É—Å—Ç–∞—è | 0 | 0 |
| boost_purchases | ‚ö†Ô∏è –°—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –ø—É—Å—Ç–∞—è | 0 | 0 |
| missions | ‚ö†Ô∏è –°—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –ø—É—Å—Ç–∞—è | 0 | 0 |
| user_missions | ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | - | - |
| airdrops | ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | - | - |
| daily_bonus_logs | ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | - | - |

## üîç –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –¢–ê–ë–õ–ò–¶

### 1. –¢–∞–±–ª–∏—Ü–∞ `users` (‚úÖ –ê–∫—Ç–∏–≤–Ω–∞—è)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–∏—Å—Ç–µ–º—ã
**–°—Ç–∞—Ç—É—Å**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
**–ó–∞–ø–∏—Å–µ–π**: 60 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è:
- `id` (number) - –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `telegram_id` (number) - ID –≤ Telegram
- `balance_uni` (number) - –ë–∞–ª–∞–Ω—Å UNI —Ç–æ–∫–µ–Ω–æ–≤
- `balance_ton` (number) - –ë–∞–ª–∞–Ω—Å TON —Ç–æ–∫–µ–Ω–æ–≤
- `ref_code` (string) - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥
- `uni_farming_active` (boolean) - –°—Ç–∞—Ç—É—Å UNI —Ñ–∞—Ä–º–∏–Ω–≥–∞
- `ton_boost_package` (number) - ID –ø–∞–∫–µ—Ç–∞ TON Boost

#### –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø–æ–ª—è:
- `wallet` (object, NULL) - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –≤—Å–µ–≥–¥–∞ NULL
- `referred_by` (object, NULL) - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å–ª–æ–º (referrer_id)
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ª–µ–π `ton_farming_*` - –î—É–±–ª–∏—Ä—É—é—Ç –ª–æ–≥–∏–∫—É TON Boost

### 2. –¢–∞–±–ª–∏—Ü–∞ `transactions` (‚úÖ –ê–∫—Ç–∏–≤–Ω–∞—è)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ
**–°—Ç–∞—Ç—É—Å**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
**–ó–∞–ø–∏—Å–µ–π**: 534,179 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è:
- `id` (number) - –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `user_id` (number) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `type` (string) - –¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `amount_uni` (number) - –°—É–º–º–∞ –≤ UNI
- `amount_ton` (number) - –°—É–º–º–∞ –≤ TON
- `status` (string) - –°—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

#### –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø–æ–ª—è:
- `metadata` (object, NULL) - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- `tx_hash` (object, NULL) - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- `currency` (object, NULL) - –î—É–±–ª–∏—Ä—É–µ—Ç amount_uni/amount_ton

### 3. –¢–∞–±–ª–∏—Ü–∞ `withdraw_requests` (‚úÖ –ê–∫—Ç–∏–≤–Ω–∞—è)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ó–∞—è–≤–∫–∏ –Ω–∞ –≤—ã–≤–æ–¥ TON
**–°—Ç–∞—Ç—É—Å**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
**–ó–∞–ø–∏—Å–µ–π**: 3 –∑–∞—è–≤–∫–∏

#### –í—Å–µ –ø–æ–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### 1. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –∫–æ–¥–µ:
- `user_sessions` - –ö–æ–¥ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–µ—Å—Å–∏–∏, –Ω–æ —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- `user_missions` - –°–∏—Å—Ç–µ–º–∞ –º–∏—Å—Å–∏–π –Ω–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü—ã
- `airdrops` - –ú–æ–¥—É–ª—å airdrop –Ω–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
- `daily_bonus_logs` - Daily bonus –Ω–µ –º–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é

### 2. –ü—É—Å—Ç—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å –ø—Ä–æ–±–ª–µ–º–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:
- `referrals` - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø—É—Å—Ç–∞—è
- `farming_sessions` - UNI —Ñ–∞—Ä–º–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –ø–æ–ª—è –≤ users, –∞ –Ω–µ —á–µ—Ä–µ–∑ —Å–µ—Å—Å–∏–∏
- `boost_purchases` - TON Boost –ø–æ–∫—É–ø–∫–∏ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è
- `missions` - –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–∏—Å—Å–∏—è—Ö

### 3. –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö:
- –í –∫–æ–¥–µ `referrer_id` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —á–∏—Å–ª–æ, –≤ –ë–î `referred_by` –∫–∞–∫ object
- Timestamps —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏ –≤–º–µ—Å—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ timestamp

## üìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –°—Ä–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
1. **–°–æ–∑–¥–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã**:
   - `user_sessions` –¥–ª—è JWT —Å–µ—Å—Å–∏–π
   - `user_missions` –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –º–∏—Å—Å–∏–π
   - `daily_bonus_logs` –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –±–æ–Ω—É—Å–æ–≤
   - `airdrops` –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤

2. **–ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø—É—Å—Ç—ã–µ —Ç–∞–±–ª–∏—Ü—ã**:
   - –î–æ–±–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ `missions` (–º–∏–Ω–∏–º—É–º 3-5 –º–∏—Å—Å–∏–π)
   - –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏ –≤ —Ç–∞–±–ª–∏—Ü—É `referrals`
   - –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –ø–æ–∫—É–ø–∫–∏ –≤ `boost_purchases`

3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö**:
   - –ò–∑–º–µ–Ω–∏—Ç—å `referred_by` –Ω–∞ `referrer_id` (integer)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø timestamp –¥–ª—è –¥–∞—Ç

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
1. –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è (wallet, metadata, tx_hash)
2. –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â—É—é –ª–æ–≥–∏–∫—É ton_farming_* –∏ ton_boost_*
3. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è (user_id, type, created_at)

## üîÑ –ü–õ–ê–ù –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò

### –≠—Ç–∞–ø 1 (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π):
```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã user_sessions
CREATE TABLE user_sessions (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  session_token TEXT UNIQUE NOT NULL,
  expires_at TIMESTAMP NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);

-- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã user_missions
CREATE TABLE user_missions (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  mission_id INTEGER,
  completed BOOLEAN DEFAULT FALSE,
  completed_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW()
);
```

### –≠—Ç–∞–ø 2 (–í–∞–∂–Ω—ã–π):
```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã daily_bonus_logs
CREATE TABLE daily_bonus_logs (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  bonus_amount DECIMAL(20,6),
  day_number INTEGER,
  claimed_at TIMESTAMP DEFAULT NOW()
);

-- –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã missions
INSERT INTO missions (title, description, reward_uni, type) VALUES
  ('–ü–µ—Ä–≤—ã–π –¥–µ–ø–æ–∑–∏—Ç', '–°–¥–µ–ª–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π –¥–µ–ø–æ–∑–∏—Ç UNI', 10, 'one_time'),
  ('–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞', '–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ 1 –¥—Ä—É–≥–∞', 5, 'one_time'),
  ('–ê–∫—Ç–∏–≤–Ω—ã–π —Ñ–∞—Ä–º–µ—Ä', '–§–∞—Ä–º–∏—Ç–µ 7 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥', 20, 'streak');
```

### –≠—Ç–∞–ø 3 (–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è):
- –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ø–æ–ª–µ–π users –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –ø–æ–ª–µ–π
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üìä –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**: 40%
- ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
- ‚ùå –ú–Ω–æ–≥–∏–µ –º–æ–¥—É–ª–∏ –Ω–µ –º–æ–≥—É—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å—Ä–æ—á–Ω–æ–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ** –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã UniFarm.