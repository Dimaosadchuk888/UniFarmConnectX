/**
 * –ì–ª—É–±–æ–∫–∏–π –∞—É–¥–∏—Ç –ª–æ–≥–∏–∫–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–µ–ø–æ–∑–∏—Ç–æ–≤ –≤ TON Boost
 * –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
 */

import { supabase } from './core/supabase';

async function auditTonBoostMultipleDeposits() {
  console.log('‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó');
  console.log('‚ïë     –ê–£–î–ò–¢ –õ–û–ì–ò–ö–ò –ú–ù–û–ñ–ï–°–¢–í–ï–ù–ù–´–• –î–ï–ü–û–ó–ò–¢–û–í –í TON BOOST        ‚ïë');
  console.log('‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù');
  console.log('\n–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:', new Date().toLocaleString());
  console.log('–û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: User 74 (9 –ø–æ–∫—É–ø–æ–∫)\n');
  
  // =====================================================
  // 1. –°–¢–†–£–ö–¢–£–†–ê –•–†–ê–ù–ï–ù–ò–Ø –ü–ê–ö–ï–¢–û–í
  // =====================================================
  console.log('‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê');
  console.log('‚îÇ 1. –°–¢–†–£–ö–¢–£–†–ê –•–†–ê–ù–ï–ù–ò–Ø –ü–ê–ö–ï–¢–û–í –í ton_farming_data           ‚îÇ');
  console.log('‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n');
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø–æ–∫—É–ø–∫–∞–º–∏
  const { data: tonFarmingRecords } = await supabase
    .from('ton_farming_data')
    .select('*')
    .eq('user_id', 74);
    
  console.log(`üìä –ó–∞–ø–∏—Å–µ–π –≤ ton_farming_data –¥–ª—è User 74: ${tonFarmingRecords?.length || 0}`);
  
  if (tonFarmingRecords && tonFarmingRecords.length > 0) {
    const record = tonFarmingRecords[0];
    console.log('\nüìã –¢–µ–∫—É—â–∞—è –∑–∞–ø–∏—Å—å:');
    console.log(`‚îú‚îÄ ID: ${record.id}`);
    console.log(`‚îú‚îÄ User ID: ${record.user_id}`);
    console.log(`‚îú‚îÄ Farming Balance: ${record.farming_balance} TON`);
    console.log(`‚îú‚îÄ Boost Package ID: ${record.boost_package_id}`);
    console.log(`‚îú‚îÄ Farming Rate: ${record.farming_rate}`);
    console.log(`‚îú‚îÄ Created: ${new Date(record.created_at).toLocaleString()}`);
    console.log(`‚îî‚îÄ Updated: ${new Date(record.updated_at).toLocaleString()}`);
  }
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø–æ–∫—É–ø–∫–∞–º–∏
  const { data: multiPurchaseUsers } = await supabase
    .from('transactions')
    .select('user_id')
    .eq('type', 'BOOST_PURCHASE')
    .order('user_id');
    
  const purchaseCountByUser: Record<number, number> = {};
  multiPurchaseUsers?.forEach(tx => {
    purchaseCountByUser[tx.user_id] = (purchaseCountByUser[tx.user_id] || 0) + 1;
  });
  
  console.log('\nüìä –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:');
  for (const [userId, count] of Object.entries(purchaseCountByUser)) {
    if (count > 1) {
      const { data: userRecords } = await supabase
        .from('ton_farming_data')
        .select('id')
        .eq('user_id', userId);
      console.log(`‚îú‚îÄ User ${userId}: ${count} –ø–æ–∫—É–ø–æ–∫ ‚Üí ${userRecords?.length || 0} –∑–∞–ø–∏—Å–µ–π –≤ ton_farming_data`);
    }
  }
  
  console.log('\n‚ùó –í–´–í–û–î: –û–¥–Ω–∞ –∑–∞–ø–∏—Å—å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–æ–≤–æ–π –ø–æ–∫—É–ø–∫–µ');
  
  // =====================================================
  // 2. –ü–û–í–ï–î–ï–ù–ò–ï farming_balance
  // =====================================================
  console.log('\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê');
  console.log('‚îÇ 2. –ü–û–í–ï–î–ï–ù–ò–ï farming_balance –ü–†–ò –ù–û–í–´–• –ü–û–ö–£–ü–ö–ê–•            ‚îÇ');
  console.log('‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n');
  
  // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∏—Å—Ç–æ—Ä–∏—é –ø–æ–∫—É–ø–æ–∫ User 74
  const { data: boostPurchases } = await supabase
    .from('transactions')
    .select('*')
    .eq('user_id', 74)
    .eq('type', 'BOOST_PURCHASE')
    .order('created_at', { ascending: true });
    
  console.log('üìà –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è –ø–æ–∫—É–ø–æ–∫ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞:');
  console.log('‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê');
  console.log('‚îÇ #  ‚îÇ –î–∞—Ç–∞                ‚îÇ –°—É–º–º–∞    ‚îÇ –ü–∞–∫–µ—Ç                ‚îÇ');
  console.log('‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§');
  
  let totalSpent = 0;
  boostPurchases?.forEach((tx, idx) => {
    const amount = parseFloat(tx.amount || '0');
    totalSpent += amount;
    const meta = typeof tx.metadata === 'string' ? JSON.parse(tx.metadata) : tx.metadata;
    console.log(`‚îÇ ${(idx + 1).toString().padEnd(2)} ‚îÇ ${new Date(tx.created_at).toLocaleDateString().padEnd(19)} ‚îÇ ${amount.toFixed(1).padEnd(8)} ‚îÇ ${tx.description?.substring(0, 20) || 'N/A'} ‚îÇ`);
  });
  console.log('‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò');
  
  console.log(`\nüí∞ –û–±—â–∞—è —Å—É–º–º–∞ –≤—Å–µ—Ö –ø–æ–∫—É–ø–æ–∫: ${totalSpent} TON`);
  console.log(`üíæ –¢–µ–∫—É—â–∏–π farming_balance: ${tonFarmingRecords?.[0]?.farming_balance || 0} TON`);
  console.log(`üìä –†–∞–∑–Ω–∏—Ü–∞: ${totalSpent - (tonFarmingRecords?.[0]?.farming_balance || 0)} TON –ø–æ—Ç–µ—Ä—è–Ω–æ`);
  
  console.log('\n‚ùó –í–´–í–û–î: farming_balance –ù–ï —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è, –∑–∞–º–µ—â–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–∫—É–ø–∫–æ–π');
  
  // =====================================================
  // 3. –¢–†–ê–ù–ó–ê–ö–¶–ò–ò BOOST_PURCHASE
  // =====================================================
  console.log('\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê');
  console.log('‚îÇ 3. –ê–ù–ê–õ–ò–ó –¢–†–ê–ù–ó–ê–ö–¶–ò–ô BOOST_PURCHASE                        ‚îÇ');
  console.log('‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n');
  
  console.log('üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:');
  console.log(`‚îú‚îÄ –í—Å–µ–≥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π: ${boostPurchases?.length || 0}`);
  console.log(`‚îú‚îÄ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å —Å—É–º–º–æ–π: ${boostPurchases?.filter(tx => tx.amount).length || 0}`);
  console.log(`‚îî‚îÄ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å metadata: ${boostPurchases?.filter(tx => tx.metadata).length || 0}`);
  
  // –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ metadata
  console.log('\nüîç –ê–Ω–∞–ª–∏–∑ metadata:');
  let withOriginalType = 0;
  let withBoostPackageId = 0;
  let withDailyRate = 0;
  
  boostPurchases?.forEach(tx => {
    const meta = typeof tx.metadata === 'string' ? JSON.parse(tx.metadata) : tx.metadata;
    if (meta?.original_type) withOriginalType++;
    if (meta?.boost_package_id) withBoostPackageId++;
    if (meta?.daily_rate) withDailyRate++;
  });
  
  console.log(`‚îú‚îÄ –° original_type: ${withOriginalType} –∏–∑ ${boostPurchases?.length || 0}`);
  console.log(`‚îú‚îÄ –° boost_package_id: ${withBoostPackageId} –∏–∑ ${boostPurchases?.length || 0}`);
  console.log(`‚îî‚îÄ –° daily_rate: ${withDailyRate} –∏–∑ ${boostPurchases?.length || 0}`);
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É–º–º
  const amounts = boostPurchases?.map(tx => parseFloat(tx.amount || '0')) || [];
  const uniqueAmounts = [...new Set(amounts)];
  console.log(`\nüíµ –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å—É–º–º—ã –ø–æ–∫—É–ø–æ–∫: [${uniqueAmounts.join(', ')}] TON`);
  
  console.log('\n‚ùó –í–´–í–û–î: –í—Å–µ –ø–æ–∫—É–ø–∫–∏ —Å–æ–∑–¥–∞—é—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –Ω–æ —Å—Ç–∞—Ä—ã–µ —Å—É–º–º—ã —Ç–µ—Ä—è—é—Ç—Å—è');
  
  // =====================================================
  // 4. –ù–ê–ß–ò–°–õ–ï–ù–ò–Ø –î–û–•–û–î–ê (TON_BOOST_INCOME)
  // =====================================================
  console.log('\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê');
  console.log('‚îÇ 4. –ê–ù–ê–õ–ò–ó –ù–ê–ß–ò–°–õ–ï–ù–ò–ô –î–û–•–û–î–ê (TON_BOOST_INCOME)             ‚îÇ');
  console.log('‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n');
  
  // –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
  const { data: incomeTransactions } = await supabase
    .from('transactions')
    .select('*')
    .eq('user_id', 74)
    .eq('currency', 'TON')
    .eq('type', 'FARMING_REWARD')
    .order('created_at', { ascending: false })
    .limit(10);
    
  console.log('üìà –ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è TON:');
  let tonBoostIncomeCount = 0;
  incomeTransactions?.forEach(tx => {
    const meta = typeof tx.metadata === 'string' ? JSON.parse(tx.metadata) : tx.metadata;
    if (meta?.original_type === 'TON_BOOST_INCOME') {
      tonBoostIncomeCount++;
      console.log(`‚îú‚îÄ ${new Date(tx.created_at).toLocaleString()}: +${tx.amount} TON`);
      console.log(`‚îÇ  ‚îî‚îÄ Package ID: ${meta.boost_package_id}, Rate: ${meta.daily_rate}`);
    }
  });
  
  if (tonBoostIncomeCount === 0) {
    console.log('‚ùå TON_BOOST_INCOME —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã!');
  }
  
  // –†–∞—Å—á–µ—Ç –æ–∂–∏–¥–∞–µ–º–æ–≥–æ –¥–æ—Ö–æ–¥–∞
  const currentPackage = tonFarmingRecords?.[0];
  if (currentPackage) {
    const expectedDailyIncome = currentPackage.farming_balance * currentPackage.farming_rate;
    const expectedPerCycle = expectedDailyIncome / 288; // 288 —Ü–∏–∫–ª–æ–≤ –ø–æ 5 –º–∏–Ω—É—Ç –≤ –¥–µ–Ω—å
    console.log(`\nüí° –†–∞—Å—á–µ—Ç –¥–æ—Ö–æ–¥–∞ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –ø–∞–∫–µ—Ç–∞:`);
    console.log(`‚îú‚îÄ –ë–∞–ª–∞–Ω—Å: ${currentPackage.farming_balance} TON`);
    console.log(`‚îú‚îÄ –°—Ç–∞–≤–∫–∞: ${currentPackage.farming_rate * 100}% –≤ –¥–µ–Ω—å`);
    console.log(`‚îú‚îÄ –û–∂–∏–¥–∞–µ–º—ã–π –¥–æ—Ö–æ–¥ –∑–∞ —Ü–∏–∫–ª: ${expectedPerCycle.toFixed(6)} TON`);
    console.log(`‚îî‚îÄ –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –¥–æ—Ö–æ–¥: ${incomeTransactions?.[0]?.amount || '–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö'} TON`);
  }
  
  console.log('\n‚ùó –í–´–í–û–î: –î–æ—Ö–æ–¥ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞');
  
  // =====================================================
  // 5. –°–†–ê–í–ù–ï–ù–ò–ï –° UNI FARMING
  // =====================================================
  console.log('\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê');
  console.log('‚îÇ 5. –°–†–ê–í–ù–ï–ù–ò–ï –° UNI FARMING                                  ‚îÇ');
  console.log('‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n');
  
  // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ UNI –¥–µ–ø–æ–∑–∏—Ç–∞–º –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
  const { data: uniDeposits } = await supabase
    .from('transactions')
    .select('amount')
    .eq('user_id', 74)
    .eq('type', 'FARMING_DEPOSIT');
    
  const { data: userData } = await supabase
    .from('users')
    .select('uni_deposit_amount')
    .eq('id', 74)
    .single();
    
  const totalUniDeposits = uniDeposits?.reduce((sum, tx) => sum + parseFloat(tx.amount || '0'), 0) || 0;
  
  console.log('üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞:');
  console.log('‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê');
  console.log('‚îÇ –ü–∞—Ä–∞–º–µ—Ç—Ä            ‚îÇ UNI Farming     ‚îÇ TON Boost       ‚îÇ');
  console.log('‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§');
  console.log(`‚îÇ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫—É–ø–æ–∫  ‚îÇ ${uniDeposits?.length || 0}              ‚îÇ ${boostPurchases?.length || 0}               ‚îÇ`);
  console.log(`‚îÇ –°—É–º–º–∞ –≤—Å–µ—Ö –ø–æ–∫—É–ø–æ–∫  ‚îÇ ${totalUniDeposits.toFixed(0)}         ‚îÇ ${totalSpent.toFixed(0)}            ‚îÇ`);
  console.log(`‚îÇ –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å      ‚îÇ ${userData?.uni_deposit_amount || 0}         ‚îÇ ${tonFarmingRecords?.[0]?.farming_balance || 0}              ‚îÇ`);
  console.log(`‚îÇ –õ–æ–≥–∏–∫–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è   ‚îÇ –°–£–ú–ú–ò–†–û–í–ê–ù–ò–ï    ‚îÇ –ó–ê–ú–ï–©–ï–ù–ò–ï       ‚îÇ`);
  console.log(`‚îÇ –ü–æ—Ç–µ—Ä–∏ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–∞—Ö ‚îÇ 0 UNI           ‚îÇ ${(totalSpent - (tonFarmingRecords?.[0]?.farming_balance || 0)).toFixed(0)} TON       ‚îÇ`);
  console.log('‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò');
  
  console.log('\n‚ùì –ü–æ—á–µ–º—É TON Boost —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω–∞—á–µ?');
  console.log('‚îú‚îÄ UNI: –í—Å–µ –¥–µ–ø–æ–∑–∏—Ç—ã —Å—É–º–º–∏—Ä—É—é—Ç—Å—è –≤ uni_deposit_amount');
  console.log('‚îú‚îÄ TON: –ö–∞–∂–¥–∞—è –ø–æ–∫—É–ø–∫–∞ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç farming_balance');
  console.log('‚îî‚îÄ –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–∫—É–ø–∫–∞—Ö —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å—É–º–º—ã');
  
  // =====================================================
  // –§–ò–ù–ê–õ–¨–ù–´–ï –í–´–í–û–î–´
  // =====================================================
  console.log('\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó');
  console.log('‚ïë                    –§–ò–ù–ê–õ–¨–ù–´–ï –í–´–í–û–î–´                          ‚ïë');
  console.log('‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n');
  
  console.log('‚ö†Ô∏è  –í–´–Ø–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:');
  console.log('‚îú‚îÄ 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∑–∞–ø–∏—Å—å –≤ ton_farming_data');
  console.log('‚îú‚îÄ 2. –ü–æ—Ç–µ—Ä—è —Å—Ä–µ–¥—Å—Ç–≤: –ø—Ä–∏ –Ω–æ–≤–æ–π –ø–æ–∫—É–ø–∫–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –±–∞–ª–∞–Ω—Å –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è');
  console.log('‚îú‚îÄ 3. –ù–µ–¥–æ–ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–∞: –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –æ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–∞–∫–µ—Ç–∞');
  console.log(`‚îî‚îÄ 4. User 74 –ø–æ—Ç–µ—Ä—è–ª ${(totalSpent - (tonFarmingRecords?.[0]?.farming_balance || 0)).toFixed(0)} TON –∏–∑ ${totalSpent} TON`);
  
  console.log('\n‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û:');
  console.log('‚îú‚îÄ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∫—É–ø–∫–∏');
  console.log('‚îú‚îÄ –°—É–º–º—ã –ø–æ–∫—É–ø–æ–∫ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ');
  console.log('‚îú‚îÄ –ù–∞—á–∏—Å–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞');
  console.log('‚îî‚îÄ –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ–ª–Ω–∞—è');
  
  console.log('\n‚ùå –ß–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢:');
  console.log('‚îú‚îÄ –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –¥–µ–ø–æ–∑–∏—Ç–æ–≤ (–∫–∞–∫ –≤ UNI)');
  console.log('‚îú‚îÄ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤');
  console.log('‚îú‚îÄ –ù–∞—á–∏—Å–ª–µ–Ω–∏—è –æ—Ç –≤—Å–µ—Ö –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤');
  console.log('‚îî‚îÄ –í–æ–∑–≤—Ä–∞—Ç/–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –ø–∞–∫–µ—Ç–∞');
  
  console.log('\nüí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:');
  console.log('‚îú‚îÄ 1. –ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –Ω–∞ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—É—é (–∫–∞–∫ UNI)');
  console.log('‚îú‚îÄ 2. –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –∏—Å—Ç–æ—Ä–∏–∏ –ø–∞–∫–µ—Ç–æ–≤');
  console.log('‚îú‚îÄ 3. –ò–ª–∏ —è–≤–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ –∑–∞–º–µ—â–µ–Ω–∏–∏');
  console.log('‚îî‚îÄ 4. –ö–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º');
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –∞—É–¥–∏—Ç
auditTonBoostMultipleDeposits().catch(console.error);